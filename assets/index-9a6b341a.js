var pa=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var vp=pa((Sp,gn)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function re(){}const co=t=>t;function kt(t,e){for(const n in e)t[n]=e[n];return t}function uo(t){return t()}function ji(){return Object.create(null)}function Ue(t){t.forEach(uo)}function Yt(t){return typeof t=="function"}function me(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function ga(t){return Object.keys(t).length===0}function fo(t,...e){if(t==null)return re;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function rn(t){let e;return fo(t,n=>e=n)(),e}function fe(t,e,n){t.$$.on_destroy.push(fo(e,n))}function Ee(t,e,n,r){if(t){const s=ho(t,e,n,r);return t[0](s)}}function ho(t,e,n,r){return t[1]&&r?kt(n.ctx.slice(),t[1](r(e))):n.ctx}function ke(t,e,n,r){if(t[2]&&r){const s=t[2](r(n));if(e.dirty===void 0)return s;if(typeof s=="object"){const i=[],o=Math.max(e.dirty.length,s.length);for(let l=0;l<o;l+=1)i[l]=e.dirty[l]|s[l];return i}return e.dirty|s}return e.dirty}function Ae(t,e,n,r,s,i){if(s){const o=ho(e,n,r,i);t.p(o,s)}}function Re(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let r=0;r<n;r++)e[r]=-1;return e}return-1}function po(t){const e={};for(const n in t)n[0]!=="$"&&(e[n]=t[n]);return e}function Zn(t,e){const n={};e=new Set(e);for(const r in t)!e.has(r)&&r[0]!=="$"&&(n[r]=t[r]);return n}function ma(t){const e={};for(const n in t)e[n]=!0;return e}function Ze(t,e,n){return t.set(n),e}function Yn(t){return t&&Yt(t.destroy)?t.destroy:re}const go=typeof window<"u";let ba=go?()=>window.performance.now():()=>Date.now(),Qr=go?t=>requestAnimationFrame(t):re;const Zt=new Set;function mo(t){Zt.forEach(e=>{e.c(t)||(Zt.delete(e),e.f())}),Zt.size!==0&&Qr(mo)}function _a(t){let e;return Zt.size===0&&Qr(mo),{promise:new Promise(n=>{Zt.add(e={c:t,f:n})}),abort(){Zt.delete(e)}}}function C(t,e){t.appendChild(e)}function bo(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function ya(t){const e=L("style");return va(bo(t),e),e.sheet}function va(t,e){return C(t.head||t,e),e.sheet}function H(t,e,n){t.insertBefore(e,n||null)}function x(t){t.parentNode&&t.parentNode.removeChild(t)}function $r(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function L(t){return document.createElement(t)}function At(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function ae(t){return document.createTextNode(t)}function G(){return ae(" ")}function Ke(){return ae("")}function se(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function et(t){return function(e){return e.preventDefault(),t.call(this,e)}}function ct(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function y(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Qn(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const r in e)e[r]==null?t.removeAttribute(r):r==="style"?t.style.cssText=e[r]:r==="__value"?t.value=t[r]=e[r]:n[r]&&n[r].set?t[r]=e[r]:y(t,r,e[r])}function Mi(t,e){for(const n in e)y(t,n,e[n])}function wa(t){return Array.from(t.childNodes)}function xe(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function Qt(t,e){t.value=e??""}function Pn(t,e,n,r){n===null?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function Ni(t,e){for(let n=0;n<t.options.length;n+=1){const r=t.options[n];if(r.__value===e){r.selected=!0;return}}t.selectedIndex=-1}function Sa(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}function ne(t,e,n){t.classList[n?"add":"remove"](e)}function _o(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(t,n,r,e),s}class yo{constructor(e=!1){this.is_svg=!1,this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,r=null){this.e||(this.is_svg?this.e=At(n.nodeName):this.e=L(n.nodeName),this.t=n,this.c(e)),this.i(r)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)H(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(x)}}const $n=new Map;let er=0;function Ea(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function ka(t,e){const n={stylesheet:ya(e),rules:{}};return $n.set(t,n),n}function Ii(t,e,n,r,s,i,o,l=0){const c=16.666/r;let a=`{
`;for(let E=0;E<=1;E+=c){const S=e+(n-e)*i(E);a+=E*100+`%{${o(S,1-S)}}
`}const u=a+`100% {${o(n,1-n)}}
}`,f=`__svelte_${Ea(u)}_${l}`,d=bo(t),{stylesheet:p,rules:h}=$n.get(d)||ka(d,t);h[f]||(h[f]=!0,p.insertRule(`@keyframes ${f} ${u}`,p.cssRules.length));const m=t.style.animation||"";return t.style.animation=`${m?`${m}, `:""}${f} ${r}ms linear ${s}ms 1 both`,er+=1,f}function Aa(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?i=>i.indexOf(e)<0:i=>i.indexOf("__svelte")===-1),s=n.length-r.length;s&&(t.style.animation=r.join(", "),er-=s,er||Ra())}function Ra(){Qr(()=>{er||($n.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&x(e)}),$n.clear())})}let En;function mn(t){En=t}function Bn(){if(!En)throw new Error("Function called outside component initialization");return En}function Ta(t){Bn().$$.before_update.push(t)}function ei(t){Bn().$$.on_mount.push(t)}function Oa(t){Bn().$$.after_update.push(t)}function Ca(t){Bn().$$.on_destroy.push(t)}function sn(){const t=Bn();return(e,n,{cancelable:r=!1}={})=>{const s=t.$$.callbacks[e];if(s){const i=_o(e,n,{cancelable:r});return s.slice().forEach(o=>{o.call(t,i)}),!i.defaultPrevented}return!0}}function qe(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach(r=>r.call(this,e))}const hn=[],ye=[],Kn=[],qr=[],Ba=Promise.resolve();let Wr=!1;function ja(){Wr||(Wr=!0,Ba.then(vo))}function Rt(t){Kn.push(t)}function Be(t){qr.push(t)}const Mr=new Set;let Dn=0;function vo(){const t=En;do{for(;Dn<hn.length;){const e=hn[Dn];Dn++,mn(e),Ma(e.$$)}for(mn(null),hn.length=0,Dn=0;ye.length;)ye.pop()();for(let e=0;e<Kn.length;e+=1){const n=Kn[e];Mr.has(n)||(Mr.add(n),n())}Kn.length=0}while(hn.length);for(;qr.length;)qr.pop()();Wr=!1,Mr.clear(),mn(t)}function Ma(t){if(t.fragment!==null){t.update(),Ue(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Rt)}}let un;function Na(){return un||(un=Promise.resolve(),un.then(()=>{un=null})),un}function Nr(t,e,n){t.dispatchEvent(_o(`${e?"intro":"outro"}${n}`))}const Jn=new Set;let at;function Te(){at={r:0,c:[],p:at}}function Oe(){at.r||Ue(at.c),at=at.p}function A(t,e){t&&t.i&&(Jn.delete(t),t.i(e))}function j(t,e,n,r){if(t&&t.o){if(Jn.has(t))return;Jn.add(t),at.c.push(()=>{Jn.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}else r&&r()}const Ia={duration:0};function $t(t,e,n,r){const s={direction:"both"};let i=e(t,n,s),o=r?0:1,l=null,c=null,a=null;function u(){a&&Aa(t,a)}function f(p,h){const m=p.b-o;return h*=Math.abs(m),{a:o,b:p.b,d:m,duration:h,start:p.start,end:p.start+h,group:p.group}}function d(p){const{delay:h=0,duration:m=300,easing:E=co,tick:S=re,css:F}=i||Ia,k={start:ba()+h,b:p};p||(k.group=at,at.r+=1),l||c?c=k:(F&&(u(),a=Ii(t,o,p,m,h,E,F)),p&&S(0,1),l=f(k,m),Rt(()=>Nr(t,p,"start")),_a(D=>{if(c&&D>c.start&&(l=f(c,m),c=null,Nr(t,l.b,"start"),F&&(u(),a=Ii(t,o,l.b,l.duration,0,E,i.css))),l){if(D>=l.end)S(o=l.b,1-o),Nr(t,l.b,"end"),c||(l.b?u():--l.group.r||Ue(l.group.c)),l=null;else if(D>=l.start){const B=D-l.start;o=l.a+l.d*E(B/l.duration),S(o,1-o)}}return!!(l||c)}))}return{run(p){Yt(i)?Na().then(()=>{i=i(s),d(p)}):d(p)},end(){u(),l=c=null}}}const xa=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function wo(t,e){j(t,1,1,()=>{e.delete(t.key)})}function So(t,e,n,r,s,i,o,l,c,a,u,f){let d=t.length,p=i.length,h=d;const m={};for(;h--;)m[t[h].key]=h;const E=[],S=new Map,F=new Map;for(h=p;h--;){const z=f(s,i,h),R=n(z);let w=o.get(R);w?r&&w.p(z,e):(w=a(R,z),w.c()),S.set(R,E[h]=w),R in m&&F.set(R,Math.abs(h-m[R]))}const k=new Set,D=new Set;function B(z){A(z,1),z.m(l,u),o.set(z.key,z),u=z.first,p--}for(;d&&p;){const z=E[p-1],R=t[d-1],w=z.key,q=R.key;z===R?(u=z.first,d--,p--):S.has(q)?!o.has(w)||k.has(w)?B(z):D.has(q)?d--:F.get(w)>F.get(q)?(D.add(w),B(z)):(k.add(q),d--):(c(R,o),d--)}for(;d--;){const z=t[d];S.has(z.key)||c(z,o)}for(;p;)B(E[p-1]);return E}function ti(t,e){const n={},r={},s={$$scope:1};let i=t.length;for(;i--;){const o=t[i],l=e[i];if(l){for(const c in o)c in l||(r[c]=1);for(const c in l)s[c]||(n[c]=l[c],s[c]=1);t[i]=l}else for(const c in o)s[c]=1}for(const o in r)o in n||(n[o]=void 0);return n}function je(t,e,n,r){const s=t.$$.props[e];s!==void 0&&(t.$$.bound[s]=n,r===void 0&&n(t.$$.ctx[s]))}function Z(t){t&&t.c()}function J(t,e,n,r){const{fragment:s,after_update:i}=t.$$;s&&s.m(e,n),r||Rt(()=>{const o=t.$$.on_mount.map(uo).filter(Yt);t.$$.on_destroy?t.$$.on_destroy.push(...o):Ue(o),t.$$.on_mount=[]}),i.forEach(Rt)}function X(t,e){const n=t.$$;n.fragment!==null&&(Ue(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function La(t,e){t.$$.dirty[0]===-1&&(hn.push(t),ja(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function be(t,e,n,r,s,i,o,l=[-1]){const c=En;mn(t);const a=t.$$={fragment:null,ctx:[],props:i,update:re,not_equal:s,bound:ji(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:ji(),dirty:l,skip_bound:!1,root:e.target||c.$$.root};o&&o(a.root);let u=!1;if(a.ctx=n?n(t,e.props||{},(f,d,...p)=>{const h=p.length?p[0]:d;return a.ctx&&s(a.ctx[f],a.ctx[f]=h)&&(!a.skip_bound&&a.bound[f]&&a.bound[f](h),u&&La(t,f)),d}):[],a.update(),u=!0,Ue(a.before_update),a.fragment=r?r(a.ctx):!1,e.target){if(e.hydrate){const f=wa(e.target);a.fragment&&a.fragment.l(f),f.forEach(x)}else a.fragment&&a.fragment.c();e.intro&&A(t.$$.fragment),J(t,e.target,e.anchor,e.customElement),vo()}mn(c)}class _e{$destroy(){X(this,1),this.$destroy=re}$on(e,n){if(!Yt(n))return re;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}$set(e){this.$$set&&!ga(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}var xi=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(u){try{a(r.next(u))}catch(f){o(f)}}function c(u){try{a(r.throw(u))}catch(f){o(f)}}function a(u){u.done?i(u.value):s(u.value).then(l,c)}a((r=r.apply(t,e||[])).next())})},Li=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(a){return function(u){return c([a,u])}}function c(a){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=a[0]&2?s.return:a[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,a[1])).done)return i;switch(s=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,s=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){n.label=a[1];break}if(a[0]===6&&n.label<i[1]){n.label=i[1],i=a;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(a);break}i[2]&&n.ops.pop(),n.trys.pop();continue}a=e.call(t,n)}catch(u){a=[6,u],s=0}finally{r=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Ua=function(){function t(e,n){if(n&&Pt(n),!e)throw new Ve("Agent requires a private key");this.subject=n,this.privateKey=e}return t.fromSecret=function(e){var n=atob(e),r=JSON.parse(n),s=r.privateKey,i=r.subject,o=new t(s,i);return o},t.fromJSON=function(e){return new t(e.privateKey,e.subject)},t.prototype.getPublicKey=function(){return xi(this,void 0,void 0,function(){var e;return Li(this,function(n){switch(n.label){case 0:return this.publicKey?[3,2]:[4,Tc(this.privateKey)];case 1:e=n.sent(),this.publicKey=e,n.label=2;case 2:return[2,this.publicKey]}})})},t.prototype.buildSecret=function(){var e=JSON.stringify(this);return btoa(e)},t.prototype.checkPublicKey=function(){var e;return xi(this,void 0,void 0,function(){var n,r,s;return Li(this,function(i){switch(i.label){case 0:if(!this.subject)throw new Ve("Agent has no subject");return[4,tr(this.subject)];case 1:if(n=i.sent(),n.error)throw new Error("Could not fetch agent, and could therefore not check validity of public key. ".concat(n.error));return r=(e=n.get(De.agent.publicKey))===null||e===void 0?void 0:e.toString(),s=r,[4,this.getPublicKey()];case 2:if(s!==i.sent())throw new Error("Fetched publickey does not match current one - is the private key correct?");return[2]}})})},t}(),ni=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(u){try{a(r.next(u))}catch(f){o(f)}}function c(u){try{a(r.throw(u))}catch(f){o(f)}}function a(u){u.done?i(u.value):s(u.value).then(l,c)}a((r=r.apply(t,e||[])).next())})},ri=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(a){return function(u){return c([a,u])}}function c(a){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=a[0]&2?s.return:a[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,a[1])).done)return i;switch(s=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,s=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){n.label=a[1];break}if(a[0]===6&&n.label<i[1]){n.label=i[1],i=a;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(a);break}i[2]&&n.ops.pop(),n.trys.pop();continue}a=e.call(t,n)}catch(u){a=[6,u],s=0}finally{r=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};function Eo(t,e){return ni(this,void 0,void 0,function(){var n,r,s,i,o;return ri(this,function(l){switch(l.label){case 0:if(n=ai(),!e.subject)throw new Error("Agent has no subject, cannot authenticate");return o={"https://atomicdata.dev/properties/auth/agent":e.subject,"https://atomicdata.dev/properties/auth/requestedSubject":t},s="https://atomicdata.dev/properties/auth/publicKey",[4,e.getPublicKey()];case 1:return o[s]=l.sent(),o["https://atomicdata.dev/properties/auth/timestamp"]=n,i="https://atomicdata.dev/properties/auth/signature",[4,ko(t,e,n)];case 2:return r=(o[i]=l.sent(),o),[2,r]}})})}function ko(t,e,n){return ni(this,void 0,void 0,function(){var r;return ri(this,function(s){switch(s.label){case 0:return r="".concat(t," ").concat(n),[4,Lo(r,e.privateKey)];case 1:return[2,s.sent()]}})})}function Pa(t,e){var n;return!t.startsWith("http://localhost")&&((n=e==null?void 0:e.subject)===null||n===void 0?void 0:n.startsWith("http://localhost"))}function Da(t,e,n){return ni(this,void 0,void 0,function(){var r,s,i,o,l;return ri(this,function(c){switch(c.label){case 0:return r=ai(),(e==null?void 0:e.subject)&&!Pa(t,e)?(s=n,i="x-atomic-public-key",[4,e.getPublicKey()]):[3,3];case 1:return s[i]=c.sent(),o=n,l="x-atomic-signature",[4,ko(t,e,r)];case 2:o[l]=c.sent(),n["x-atomic-timestamp"]=r,n["x-atomic-agent"]=e==null?void 0:e.subject,c.label=3;case 3:return[2,n]}})})}var Ha=24*60*60*1e3,Fa=function(t,e,n,r){r===void 0&&(r=Ha);var s=new Date(Date.now()+r).toUTCString(),i=encodeURIComponent(e),o=new URL(n.getServerUrl()).hostname,l="".concat(t,"=").concat(i,";Expires=").concat(s,";Domain=").concat(o,";SameSite=Lax;path=/");document.cookie=l},Ao=function(t,e){Eo(t.getServerUrl(),e).then(function(n){Fa("atomic_session",btoa(JSON.stringify(n)),t)})},za=function(){var t=document.cookie.match(/^(.*;)?\s*atomic_session\s*=\s*[^;]+(.*)?$/);return t?t.length>0:!1};globalThis&&globalThis.__awaiter;globalThis&&globalThis.__generator;var qa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wa(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Vr={exports:{}};(function(t,e){var n=typeof self<"u"?self:qa,r=function(){function i(){this.fetch=!1,this.DOMException=n.DOMException}return i.prototype=n,new i}();(function(i){(function(o){var l={searchParams:"URLSearchParams"in i,iterable:"Symbol"in i&&"iterator"in Symbol,blob:"FileReader"in i&&"Blob"in i&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in i,arrayBuffer:"ArrayBuffer"in i};function c(b){return b&&DataView.prototype.isPrototypeOf(b)}if(l.arrayBuffer)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],u=ArrayBuffer.isView||function(b){return b&&a.indexOf(Object.prototype.toString.call(b))>-1};function f(b){if(typeof b!="string"&&(b=String(b)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(b))throw new TypeError("Invalid character in header field name");return b.toLowerCase()}function d(b){return typeof b!="string"&&(b=String(b)),b}function p(b){var T={next:function(){var _=b.shift();return{done:_===void 0,value:_}}};return l.iterable&&(T[Symbol.iterator]=function(){return T}),T}function h(b){this.map={},b instanceof h?b.forEach(function(T,_){this.append(_,T)},this):Array.isArray(b)?b.forEach(function(T){this.append(T[0],T[1])},this):b&&Object.getOwnPropertyNames(b).forEach(function(T){this.append(T,b[T])},this)}h.prototype.append=function(b,T){b=f(b),T=d(T);var _=this.map[b];this.map[b]=_?_+", "+T:T},h.prototype.delete=function(b){delete this.map[f(b)]},h.prototype.get=function(b){return b=f(b),this.has(b)?this.map[b]:null},h.prototype.has=function(b){return this.map.hasOwnProperty(f(b))},h.prototype.set=function(b,T){this.map[f(b)]=d(T)},h.prototype.forEach=function(b,T){for(var _ in this.map)this.map.hasOwnProperty(_)&&b.call(T,this.map[_],_,this)},h.prototype.keys=function(){var b=[];return this.forEach(function(T,_){b.push(_)}),p(b)},h.prototype.values=function(){var b=[];return this.forEach(function(T){b.push(T)}),p(b)},h.prototype.entries=function(){var b=[];return this.forEach(function(T,_){b.push([_,T])}),p(b)},l.iterable&&(h.prototype[Symbol.iterator]=h.prototype.entries);function m(b){if(b.bodyUsed)return Promise.reject(new TypeError("Already read"));b.bodyUsed=!0}function E(b){return new Promise(function(T,_){b.onload=function(){T(b.result)},b.onerror=function(){_(b.error)}})}function S(b){var T=new FileReader,_=E(T);return T.readAsArrayBuffer(b),_}function F(b){var T=new FileReader,_=E(T);return T.readAsText(b),_}function k(b){for(var T=new Uint8Array(b),_=new Array(T.length),U=0;U<T.length;U++)_[U]=String.fromCharCode(T[U]);return _.join("")}function D(b){if(b.slice)return b.slice(0);var T=new Uint8Array(b.byteLength);return T.set(new Uint8Array(b)),T.buffer}function B(){return this.bodyUsed=!1,this._initBody=function(b){this._bodyInit=b,b?typeof b=="string"?this._bodyText=b:l.blob&&Blob.prototype.isPrototypeOf(b)?this._bodyBlob=b:l.formData&&FormData.prototype.isPrototypeOf(b)?this._bodyFormData=b:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(b)?this._bodyText=b.toString():l.arrayBuffer&&l.blob&&c(b)?(this._bodyArrayBuffer=D(b.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(b)||u(b))?this._bodyArrayBuffer=D(b):this._bodyText=b=Object.prototype.toString.call(b):this._bodyText="",this.headers.get("content-type")||(typeof b=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(b)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var b=m(this);if(b)return b;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?m(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(S)}),this.text=function(){var b=m(this);if(b)return b;if(this._bodyBlob)return F(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(k(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(q)}),this.json=function(){return this.text().then(JSON.parse)},this}var z=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function R(b){var T=b.toUpperCase();return z.indexOf(T)>-1?T:b}function w(b,T){T=T||{};var _=T.body;if(b instanceof w){if(b.bodyUsed)throw new TypeError("Already read");this.url=b.url,this.credentials=b.credentials,T.headers||(this.headers=new h(b.headers)),this.method=b.method,this.mode=b.mode,this.signal=b.signal,!_&&b._bodyInit!=null&&(_=b._bodyInit,b.bodyUsed=!0)}else this.url=String(b);if(this.credentials=T.credentials||this.credentials||"same-origin",(T.headers||!this.headers)&&(this.headers=new h(T.headers)),this.method=R(T.method||this.method||"GET"),this.mode=T.mode||this.mode||null,this.signal=T.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&_)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(_)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})};function q(b){var T=new FormData;return b.trim().split("&").forEach(function(_){if(_){var U=_.split("="),O=U.shift().replace(/\+/g," "),N=U.join("=").replace(/\+/g," ");T.append(decodeURIComponent(O),decodeURIComponent(N))}}),T}function K(b){var T=new h,_=b.replace(/\r?\n[\t ]+/g," ");return _.split(/\r?\n/).forEach(function(U){var O=U.split(":"),N=O.shift().trim();if(N){var ue=O.join(":").trim();T.append(N,ue)}}),T}B.call(w.prototype);function v(b,T){T||(T={}),this.type="default",this.status=T.status===void 0?200:T.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in T?T.statusText:"OK",this.headers=new h(T.headers),this.url=T.url||"",this._initBody(b)}B.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},v.error=function(){var b=new v(null,{status:0,statusText:""});return b.type="error",b};var Q=[301,302,303,307,308];v.redirect=function(b,T){if(Q.indexOf(T)===-1)throw new RangeError("Invalid status code");return new v(null,{status:T,headers:{location:b}})},o.DOMException=i.DOMException;try{new o.DOMException}catch{o.DOMException=function(T,_){this.message=T,this.name=_;var U=Error(T);this.stack=U.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function ie(b,T){return new Promise(function(_,U){var O=new w(b,T);if(O.signal&&O.signal.aborted)return U(new o.DOMException("Aborted","AbortError"));var N=new XMLHttpRequest;function ue(){N.abort()}N.onload=function(){var ee={status:N.status,statusText:N.statusText,headers:K(N.getAllResponseHeaders()||"")};ee.url="responseURL"in N?N.responseURL:ee.headers.get("X-Request-URL");var Y="response"in N?N.response:N.responseText;_(new v(Y,ee))},N.onerror=function(){U(new TypeError("Network request failed"))},N.ontimeout=function(){U(new TypeError("Network request failed"))},N.onabort=function(){U(new o.DOMException("Aborted","AbortError"))},N.open(O.method,O.url,!0),O.credentials==="include"?N.withCredentials=!0:O.credentials==="omit"&&(N.withCredentials=!1),"responseType"in N&&l.blob&&(N.responseType="blob"),O.headers.forEach(function(ee,Y){N.setRequestHeader(Y,ee)}),O.signal&&(O.signal.addEventListener("abort",ue),N.onreadystatechange=function(){N.readyState===4&&O.signal.removeEventListener("abort",ue)}),N.send(typeof O._bodyInit>"u"?null:O._bodyInit)})}return ie.polyfill=!0,i.fetch||(i.fetch=ie,i.Headers=h,i.Request=w,i.Response=v),o.Headers=h,o.Request=w,o.Response=v,o.fetch=ie,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var s=r;e=s.fetch,e.default=s.fetch,e.fetch=s.fetch,e.Headers=s.Headers,e.Request=s.Request,e.Response=s.Response,t.exports=e})(Vr,Vr.exports);const Gr=Wa(Vr.exports);var Kr=globalThis&&globalThis.__assign||function(){return Kr=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Kr.apply(this,arguments)},Ro=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(u){try{a(r.next(u))}catch(f){o(f)}}function c(u){try{a(r.throw(u))}catch(f){o(f)}}function a(u){u.done?i(u.value):s(u.value).then(l,c)}a((r=r.apply(t,e||[])).next())})},To=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(a){return function(u){return c([a,u])}}function c(a){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=a[0]&2?s.return:a[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,a[1])).done)return i;switch(s=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,s=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){n.label=a[1];break}if(a[0]===6&&n.label<i[1]){n.label=i[1],i=a;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(a);break}i[2]&&n.ops.pop(),n.trys.pop();continue}a=e.call(t,n)}catch(u){a=[6,u],s=0}finally{r=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};globalThis&&globalThis.__values;var Va="application/ad+json";function tr(t,e,n){return Ro(this,void 0,void 0,function(){var r,s,i,o,l,c,a,u,f;return To(this,function(d){switch(d.label){case 0:r=new Et(t),d.label=1;case 1:return d.trys.push([1,7,,8]),Pt(t),s={},s.Accept=Va,i=e==null?void 0:e.getAgent(),i&&e?t.startsWith(window.location.origin)?(za()||Ao(e,i),[3,4]):[3,2]:[3,4];case 2:return[4,Da(t,i,s)];case 3:d.sent(),d.label=4;case 4:if(o=t,n!==void 0&&(l=new URL("".concat(n,"/path")),l.searchParams.set("path",t),o=l.href),Gr===void 0)throw new Ve("No window object available this lib currently requires the DOM for fetching");return[4,Gr(o,{headers:s})];case 5:return c=d.sent(),[4,c.text()];case 6:if(a=d.sent(),c.status===200)try{u=JSON.parse(a),r=ui(u,r,e)}catch(p){throw new Ve("Could not parse JSON from fetching ".concat(t,". Is it an Atomic Data resource? Error message: ").concat(p.message))}else throw c.status===401?new Ve(a,Ye.Unauthorized):c.status===500?new Ve(a,Ye.Server):c.status===404?new Ve(a,Ye.NotFound):new Ve(a);return[3,8];case 7:return f=d.sent(),r.setError(f),[3,8];case 8:return r.loading=!1,e&&e.addResource(r),[2,r]}})})}function Ui(t,e){return Ro(this,void 0,void 0,function(){var n,r,s,i,o;return To(this,function(l){switch(l.label){case 0:n=xo(Kr({},t)),r=new Headers,r.set("Content-Type","application/ad+json"),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,Gr(e,{headers:r,method:"POST",body:n})];case 2:return s=l.sent(),[3,4];case 3:throw i=l.sent(),new Ve("Posting Commit to ".concat(e," failed: ").concat(i));case 4:return[4,s.text()];case 5:if(o=l.sent(),s.status!==200)throw new Ve(o,Ye.Server);return[2,Uo(o)]}})})}function Pt(t){try{new URL(t)}catch(e){throw new Error("Not a valid URL: ".concat(t,". ").concat(e))}}function Ga(t){return t==null?void 0:t.split("?")[0]}const Ka={};const Ie=BigInt(0),le=BigInt(1),He=BigInt(2),Oo=BigInt(255),Pi=He**BigInt(252)+BigInt("27742317777372353535851937790883648493"),ve={a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),P:He**Oo-BigInt(19),l:Pi,n:Pi,h:BigInt(8),Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960")},Co=He**BigInt(256),bn=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");BigInt("6853475219497561581579357271197624642482790079785650197046958215289687604742");const Ja=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),Xa=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),Za=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),Ya=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952");class pe{constructor(e,n,r,s){this.x=e,this.y=n,this.z=r,this.t=s}static fromAffine(e){if(!(e instanceof Me))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return e.equals(Me.ZERO)?pe.ZERO:new pe(e.x,e.y,le,M(e.x*e.y))}static toAffineBatch(e){const n=ec(e.map(r=>r.z));return e.map((r,s)=>r.toAffine(n[s]))}static normalizeZ(e){return this.toAffineBatch(e).map(this.fromAffine)}equals(e){Di(e);const{x:n,y:r,z:s}=this,{x:i,y:o,z:l}=e,c=M(n*l),a=M(i*s),u=M(r*l),f=M(o*s);return c===a&&u===f}negate(){return new pe(M(-this.x),this.y,this.z,M(-this.t))}double(){const{x:e,y:n,z:r}=this,{a:s}=ve,i=M(e**He),o=M(n**He),l=M(He*M(r**He)),c=M(s*i),a=M(M((e+n)**He)-i-o),u=c+o,f=u-l,d=c-o,p=M(a*f),h=M(u*d),m=M(a*d),E=M(f*u);return new pe(p,h,E,m)}add(e){Di(e);const{x:n,y:r,z:s,t:i}=this,{x:o,y:l,z:c,t:a}=e,u=M((r-n)*(l+o)),f=M((r+n)*(l-o)),d=M(f-u);if(d===Ie)return this.double();const p=M(s*He*a),h=M(i*He*c),m=h+p,E=f+u,S=h-p,F=M(m*d),k=M(E*S),D=M(m*S),B=M(d*E);return new pe(F,k,B,D)}subtract(e){return this.add(e.negate())}precomputeWindow(e){const n=1+256/e,r=[];let s=this,i=s;for(let o=0;o<n;o++){i=s,r.push(i);for(let l=1;l<2**(e-1);l++)i=i.add(s),r.push(i);s=i.double()}return r}wNAF(e,n){!n&&this.equals(pe.BASE)&&(n=Me.BASE);const r=n&&n._WINDOW_SIZE||1;if(256%r)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let s=n&&Jr.get(n);s||(s=this.precomputeWindow(r),n&&r!==1&&(s=pe.normalizeZ(s),Jr.set(n,s)));let i=pe.ZERO,o=pe.ZERO;const l=1+256/r,c=2**(r-1),a=BigInt(2**r-1),u=2**r,f=BigInt(r);for(let d=0;d<l;d++){const p=d*c;let h=Number(e&a);if(e>>=f,h>c&&(h-=u,e+=le),h===0){let m=s[p];d%2&&(m=m.negate()),o=o.add(m)}else{let m=s[p+Math.abs(h)-1];h<0&&(m=m.negate()),i=i.add(m)}}return pe.normalizeZ([i,o])[0]}multiply(e,n){return this.wNAF(nr(e,ve.l),n)}multiplyUnsafe(e){let n=nr(e,ve.l,!1);const r=pe.BASE,s=pe.ZERO;if(n===Ie)return s;if(this.equals(s)||n===le)return this;if(this.equals(r))return this.wNAF(n);let i=s,o=this;for(;n>Ie;)n&le&&(i=i.add(o)),o=o.double(),n>>=le;return i}isSmallOrder(){return this.multiplyUnsafe(ve.h).equals(pe.ZERO)}isTorsionFree(){return this.multiplyUnsafe(ve.l).equals(pe.ZERO)}toAffine(e=pr(this.z)){const{x:n,y:r,z:s}=this,i=M(n*e),o=M(r*e);if(M(s*e)!==le)throw new Error("invZ was invalid");return new Me(i,o)}fromRistrettoBytes(){xr()}toRistrettoBytes(){xr()}fromRistrettoHash(){xr()}}pe.BASE=new pe(ve.Gx,ve.Gy,le,M(ve.Gx*ve.Gy));pe.ZERO=new pe(Ie,le,le,Ie);function Di(t){if(!(t instanceof pe))throw new TypeError("ExtendedPoint expected")}function Ir(t){if(!(t instanceof We))throw new TypeError("RistrettoPoint expected")}function xr(){throw new Error("Legacy method: switch to RistrettoPoint")}class We{constructor(e){this.ep=e}static calcElligatorRistrettoMap(e){const{d:n}=ve,r=M(bn*e*e),s=M((r+le)*Za);let i=BigInt(-1);const o=M((i-n*r)*M(r+n));let{isValid:l,value:c}=si(s,o),a=M(c*e);wt(a)||(a=M(-a)),l||(c=a),l||(i=r);const u=M(i*(r-le)*Ya-o),f=c*c,d=M((c+c)*o),p=M(u*Ja),h=M(le-f),m=M(le+f);return new pe(M(d*m),M(h*p),M(p*m),M(d*h))}static hashToCurve(e){e=Dt(e,64);const n=Lr(e.slice(0,32)),r=this.calcElligatorRistrettoMap(n),s=Lr(e.slice(32,64)),i=this.calcElligatorRistrettoMap(s);return new We(r.add(i))}static fromHex(e){e=Dt(e,32);const{a:n,d:r}=ve,s="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",i=Lr(e);if(!nc(kn(i),e)||wt(i))throw new Error(s);const o=M(i*i),l=M(le+n*o),c=M(le-n*o),a=M(l*l),u=M(c*c),f=M(n*r*a-u),{isValid:d,value:p}=Hi(M(f*u)),h=M(p*c),m=M(p*h*f);let E=M((i+i)*h);wt(E)&&(E=M(-E));const S=M(l*m),F=M(E*S);if(!d||wt(F)||S===Ie)throw new Error(s);return new We(new pe(E,S,le,F))}toRawBytes(){let{x:e,y:n,z:r,t:s}=this.ep;const i=M(M(r+n)*M(r-n)),o=M(e*n),{value:l}=Hi(M(i*o**He)),c=M(l*i),a=M(l*o),u=M(c*a*s);let f;if(wt(s*u)){let p=M(n*bn),h=M(e*bn);e=p,n=h,f=M(c*Xa)}else f=a;wt(e*u)&&(n=M(-n));let d=M((r-n)*f);return wt(d)&&(d=M(-d)),kn(d)}toHex(){return jn(this.toRawBytes())}toString(){return this.toHex()}equals(e){Ir(e);const n=this.ep,r=e.ep,s=M(n.x*r.y)===M(n.y*r.x),i=M(n.y*r.y)===M(n.x*r.x);return s||i}add(e){return Ir(e),new We(this.ep.add(e.ep))}subtract(e){return Ir(e),new We(this.ep.subtract(e.ep))}multiply(e){return new We(this.ep.multiply(e))}multiplyUnsafe(e){return new We(this.ep.multiplyUnsafe(e))}}We.BASE=new We(pe.BASE);We.ZERO=new We(pe.ZERO);const Jr=new WeakMap;class Me{constructor(e,n){this.x=e,this.y=n}_setWindowSize(e){this._WINDOW_SIZE=e,Jr.delete(this)}static fromHex(e,n=!0){const{d:r,P:s}=ve;e=Dt(e,32);const i=e.slice();i[31]=e[31]&-129;const o=on(i);if(n&&o>=s)throw new Error("Expected 0 < hex < P");if(!n&&o>=Co)throw new Error("Expected 0 < hex < 2**256");const l=M(o*o),c=M(l-le),a=M(r*l+le);let{isValid:u,value:f}=si(c,a);if(!u)throw new Error("Point.fromHex: invalid y coordinate");const d=(f&le)===le;return(e[31]&128)!==0!==d&&(f=M(-f)),new Me(f,o)}static async fromPrivateKey(e){return(await gr(e)).point}toRawBytes(){const e=kn(this.y);return e[31]|=this.x&le?128:0,e}toHex(){return jn(this.toRawBytes())}toX25519(){const{y:e}=this,n=M((le+e)*pr(le-e));return kn(n)}isTorsionFree(){return pe.fromAffine(this).isTorsionFree()}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new Me(M(-this.x),this.y)}add(e){return pe.fromAffine(this).add(pe.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return pe.fromAffine(this).multiply(e,this).toAffine()}}Me.BASE=new Me(ve.Gx,ve.Gy);Me.ZERO=new Me(Ie,le);class ii{constructor(e,n){this.r=e,this.s=n,this.assertValidity()}static fromHex(e){const n=Dt(e,64),r=Me.fromHex(n.slice(0,32),!1),s=on(n.slice(32,64));return new ii(r,s)}assertValidity(){const{r:e,s:n}=this;if(!(e instanceof Me))throw new Error("Expected Point instance");return nr(n,ve.l,!1),this}toRawBytes(){const e=new Uint8Array(64);return e.set(this.r.toRawBytes()),e.set(kn(this.s),32),e}toHex(){return jn(this.toRawBytes())}}function Qa(...t){if(!t.every(r=>r instanceof Uint8Array))throw new Error("Expected Uint8Array list");if(t.length===1)return t[0];const e=t.reduce((r,s)=>r+s.length,0),n=new Uint8Array(e);for(let r=0,s=0;r<t.length;r++){const i=t[r];n.set(i,s),s+=i.length}return n}const $a=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function jn(t){if(!(t instanceof Uint8Array))throw new Error("Uint8Array expected");let e="";for(let n=0;n<t.length;n++)e+=$a[t[n]];return e}function Bo(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const e=new Uint8Array(t.length/2);for(let n=0;n<e.length;n++){const r=n*2,s=t.slice(r,r+2),i=Number.parseInt(s,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");e[n]=i}return e}function jo(t){const n=t.toString(16).padStart(64,"0");return Bo(n)}function kn(t){return jo(t).reverse()}function wt(t){return(M(t)&le)===le}function on(t){if(!(t instanceof Uint8Array))throw new Error("Expected Uint8Array");return BigInt("0x"+jn(Uint8Array.from(t).reverse()))}function Lr(t){return M(on(t)&He**Oo-le)}function M(t,e=ve.P){const n=t%e;return n>=Ie?n:e+n}function pr(t,e=ve.P){if(t===Ie||e<=Ie)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let n=M(t,e),r=e,s=Ie,i=le;for(;n!==Ie;){const l=r/n,c=r%n,a=s-i*l;r=n,n=c,s=i,i=a}if(r!==le)throw new Error("invert: does not exist");return M(s,e)}function ec(t,e=ve.P){const n=new Array(t.length),r=t.reduce((i,o,l)=>o===Ie?i:(n[l]=i,M(i*o,e)),le),s=pr(r,e);return t.reduceRight((i,o,l)=>o===Ie?i:(n[l]=M(i*n[l],e),M(i*o,e)),s),n}function Qe(t,e){const{P:n}=ve;let r=t;for(;e-- >Ie;)r*=r,r%=n;return r}function tc(t){const{P:e}=ve,n=BigInt(5),r=BigInt(10),s=BigInt(20),i=BigInt(40),o=BigInt(80),c=t*t%e*t%e,a=Qe(c,He)*c%e,u=Qe(a,le)*t%e,f=Qe(u,n)*u%e,d=Qe(f,r)*f%e,p=Qe(d,s)*d%e,h=Qe(p,i)*p%e,m=Qe(h,o)*h%e,E=Qe(m,o)*h%e,S=Qe(E,r)*f%e;return{pow_p_5_8:Qe(S,He)*t%e,b2:c}}function si(t,e){const n=M(e*e*e),r=M(n*n*e),s=tc(t*r).pow_p_5_8;let i=M(t*n*s);const o=M(e*i*i),l=i,c=M(i*bn),a=o===t,u=o===M(-t),f=o===M(-t*bn);return a&&(i=l),(u||f)&&(i=c),wt(i)&&(i=M(-i)),{isValid:a||u,value:i}}function Hi(t){return si(le,t)}async function Fi(...t){const e=await mr.sha512(Qa(...t)),n=on(e);return M(n,ve.l)}function nc(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Dt(t,e){const n=t instanceof Uint8Array?Uint8Array.from(t):Bo(t);if(typeof e=="number"&&n.length!==e)throw new Error(`Expected ${e} bytes`);return n}function nr(t,e,n=!0){if(!e)throw new TypeError("Specify max value");if(typeof t=="number"&&Number.isSafeInteger(t)&&(t=BigInt(t)),typeof t=="bigint"&&t<e){if(n){if(Ie<t)return t}else if(Ie<=t)return t}throw new TypeError("Expected valid scalar: 0 < scalar < max")}function rc(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}async function gr(t){if(t=typeof t=="bigint"||typeof t=="number"?jo(nr(t,Co)):Dt(t),t.length!==32)throw new Error("Expected 32 bytes");const e=await mr.sha512(t),n=rc(e.slice(0,32)),r=e.slice(32,64),s=M(on(n),ve.l),i=Me.BASE.multiply(s),o=i.toRawBytes();return{head:n,prefix:r,scalar:s,point:i,pointBytes:o}}async function ic(t){return(await gr(t)).pointBytes}async function sc(t,e){t=Dt(t);const{prefix:n,scalar:r,pointBytes:s}=await gr(e),i=await Fi(n,t),o=Me.BASE.multiply(i),l=await Fi(o.toRawBytes(),s,t),c=M(i+l*r,ve.l);return new ii(o,c).toRawBytes()}Me.BASE._setWindowSize(8);const mt={node:Ka,web:typeof self=="object"&&"crypto"in self?self.crypto:void 0},mr={TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],bytesToHex:jn,getExtendedPublicKey:gr,mod:M,invert:pr,hashToPrivateScalar:t=>{if(t=Dt(t),t.length<40||t.length>1024)throw new Error("Expected 40-1024 bytes of private key as per FIPS 186");const e=M(on(t),ve.l);if(e===Ie||e===le)throw new Error("Invalid private key");return e},randomBytes:(t=32)=>{if(mt.web)return mt.web.getRandomValues(new Uint8Array(t));if(mt.node){const{randomBytes:e}=mt.node;return new Uint8Array(e(t).buffer)}else throw new Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>mr.randomBytes(32),sha512:async t=>{if(mt.web){const e=await mt.web.subtle.digest("SHA-512",t.buffer);return new Uint8Array(e)}else{if(mt.node)return Uint8Array.from(mt.node.createHash("sha512").update(t).digest());throw new Error("The environment doesn't have sha512 function")}},precompute(t=8,e=Me.BASE){const n=e.equals(Me.BASE)?e:new Me(e.x,e.y);return n._setWindowSize(t),n.multiply(He),n}};var oc=function(t,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var n=typeof e.cycles=="boolean"?e.cycles:!1,r=e.cmp&&function(i){return function(o){return function(l,c){var a={key:l,value:o[l]},u={key:c,value:o[c]};return i(a,u)}}}(e.cmp),s=[];return function i(o){if(o&&o.toJSON&&typeof o.toJSON=="function"&&(o=o.toJSON()),o!==void 0){if(typeof o=="number")return isFinite(o)?""+o:"null";if(typeof o!="object")return JSON.stringify(o);var l,c;if(Array.isArray(o)){for(c="[",l=0;l<o.length;l++)l&&(c+=","),c+=i(o[l])||"null";return c+"]"}if(o===null)return"null";if(s.indexOf(o)!==-1){if(n)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var a=s.push(o)-1,u=Object.keys(o).sort(r&&r(o));for(c="",l=0;l<u.length;l++){var f=u[l],d=i(o[f]);!d||(c&&(c+=","),c+=JSON.stringify(f)+":"+d)}return s.splice(a,1),"{"+c+"}"}}(t)},Xt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",pn=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Hn=0;Hn<Xt.length;Hn++)pn[Xt.charCodeAt(Hn)]=Hn;var Mo=function(t){var e=new Uint8Array(t),n,r=e.length,s="";for(n=0;n<r;n+=3)s+=Xt[e[n]>>2],s+=Xt[(e[n]&3)<<4|e[n+1]>>4],s+=Xt[(e[n+1]&15)<<2|e[n+2]>>6],s+=Xt[e[n+2]&63];return r%3===2?s=s.substring(0,s.length-1)+"=":r%3===1&&(s=s.substring(0,s.length-2)+"=="),s},No=function(t){var e=t.length*.75,n=t.length,r,s=0,i,o,l,c;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);var a=new ArrayBuffer(e),u=new Uint8Array(a);for(r=0;r<n;r+=4)i=pn[t.charCodeAt(r)],o=pn[t.charCodeAt(r+1)],l=pn[t.charCodeAt(r+2)],c=pn[t.charCodeAt(r+3)],u[s++]=i<<2|o>>4,u[s++]=(o&15)<<4|l>>2,u[s++]=(l&3)<<6|c&63;return a};const Ur=t=>new DataView(t.buffer,t.byteOffset,t.byteLength),lc=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!lc)throw new Error("Non little-endian hardware is not supported");Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));(()=>{const t=typeof gn<"u"&&typeof gn.require=="function"&&gn.require.bind(gn);try{if(t){const{setImmediate:e}=t("timers");return()=>new Promise(n=>e(n))}}catch{}return()=>new Promise(e=>setTimeout(e,0))})();function ac(t){if(typeof t!="string")throw new TypeError(`utf8ToBytes expected string, got ${typeof t}`);return new TextEncoder().encode(t)}function Io(t){if(typeof t=="string"&&(t=ac(t)),!(t instanceof Uint8Array))throw new TypeError(`Expected input type is Uint8Array (got ${typeof t})`);return t}class cc{clone(){return this._cloneInto()}}function oi(t){const e=r=>t().update(Io(r)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e.init=e.create,e}function uc(t,e,n,r){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),l=Number(n&i),c=r?4:0,a=r?0:4;t.setUint32(e+c,o,r),t.setUint32(e+a,l,r)}class fc extends cc{constructor(e,n,r,s){super(),this.blockLen=e,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Ur(this.buffer)}update(e){if(this.destroyed)throw new Error("instance is destroyed");const{view:n,buffer:r,blockLen:s,finished:i}=this;if(i)throw new Error("digest() was already called");e=Io(e);const o=e.length;for(let l=0;l<o;){const c=Math.min(s-this.pos,o-l);if(c===s){const a=Ur(e);for(;s<=o-l;l+=s)this.process(a,l);continue}r.set(e.subarray(l,l+c),this.pos),this.pos+=c,l+=c,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){if(this.destroyed)throw new Error("instance is destroyed");if(!(e instanceof Uint8Array)||e.length<this.outputLen)throw new Error("_Sha2: Invalid output buffer");if(this.finished)throw new Error("digest() was already called");this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:o}=this;n[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>s-o&&(this.process(r,0),o=0);for(let c=o;c<s;c++)n[c]=0;uc(r,s-8,BigInt(this.length*8),i),this.process(r,0);const l=Ur(e);this.get().forEach((c,a)=>l.setUint32(4*a,c,i))}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:o,pos:l}=this;return e.length=s,e.pos=l,e.finished=i,e.destroyed=o,s%n&&e.buffer.set(r),e}}const Fn=BigInt(2**32-1),zi=BigInt(32);function dc(t,e=!1){return e?{h:Number(t&Fn),l:Number(t>>zi&Fn)}:{h:Number(t>>zi&Fn)|0,l:Number(t&Fn)|0}}function hc(t,e=!1){let n=new Uint32Array(t.length),r=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:o}=dc(t[s],e);[n[s],r[s]]=[i,o]}return[n,r]}const qi=(t,e,n)=>t>>>n,Wi=(t,e,n)=>t<<32-n|e>>>n,Wt=(t,e,n)=>t>>>n|e<<32-n,Vt=(t,e,n)=>t<<32-n|e>>>n,zn=(t,e,n)=>t<<64-n|e>>>n-32,qn=(t,e,n)=>t>>>n-32|e<<64-n;function ot(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const pc=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),gc=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,mc=(t,e,n,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0),bc=(t,e,n,r,s)=>e+n+r+s+(t/2**32|0)|0,_c=(t,e,n,r,s)=>(t>>>0)+(e>>>0)+(n>>>0)+(r>>>0)+(s>>>0),yc=(t,e,n,r,s,i)=>e+n+r+s+i+(t/2**32|0)|0,[vc,wc]=hc(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),bt=new Uint32Array(80),_t=new Uint32Array(80);class li extends fc{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:n,Bh:r,Bl:s,Ch:i,Cl:o,Dh:l,Dl:c,Eh:a,El:u,Fh:f,Fl:d,Gh:p,Gl:h,Hh:m,Hl:E}=this;return[e,n,r,s,i,o,l,c,a,u,f,d,p,h,m,E]}set(e,n,r,s,i,o,l,c,a,u,f,d,p,h,m,E){this.Ah=e|0,this.Al=n|0,this.Bh=r|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=l|0,this.Dl=c|0,this.Eh=a|0,this.El=u|0,this.Fh=f|0,this.Fl=d|0,this.Gh=p|0,this.Gl=h|0,this.Hh=m|0,this.Hl=E|0}process(e,n){for(let k=0;k<16;k++,n+=4)bt[k]=e.getUint32(n),_t[k]=e.getUint32(n+=4);for(let k=16;k<80;k++){const D=bt[k-15]|0,B=_t[k-15]|0,z=Wt(D,B,1)^Wt(D,B,8)^qi(D,B,7),R=Vt(D,B,1)^Vt(D,B,8)^Wi(D,B,7),w=bt[k-2]|0,q=_t[k-2]|0,K=Wt(w,q,19)^zn(w,q,61)^qi(w,q,6),v=Vt(w,q,19)^qn(w,q,61)^Wi(w,q,6),Q=mc(R,v,_t[k-7],_t[k-16]),ie=bc(Q,z,K,bt[k-7],bt[k-16]);bt[k]=ie|0,_t[k]=Q|0}let{Ah:r,Al:s,Bh:i,Bl:o,Ch:l,Cl:c,Dh:a,Dl:u,Eh:f,El:d,Fh:p,Fl:h,Gh:m,Gl:E,Hh:S,Hl:F}=this;for(let k=0;k<80;k++){const D=Wt(f,d,14)^Wt(f,d,18)^zn(f,d,41),B=Vt(f,d,14)^Vt(f,d,18)^qn(f,d,41),z=f&p^~f&m,R=d&h^~d&E,w=_c(F,B,R,wc[k],_t[k]),q=yc(w,S,D,z,vc[k],bt[k]),K=w|0,v=Wt(r,s,28)^zn(r,s,34)^zn(r,s,39),Q=Vt(r,s,28)^qn(r,s,34)^qn(r,s,39),ie=r&i^r&l^i&l,b=s&o^s&c^o&c;S=m|0,F=E|0,m=p|0,E=h|0,p=f|0,h=d|0,{h:f,l:d}=ot(a|0,u|0,q|0,K|0),a=l|0,u=c|0,l=i|0,c=o|0,i=r|0,o=s|0;const T=pc(K,Q,b);r=gc(T,q,v,ie),s=T|0}({h:r,l:s}=ot(this.Ah|0,this.Al|0,r|0,s|0)),{h:i,l:o}=ot(this.Bh|0,this.Bl|0,i|0,o|0),{h:l,l:c}=ot(this.Ch|0,this.Cl|0,l|0,c|0),{h:a,l:u}=ot(this.Dh|0,this.Dl|0,a|0,u|0),{h:f,l:d}=ot(this.Eh|0,this.El|0,f|0,d|0),{h:p,l:h}=ot(this.Fh|0,this.Fl|0,p|0,h|0),{h:m,l:E}=ot(this.Gh|0,this.Gl|0,m|0,E|0),{h:S,l:F}=ot(this.Hh|0,this.Hl|0,S|0,F|0),this.set(r,s,i,o,l,c,a,u,f,d,p,h,m,E,S,F)}roundClean(){bt.fill(0),_t.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class Sc extends li{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class Ec extends li{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}const kc=oi(()=>new li);oi(()=>new Sc);oi(()=>new Ec);var Nt=globalThis&&globalThis.__assign||function(){return Nt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},Nt.apply(this,arguments)},rr=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(u){try{a(r.next(u))}catch(f){o(f)}}function c(u){try{a(r.throw(u))}catch(f){o(f)}}function a(u){u.done?i(u.value):s(u.value).then(l,c)}a((r=r.apply(t,e||[])).next())})},ir=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(a){return function(u){return c([a,u])}}function c(a){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=a[0]&2?s.return:a[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,a[1])).done)return i;switch(s=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,s=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){n.label=a[1];break}if(a[0]===6&&n.label<i[1]){n.label=i[1],i=a;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(a);break}i[2]&&n.ops.pop(),n.trys.pop();continue}a=e.call(t,n)}catch(u){a=[6,u],s=0}finally{r=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Ac=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Rc=globalThis&&globalThis.__read||function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(l){o={error:l}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i};mr.sha512=function(t){return Promise.resolve(kc(t))};function ai(){return Math.round(new Date().getTime())}var Pr=function(){function t(e,n){n===void 0&&(n={});var r,s,i;this._subject=Ga(e),this._set=(r=n.set)!==null&&r!==void 0?r:new Map,this._push=(s=n.push)!==null&&s!==void 0?s:new Map,this._remove=(i=n.remove)!==null&&i!==void 0?i:new Set,this._destroy=n.destroy,this._previousCommit=n.previousCommit}return Object.defineProperty(t.prototype,"subject",{get:function(){return this._subject},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"set",{get:function(){return this._set},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"push",{get:function(){return this._push},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"remove",{get:function(){return this._remove},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"destroy",{get:function(){return this._destroy},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"previousCommit",{get:function(){return this._previousCommit},enumerable:!1,configurable:!0}),t.prototype.addSetAction=function(e,n){return this.removeRemoveAction(e),this._set.set(e,n),this},t.prototype.addPushAction=function(e){for(var n,r,s,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];var l=(s=this._push.get(e))!==null&&s!==void 0?s:new Set;try{for(var c=Ac(i),a=c.next();!a.done;a=c.next()){var u=a.value;l.add(u)}}catch(f){n={error:f}}finally{try{a&&!a.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return this._push.set(e,l),this},t.prototype.addRemoveAction=function(e){return this._set.delete(e),this._push.delete(e),this._remove.add(e),this},t.prototype.removeRemoveAction=function(e){return this._remove.delete(e),this},t.prototype.setDestroy=function(e){return this._destroy=e,this},t.prototype.setPreviousCommit=function(e){return this._previousCommit=e,this},t.prototype.setSubject=function(e){return this._subject=e,this},t.prototype.sign=function(e,n){return rr(this,void 0,void 0,function(){var r;return ir(this,function(s){switch(s.label){case 0:return[4,this.signAt(n,e,ai())];case 1:return r=s.sent(),[2,r]}})})},t.prototype.hasUnsavedChanges=function(){return this.set.size>0||this.push.size>0||this.destroy||this.remove.size>0},t.prototype.clone=function(){var e={set:this.set,push:this.push,remove:this.remove,destroy:this.destroy,previousCommit:this.previousCommit};return new t(this.subject,structuredClone(e))},t.prototype.toPlainObject=function(){return{subject:this.subject,set:Object.fromEntries(this.set.entries()),push:Object.fromEntries(Array.from(this.push.entries()).map(function(e){var n=Rc(e,2),r=n[0],s=n[1];return[r,Array.from(s)]})),remove:Array.from(this.remove),destroy:this.destroy,previousCommit:this.previousCommit}},t.prototype.signAt=function(e,n,r){return rr(this,void 0,void 0,function(){var s,i,o,l;return ir(this,function(c){switch(c.label){case 0:if(e===void 0)throw new Error("No agent passed to sign commit");return s=Nt(Nt({},this.clone().toPlainObject()),{createdAt:r,signer:e}),i=xo(Nt({},s)),[4,Lo(i,n)];case 1:return o=c.sent(),l=Nt(Nt({},s),{signature:o}),[2,l]}})})},t}();function lt(t,e,n){e in t&&e!==n&&(Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(t,e)),delete t[e])}function xo(t){return t.remove&&Object.keys(t.remove).length===0&&delete t.remove,t.set&&Object.keys(t.set).length===0&&delete t.set,t.push&&Object.keys(t.push).length===0&&delete t.push,t.destroy===!1&&delete t.destroy,lt(t,"createdAt",P.properties.commit.createdAt),lt(t,"subject",P.properties.commit.subject),lt(t,"set",P.properties.commit.set),lt(t,"push",P.properties.commit.push),lt(t,"signer",P.properties.commit.signer),lt(t,"signature",P.properties.commit.signature),lt(t,"remove",P.properties.commit.remove),lt(t,"destroy",P.properties.commit.destroy),lt(t,"previousCommit",P.properties.commit.previousCommit),t[P.properties.isA]=[P.classes.commit],oc(t)}var Lo=function(t,e){return rr(void 0,void 0,void 0,function(){var n,r,s,i,o,l;return ir(this,function(c){switch(c.label){case 0:return n=No(e),r=new Uint8Array(n),s=new TextEncoder,i=s.encode(t),[4,sc(i,r)];case 1:return o=c.sent(),l=Mo(o),[2,l]}})})},Tc=function(t){return rr(void 0,void 0,void 0,function(){var e,n,r,s;return ir(this,function(i){switch(i.label){case 0:return e=No(t),n=new Uint8Array(e),[4,ic(n)];case 1:return r=i.sent(),s=Mo(r),[2,s]}})})};function Uo(t){try{var e=JSON.parse(t),n=e[P.properties.commit.subject],r=e[P.properties.commit.set],s=e[P.properties.commit.push],i=e[P.properties.commit.signer],o=e[P.properties.commit.createdAt],l=e[P.properties.commit.remove],c=e[P.properties.commit.destroy],a=e[P.properties.commit.signature],u=e["@id"],f=e[P.properties.commit.previousCommit];return{subject:n,set:r,push:s,signer:i,createdAt:o,remove:l,destroy:c,signature:a,id:u,previousCommit:f}}catch(d){throw new Error("Could not parse commit: ".concat(d))}}function Oc(t,e){var n=Uo(t),r=n.subject,s=n.set,i=n.remove,o=n.id,l=n.destroy,c=n.signature,a=n.push,u=e.resources.get(r);if(!u)u=new Et(r);else if(u.appliedCommitSignatures.has(c))return;if(s&&Object.keys(s).forEach(function(f){var d=s[f];(d==null?void 0:d.constructor)==={}.constructor&&(d=_n(d,u,f,e)),ci(d)&&(d=d.map(function(p){return _n(p,u,f,e)})),u.setUnsafe(f,d)}),i&&i.forEach(function(f){u.removePropValLocally(f)}),a&&Object.keys(a).forEach(function(f){var d=u.get(f)||[],p=a[f],h=p.map(function(E){return _n(E,u,f,e)}),m=d.concat(h);u.setUnsafe(f,m)}),o&&u.setUnsafe(De.commit.lastCommit,o),l){e.removeResource(r);return}else u.appliedCommitSignatures.add(c),e.addResource(u)}var Cc=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ye;(function(t){t.Unauthorized="Unauthorized",t.NotFound="NotFound",t.Server="Server",t.Client="Client"})(Ye||(Ye={}));function Bc(t){if(t instanceof Ve){if(t.type===Ye.Unauthorized)return!0;if(t.message.includes("Unauthorized"))return!0}return!1}var Ve=function(t){Cc(e,t);function e(n,r){r===void 0&&(r=Ye.Client);var s=t.call(this,n)||this;Object.setPrototypeOf(s,e.prototype),s.type=r,s.message=n;try{var i=JSON.parse(n),o=i[De.description];o&&(s.message=o)}catch{}return s.message||(s.message=s.createMessage()),s}return e.fromResource=function(n){var r=new e(n.get(De.description).toString());return r},e.prototype.createMessage=function(){switch(this.type){case Ye.Unauthorized:return"You don't have the rights to do this.";case Ye.NotFound:return"404 Not found.";case Ye.Server:return"500 Unknown server error.";default:return"Unknown error."}},e}(Error),ge;(function(t){t.ATOMIC_URL="https://atomicdata.dev/datatypes/atomicURL",t.BOOLEAN="https://atomicdata.dev/datatypes/boolean",t.DATE="https://atomicdata.dev/datatypes/date",t.FLOAT="https://atomicdata.dev/datatypes/float",t.INTEGER="https://atomicdata.dev/datatypes/integer",t.MARKDOWN="https://atomicdata.dev/datatypes/markdown",t.RESOURCEARRAY="https://atomicdata.dev/datatypes/resourceArray",t.SLUG="https://atomicdata.dev/datatypes/slug",t.STRING="https://atomicdata.dev/datatypes/string",t.TIMESTAMP="https://atomicdata.dev/datatypes/timestamp",t.UNKNOWN="unknown-datatype"})(ge||(ge={}));var jc=function(t){switch(t){case P.datatypes.atomicUrl:return ge.ATOMIC_URL;case P.datatypes.boolean:return ge.BOOLEAN;case P.datatypes.date:return ge.DATE;case P.datatypes.float:return ge.FLOAT;case P.datatypes.integer:return ge.INTEGER;case P.datatypes.markdown:return ge.MARKDOWN;case P.datatypes.resourceArray:return ge.RESOURCEARRAY;case P.datatypes.slug:return ge.SLUG;case P.datatypes.string:return ge.STRING;case P.datatypes.timestamp:return ge.TIMESTAMP;default:return ge.UNKNOWN}},Mc=/^[a-z0-9]+(?:-[a-z0-9]+)*$/,Nc=/^\d{4}-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])$/,Ic=function(t,e){var n=null;if(t===void 0)throw new Error("Value is undefined, expected ".concat(e));switch(e){case ge.STRING:{if(!Wn(t)){n="Not a string";break}break}case ge.SLUG:{if(!Wn(t)){n="Not a slug, not even a string";break}t.match(Mc)===null&&(n="Not a valid slug. Only lowercase letters and numbers with dashes `-` between them");break}case ge.ATOMIC_URL:{if(!Wn(t)){n="Not a string. Should be a URL";break}Pt(t);break}case ge.RESOURCEARRAY:{if(!ci(t)){n="Not an array";break}t.map(function(r,s){try{Pt(r)}catch{var i=new Error("Invalid URL");throw i.index=s,i}});break}case ge.INTEGER:{if(!xc(t)){n="Not a number";break}t%1!==0&&(n="Not an integer");break}case ge.DATE:{if(!Wn(t)){n="Not a string";break}t.match(Nc)===null&&(n="Not a date string: YYYY-MM-DD");break}}if(n!==null)throw new Error(n)};function ci(t){return Object.prototype.toString.call(t)==="[object Array]"}function Wn(t){return typeof t=="string"}function xc(t){return typeof t=="number"}globalThis&&globalThis.__values;function ui(t,e,n){try{var r=function(i){if(i==="@id"){var o=t["@id"];if(typeof o!="string")throw new Error("'@id' field must be a string");if(e.getSubject()!=="undefined"&&e.getSubject()!==It&&o!==e.getSubject())throw new Error("Resource has wrong subject in @id. Received subject was ".concat(o,", expected ").concat(e.getSubject(),"."));return e.setSubject(o),"continue"}var l=t[i];try{if(ci(l)){var c=l.map(function(f){return _n(f,e,i,n)});e.setUnsafe(i,c)}else if(typeof l=="string")e.setUnsafe(i,l);else if(typeof l=="number")e.setUnsafe(i,l);else if(typeof l=="boolean")e.setUnsafe(i,l);else{var o=_n(l,e,i,n);e.setUnsafe(i,o)}}catch(f){var a="Failed creating value ".concat(l," for key ").concat(i," in resource ").concat(e.getSubject()),u="".concat(a,". ").concat(f.message);throw new Error(u)}};for(var s in t)r(s);e.loading=!1,e.getClasses().includes(P.classes.error)&&(e.error=Ve.fromResource(e)),n&&n.addResource(e)}catch(i){throw i.message="Failed parsing JSON "+i.message,e.setError(i),e.loading=!1,n&&n.addResource(e),i}return e}function _n(t,e,n,r){if(typeof t=="string")return t;if((t==null?void 0:t.constructor)==={}.constructor)if(Object.keys(t).includes("@id")){var s=t["@id"],i=new Et(s);return ui(t,i,r),s}else return t;throw new Error("Value ".concat(t," in ").concat(n," not a string or a nested Resource"))}var fn=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(u){try{a(r.next(u))}catch(f){o(f)}}function c(u){try{a(r.throw(u))}catch(f){o(f)}}function a(u){u.done?i(u.value):s(u.value).then(l,c)}a((r=r.apply(t,e||[])).next())})},dn=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(a){return function(u){return c([a,u])}}function c(a){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=a[0]&2?s.return:a[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,a[1])).done)return i;switch(s=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,s=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){n.label=a[1];break}if(a[0]===6&&n.label<i[1]){n.label=i[1],i=a;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(a);break}i[2]&&n.ops.pop(),n.trys.pop();continue}a=e.call(t,n)}catch(u){a=[6,u],s=0}finally{r=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Dr=globalThis&&globalThis.__read||function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(l){o={error:l}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},Hr=globalThis&&globalThis.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},It="unknown-subject",Et=function(){function t(e,n){if(typeof e!="string")throw new Error("Invalid subject given to resource, must be a string, found "+e);this.new=!!n,this.loading=!1,this.subject=e,this.propvals=new Map,this.appliedCommitSignatures=new Set,this.commitBuilder=new Pr(e)}return t.prototype.canWrite=function(e,n,r){return fn(this,void 0,void 0,function(){var s,i,o;return dn(this,function(l){switch(l.label){case 0:return s=this.get(De.write),n?s&&Fr(s).includes(n)?[2,[!0,void 0]]:s&&Fr(s).includes(zo.publicAgent)?[2,[!0,void 0]]:(i=this.get(De.parent),i?i===n?[2,[!0,void 0]]:r===i?(console.warn("Circular parent",r),[2,[!0,"Circular parent in ".concat(this.getSubject())]]):[4,e.getResourceAsync(i)]:[2,[!1,"No write right or parent in ".concat(this.getSubject())]]):[2,[!1,"No agent given"]];case 1:return o=l.sent(),[4,o.canWrite(e,n,this.getSubject())];case 2:return[2,l.sent()]}})})},t.prototype.clone=function(){var e=new t(this.subject);return e.propvals=this.propvals,e.destroy=this.destroy,e.loading=this.loading,e.new=this.new,e.error=this.error,e.commitError=this.commitError,e.commitBuilder=this.commitBuilder.clone(),e.appliedCommitSignatures=this.appliedCommitSignatures,e},t.prototype.isReady=function(){return!this.loading&&this.error===void 0},t.prototype.get=function(e){return this.propvals.get(e)},t.prototype.getSubjects=function(e){return this.getArray(e).map(function(n){return typeof n=="string"?n:n["@id"]})},t.prototype.getArray=function(e){var n,r=(n=this.propvals.get(e))!==null&&n!==void 0?n:[];return Fr(r)},t.prototype.getClasses=function(){return this.getSubjects(De.isA)},t.prototype.getCommitBuilder=function(){return this.commitBuilder},t.prototype.getSubject=function(){return this.subject},t.prototype.getSubjectNoParams=function(){var e=new URL(this.subject);return e.origin+e.pathname},t.prototype.getPropVals=function(){return this.propvals},t.prototype.getRights=function(e){return fn(this,void 0,void 0,function(){var n,r,s,i,o,l,c=this;return dn(this,function(a){switch(a.label){case 0:return n=[],r=this.getSubjects(De.write),r.forEach(function(u){n.push({for:u,type:sr.WRITE,setIn:c.subject})}),s=this.getSubjects(De.read),s.forEach(function(u){n.push({for:u,type:sr.READ,setIn:c.subject})}),i=this.get(De.parent),i?i===this.getSubject()?(console.warn("Circular parent",i),[2,n]):[4,e.getResourceAsync(i)]:[3,3];case 1:return o=a.sent(),[4,o.getRights(e)];case 2:l=a.sent(),n.push.apply(n,Hr([],Dr(l),!1)),a.label=3;case 3:return[2,n]}})})},t.prototype.isUnauthorized=function(){return!!this.error&&Bc(this.error)},t.prototype.destroy=function(e,n){return fn(this,void 0,void 0,function(){var r,s,i;return dn(this,function(o){switch(o.label){case 0:if(r=new Pr(this.getSubject()),r.setDestroy(!0),n===void 0&&(n=e.getAgent()),(n==null?void 0:n.subject)===void 0)throw new Error("No agent has been set or passed, you cannot delete this.");return[4,r.sign(n.privateKey,n.subject)];case 1:return s=o.sent(),i=new URL(this.getSubject()).origin+"/commit",[4,Ui(s,i)];case 2:return o.sent(),e.removeResource(this.getSubject()),[2]}})})},t.prototype.pushPropVal=function(e){for(var n,r,s=[],i=1;i<arguments.length;i++)s[i-1]=arguments[i];var o=(r=this.get(e))!==null&&r!==void 0?r:[];o.push.apply(o,Hr([],Dr(s),!1)),(n=this.commitBuilder).addPushAction.apply(n,Hr([e],Dr(s),!1)),this.propvals.set(e,o)},t.prototype.removePropVal=function(e){this.propvals.delete(e),this.commitBuilder.addRemoveAction(e)},t.prototype.removePropValLocally=function(e){this.propvals.delete(e)},t.prototype.save=function(e,n){var r,s,i;return fn(this,void 0,void 0,function(){var o,l,c,a,u,f,d,p,h;return dn(this,function(m){switch(m.label){case 0:if(e.addResource(this),o=(r=e.getAgent())!==null&&r!==void 0?r:n,!o)throw new Error("No agent has been set or passed, you cannot save.");return l=(s=this.get(De.commit.lastCommit))===null||s===void 0?void 0:s.toString(),l&&this.commitBuilder.setPreviousCommit(l),c=this.commitBuilder.clone(),this.commitBuilder=new Pr(this.getSubject()),[4,c.sign(o.privateKey,o.subject)];case 1:a=m.sent(),this.appliedCommitSignatures.add(a.signature),this.loading=!1,this.new=!1,u=new URL(this.getSubject()).origin+"/commit",m.label=2;case 2:return m.trys.push([2,4,,8]),this.commitError=void 0,[4,Ui(a,u)];case 3:return f=m.sent(),this.setUnsafe(De.commit.lastCommit,f.id),e.subscribeWebSocket(this.subject),e.notifyResourceSaved(this),[2,f.id];case 4:return d=m.sent(),d.message.includes("previousCommit")?(console.warn("previousCommit missing or mismatch, retrying..."),[4,tr(this.getSubject(),e)]):[3,7];case 5:return p=m.sent(),h=(i=p.get(De.commit.lastCommit))===null||i===void 0?void 0:i.toString(),h&&this.setUnsafe(De.commit.lastCommit,h),[4,this.save(e,o)];case 6:return[2,m.sent()];case 7:throw this.commitBuilder=c,this.commitError=d,e.addResource(this),d;case 8:return[2]}})})},t.prototype.set=function(e,n,r,s){return s===void 0&&(s=!0),fn(this,void 0,void 0,function(){var i;return dn(this,function(o){switch(o.label){case 0:return r.isOffline()&&(console.warn("Offline, not validating"),s=!1),s?[4,r.getProperty(e)]:[3,2];case 1:i=o.sent(),Ic(n,i.datatype),o.label=2;case 2:return this.propvals.set(e,n),this.commitBuilder.addSetAction(e,n),[2]}})})},t.prototype.setUnsafe=function(e,n){this.propvals.set(e,n)},t.prototype.setError=function(e){this.error=e},t.prototype.setSubject=function(e){Pt(e),this.commitBuilder.setSubject(e),this.subject=e},t}(),sr;(function(t){t.READ="read",t.WRITE="write"})(sr||(sr={}));var Vi=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(u){try{a(r.next(u))}catch(f){o(f)}}function c(u){try{a(r.throw(u))}catch(f){o(f)}}function a(u){u.done?i(u.value):s(u.value).then(l,c)}a((r=r.apply(t,e||[])).next())})},Gi=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(a){return function(u){return c([a,u])}}function c(a){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=a[0]&2?s.return:a[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,a[1])).done)return i;switch(s=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,s=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){n.label=a[1];break}if(a[0]===6&&n.label<i[1]){n.label=i[1],i=a;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(a);break}i[2]&&n.ops.pop(),n.trys.pop();continue}a=e.call(t,n)}catch(u){a=[6,u],s=0}finally{r=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Ki=globalThis&&globalThis.__read||function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),s,i=[],o;try{for(;(e===void 0||e-- >0)&&!(s=r.next()).done;)i.push(s.value)}catch(l){o={error:l}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i},Ji=globalThis&&globalThis.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))},Lc=function(){function t(){this.subscriptions=new Map}return t.prototype.register=function(e,n){var r,s=(r=this.subscriptions.get(e))!==null&&r!==void 0?r:new Set;return s.add(n),this.subscriptions.set(e,s),function(){s.delete(n)}},t.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return Vi(this,void 0,void 0,function(){var s,i,o=this;return Gi(this,function(l){switch(l.label){case 0:return this.subscriptions.has(e)?(s=this.subscriptions.get(e),i=function(c){return Vi(o,void 0,void 0,function(){return Gi(this,function(a){return c.apply(void 0,Ji([],Ki(n),!1)),[2]})})},s?[4,Promise.allSettled(Ji([],Ki(s),!1).map(function(c){return i(c)}))]:[2]):[2];case 1:return l.sent(),[2]}})})},t}(),Po=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(u){try{a(r.next(u))}catch(f){o(f)}}function c(u){try{a(r.throw(u))}catch(f){o(f)}}function a(u){u.done?i(u.value):s(u.value).then(l,c)}a((r=r.apply(t,e||[])).next())})},Do=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(a){return function(u){return c([a,u])}}function c(a){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=a[0]&2?s.return:a[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,a[1])).done)return i;switch(s=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,s=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){n.label=a[1];break}if(a[0]===6&&n.label<i[1]){n.label=i[1],i=a;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(a);break}i[2]&&n.ops.pop(),n.trys.pop();continue}a=e.call(t,n)}catch(u){a=[6,u],s=0}finally{r=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},Uc=globalThis&&globalThis.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function Xi(t,e){var n=new URL(t);n.protocol==="http:"?n.protocol="ws":n.protocol="wss",n.pathname="/ws";var r=new WebSocket(n.toString());return r.onopen=function(s){return Pc(e,r)},r.onmessage=function(s){return Dc(s,e)},r.onerror=Hc,r}function Pc(t,e){Ho(e,t).then(function(){var n,r;try{for(var s=Uc(t.subscribers.keys()),i=s.next();!i.done;i=s.next()){var o=i.value;t.subscribeWebSocket(o)}}catch(l){n={error:l}}finally{try{i&&!i.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}})}function Dc(t,e){if(t.data.startsWith("COMMIT ")){var n=t.data.slice(7);Oc(n,e)}else if(t.data.startsWith("ERROR "))e.handleError(t.data.slice(6));else if(t.data.startsWith("RESOURCE ")){var r=t.data.slice(9),s=JSON.parse(r),i=new Et(It);ui(s,i,e)}else console.warn("Unknown websocket message:",t)}function Hc(t){console.error("websocket error:",t)}function Ho(t,e){var n;return Po(this,void 0,void 0,function(){var r,s;return Do(this,function(i){switch(i.label){case 0:return r=e.getAgent(),r?!t.url.startsWith("ws://localhost:")&&((n=r==null?void 0:r.subject)===null||n===void 0?void 0:n.startsWith("http://localhost"))?(console.warn("Can't authenticate localhost Agent over websocket"),[2]):[4,Eo(t.url,r)]:[2];case 1:return s=i.sent(),t.send("AUTHENTICATE "+JSON.stringify(s)),[2]}})})}function Fc(t,e){return Po(this,void 0,void 0,function(){return Do(this,function(n){return t.send("GET "+e),[2]})})}var yt=globalThis&&globalThis.__awaiter||function(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function l(u){try{a(r.next(u))}catch(f){o(f)}}function c(u){try{a(r.throw(u))}catch(f){o(f)}}function a(u){u.done?i(u.value):s(u.value).then(l,c)}a((r=r.apply(t,e||[])).next())})},vt=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(a){return function(u){return c([a,u])}}function c(a){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=a[0]&2?s.return:a[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,a[1])).done)return i;switch(s=0,i&&(a=[a[0]&2,i.value]),a[0]){case 0:case 1:i=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,s=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!i||a[1]>i[0]&&a[1]<i[3])){n.label=a[1];break}if(a[0]===6&&n.label<i[1]){n.label=i[1],i=a;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(a);break}i[2]&&n.ops.pop(),n.trys.pop();continue}a=e.call(t,n)}catch(u){a=[6,u],s=0}finally{r=i=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},yn;(function(t){t.ResourceSaved="resource-saved",t.ResourceRemoved="resource-removed",t.ResourceManuallyCreated="resource-manually-created"})(yn||(yn={}));var Fo=function(){function t(e){e===void 0&&(e={}),this.eventManager=new Lc,this._resources=new Map,this.webSockets=new Map,this.subscribers=new Map,e.serverUrl&&this.setServerUrl(e.serverUrl),e.agent&&this.setAgent(e.agent),this.errorHandler=function(n){throw n}}return Object.defineProperty(t.prototype,"resources",{get:function(){return this._resources},enumerable:!1,configurable:!0}),t.prototype.addResource=function(e){if(e.get(P.properties.incomplete)){var n=this.resources.get(e.getSubject());if(n&&!n.loading)return}this.resources.set(e.getSubject(),e),this.notify(e.clone())},t.prototype.checkSubjectTaken=function(e){return yt(this,void 0,void 0,function(){var n;return vt(this,function(r){switch(r.label){case 0:return[4,this.getResourceAsync(e)];case 1:return n=r.sent(),n.isReady()?[2,!0]:[2,!1]}})})},t.prototype.buildUniqueSubjectFromParts=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return yt(this,void 0,void 0,function(){var r;return vt(this,function(s){return r=e.join("/"),[2,this.findAvailableSubject(r)]})})},t.prototype.createSubject=function(e){var n=this.randomPart();return e=e||"things","".concat(this.getServerUrl(),"/").concat(e,"/").concat(n)},t.prototype.fetchResource=function(e,n){if(n===void 0&&(n={}),n.setLoading){var r=new Et(e);r.loading=!0,this.addResource(r)}var s=this.getWebSocketForSubject(e);!n.noWebSocket&&(s==null?void 0:s.readyState)===WebSocket.OPEN?Fc(s,e):tr(e,this,n.fromProxy?this.getServerUrl():void 0)},t.prototype.getAllSubjects=function(){return Array.from(this.resources.keys())},t.prototype.getDefaultWebSocket=function(){return this.webSockets.get(this.getServerUrl())},t.prototype.getWebSocketForSubject=function(e){var n=new URL(e),r=this.webSockets.get(n.origin);if(r)return r;this.webSockets.set(n.origin,Xi(n.origin,this))},t.prototype.getServerUrl=function(){return this.serverUrl},t.prototype.getAgent=function(){var e;return(e=this.agent)!==null&&e!==void 0?e:void 0},t.prototype.getResourceLoading=function(e,n){if(e===void 0&&(e=It),n===void 0&&(n={}),e===It||e===null){var r=new Et(It,n.newResource);return r}var s=this.resources.get(e);if(s)!n.allowIncomplete&&s.loading===!1&&s.get(P.properties.incomplete)&&(s.loading=!0,this.addResource(s),this.fetchResource(e,n));else{var r=new Et(e,n.newResource);return r.loading=!0,this.addResource(r),n.newResource||this.fetchResource(e,n),r}return s},t.prototype.getResourceAsync=function(e){return yt(this,void 0,void 0,function(){var n,r;return vt(this,function(s){switch(s.label){case 0:return n=this.resources.get(e),n?[3,2]:[4,tr(e,this)];case 1:return r=s.sent(),[2,r];case 2:return[2,n]}})})},t.prototype.getProperty=function(e){var n;return yt(this,void 0,void 0,function(){var r,s,i,o,l,c;return vt(this,function(a){switch(a.label){case 0:return[4,this.getResourceAsync(e)];case 1:if(r=a.sent(),r===void 0)throw Error("Property ".concat(e," is not found"));if(r.error)throw Error("Property ".concat(e," cannot be loaded: ").concat(r.error));if(s=new zc,i=r.get(P.properties.datatype),i===void 0)throw Error("Property ".concat(e," has no datatype: ").concat(r.getPropVals()));if(o=r.get(P.properties.shortname),o===void 0)throw Error("Property ".concat(e," has no shortname: ").concat(r.getPropVals()));if(l=r.get(P.properties.description),l===void 0)throw Error("Property ".concat(e," has no description: ").concat(r.getPropVals()));return c=(n=r.get(P.properties.classType))===null||n===void 0?void 0:n.toString(),s.classType=c,s.shortname=o.toString(),s.description=l.toString(),s.datatype=jc(i.toString()),[2,s]}})})},t.prototype.handleError=function(e){typeof e=="string"&&(e=new Error(e)),this.errorHandler(e)||console.error(e)},t.prototype.isOffline=function(){var e;return!(!((e=window==null?void 0:window.navigator)===null||e===void 0)&&e.onLine)},t.prototype.notify=function(e){return yt(this,void 0,void 0,function(){var n,r,s=this;return vt(this,function(i){return n=e.getSubject(),r=this.subscribers.get(n),r===void 0?[2]:(Promise.allSettled(r.map(function(o){return yt(s,void 0,void 0,function(){return vt(this,function(l){return[2,o(e)]})})})),[2])})})},t.prototype.notifyResourceSaved=function(e){this.eventManager.emit(yn.ResourceSaved,e)},t.prototype.notifyResourceManuallyCreated=function(e){this.eventManager.emit(yn.ResourceManuallyCreated,e)},t.prototype.removeResource=function(e){var n=this.resources.get(e);this.resources.delete(e),n&&this.eventManager.emit(yn.ResourceRemoved,n)},t.prototype.renameSubject=function(e,n){return yt(this,void 0,void 0,function(){var r;return vt(this,function(s){switch(s.label){case 0:if(Pt(n),r=this.resources.get(e),r===void 0)throw Error("Old subject does not exist in store: ".concat(e));return[4,this.checkSubjectTaken(n)];case 1:if(s.sent())throw Error("New subject name is already taken: ".concat(n));return r.setSubject(n),this.resources.set(n,r),this.removeResource(e),[2]}})})},t.prototype.setAgent=function(e){var n=this;this.agent=e,e&&(Ao(this,e),this.webSockets.forEach(function(r){Ho(r,n)}),this.resources.forEach(function(r){r.isUnauthorized()&&n.fetchResource(r.getSubject())}))},t.prototype.setServerUrl=function(e){if(Pt(e),e.substr(-1)==="/")throw Error("baseUrl should not have a trailing slash");this.serverUrl=e,this.openWebSocket(e)},t.prototype.openWebSocket=function(e){if(typeof window<"u"){if(this.webSockets.has(e))return;this.webSockets.set(e,Xi(e,this))}else console.warn("WebSockets not supported, no window available")},t.prototype.subscribe=function(e,n){if(e===void 0)throw Error("Cannot subscribe to undefined subject");var r=this.subscribers.get(e);r===void 0&&(this.subscribeWebSocket(e),r=[]),r.push(n),this.subscribers.set(e,r)},t.prototype.subscribeWebSocket=function(e){if(e!==It)try{var n=this.getWebSocketForSubject(e);(n==null?void 0:n.readyState)===1&&(n==null||n.send("SUBSCRIBE ".concat(e)))}catch(r){console.error(r)}},t.prototype.unSubscribeWebSocket=function(e){var n;if(e!==It)try{(n=this.getDefaultWebSocket())===null||n===void 0||n.send("UNSUBSCRIBE ".concat(e))}catch(r){console.error(r)}},t.prototype.unsubscribe=function(e,n){if(e!==void 0){var r=this.subscribers.get(e);r&&(r=r==null?void 0:r.filter(function(s){return s!==n}),this.subscribers.set(e,r))}},t.prototype.on=function(e,n){return this.eventManager.register(e,n)},t.prototype.randomPart=function(){return Math.random().toString(36).substring(2)},t.prototype.findAvailableSubject=function(e,n){return n===void 0&&(n=!0),yt(this,void 0,void 0,function(){var r,s,i;return vt(this,function(o){switch(o.label){case 0:return r="".concat(this.getServerUrl(),"/").concat(e),n||(s=this.randomPart(),r+="-".concat(s)),[4,this.checkSubjectTaken(r)];case 1:return i=o.sent(),i?[2,this.findAvailableSubject(e,!1)]:[2,r]}})})},t}(),zc=function(){function t(){}return t}();function Fr(t){if(t===void 0)throw new Error("Not an array: ".concat(t,", is ").concat(typeof t));if(t.constructor===Array)return t;throw new Error("Not an array: ".concat(t,", is a ").concat(typeof t))}var qc={getAll:"https://atomicdata.dev/classes/?page_size=999",agent:"https://atomicdata.dev/classes/Agent",chatRoom:"https://atomicdata.dev/classes/ChatRoom",collection:"https://atomicdata.dev/classes/Collection",commit:"https://atomicdata.dev/classes/Commit",class:"https://atomicdata.dev/classes/Class",document:"https://atomicdata.dev/classes/Document",bookmark:"https://atomicdata.dev/class/Bookmark",elements:{paragraph:"https://atomicdata.dev/classes/elements/Paragraph"},error:"https://atomicdata.dev/classes/Error",property:"https://atomicdata.dev/classes/Property",datatype:"https://atomicdata.dev/classes/Datatype",endpoint:"https://atomicdata.dev/classes/Endpoint",drive:"https://atomicdata.dev/classes/Drive",redirect:"https://atomicdata.dev/classes/Redirect",invite:"https://atomicdata.dev/classes/Invite",file:"https://atomicdata.dev/classes/File",message:"https://atomicdata.dev/classes/Message",importer:"https://atomicdata.dev/classes/Importer",folder:"https://atomicdata.dev/classes/Folder",displayStyle:"https://atomicdata.dev/class/DisplayStyle",displayStyles:{grid:"https://atomicdata.dev/display-style/grid",list:"https://atomicdata.dev/display-style/list"}},De={getAll:"https://atomicdata.dev/properties/?page_size=999",children:"https://atomicdata.dev/properties/children",classType:"https://atomicdata.dev/properties/classtype",createdBy:"https://atomicdata.dev/properties/createdBy",datatype:"https://atomicdata.dev/properties/datatype",description:"https://atomicdata.dev/properties/description",drives:"https://atomicdata.dev/properties/drives",incomplete:"https://atomicdata.dev/properties/incomplete",isA:"https://atomicdata.dev/properties/isA",isDynamic:"https://atomicdata.dev/properties/isDynamic",name:"https://atomicdata.dev/properties/name",parent:"https://atomicdata.dev/properties/parent",paymentPointer:"https://atomicdata.dev/properties/paymentPointer",read:"https://atomicdata.dev/properties/read",recommends:"https://atomicdata.dev/properties/recommends",requires:"https://atomicdata.dev/properties/requires",shortname:"https://atomicdata.dev/properties/shortname",subResources:"https://atomicdata.dev/properties/subresources",write:"https://atomicdata.dev/properties/write",displayStyle:"https://atomicdata.dev/property/display-style",agent:{publicKey:"https://atomicdata.dev/properties/publicKey"},collection:{members:"https://atomicdata.dev/properties/collection/members",currentPage:"https://atomicdata.dev/properties/collection/currentPage",pageSize:"https://atomicdata.dev/properties/collection/pageSize",property:"https://atomicdata.dev/properties/collection/property",totalMembers:"https://atomicdata.dev/properties/collection/totalMembers",totalPages:"https://atomicdata.dev/properties/collection/totalPages",value:"https://atomicdata.dev/properties/collection/value"},commit:{subject:"https://atomicdata.dev/properties/subject",createdAt:"https://atomicdata.dev/properties/createdAt",lastCommit:"https://atomicdata.dev/properties/lastCommit",previousCommit:"https://atomicdata.dev/properties/previousCommit",signer:"https://atomicdata.dev/properties/signer",set:"https://atomicdata.dev/properties/set",push:"https://atomicdata.dev/properties/push",remove:"https://atomicdata.dev/properties/remove",destroy:"https://atomicdata.dev/properties/destroy",signature:"https://atomicdata.dev/properties/signature"},document:{elements:"https://atomicdata.dev/properties/documents/elements"},endpoint:{parameters:"https://atomicdata.dev/properties/endpoint/parameters",results:"https://atomicdata.dev/properties/endpoint/results"},search:{query:"https://atomicdata.dev/properties/search/query",limit:"https://atomicdata.dev/properties/search/limit",property:"https://atomicdata.dev/properties/search/property"},redirect:{destination:"https://atomicdata.dev/properties/destination",redirectAgent:"https://atomicdata.dev/properties/invite/redirectAgent"},invite:{agent:"https://atomicdata.dev/properties/invite/agent",publicKey:"https://atomicdata.dev/properties/invite/publicKey",target:"https://atomicdata.dev/properties/invite/target",usagesLeft:"https://atomicdata.dev/properties/invite/usagesLeft",users:"https://atomicdata.dev/properties/invite/users",write:"https://atomicdata.dev/properties/invite/write"},file:{filename:"https://atomicdata.dev/properties/filename",filesize:"https://atomicdata.dev/properties/filesize",downloadUrl:"https://atomicdata.dev/properties/downloadURL",mimetype:"https://atomicdata.dev/properties/mimetype",attachments:"https://atomicdata.dev/properties/attachments"},chatRoom:{messages:"https://atomicdata.dev/properties/messages",nextPage:"https://atomicdata.dev/properties/nextPage",replyTo:"https://atomicdata.dev/properties/replyTo"},bookmark:{url:"https://atomicdata.dev/property/url",preview:"https://atomicdata.dev/property/preview",imageUrl:"https://atomicdata.dev/properties/imageUrl"}},Wc={atomicUrl:"https://atomicdata.dev/datatypes/atomicURL",boolean:"https://atomicdata.dev/datatypes/boolean",date:"https://atomicdata.dev/datatypes/date",float:"https://atomicdata.dev/datatypes/float",integer:"https://atomicdata.dev/datatypes/integer",markdown:"https://atomicdata.dev/datatypes/markdown",resourceArray:"https://atomicdata.dev/datatypes/resourceArray",slug:"https://atomicdata.dev/datatypes/slug",string:"https://atomicdata.dev/datatypes/string",timestamp:"https://atomicdata.dev/datatypes/timestamp"},zo={publicAgent:"https://atomicdata.dev/agents/publicAgent"},P={properties:De,classes:qc,datatypes:Wc,instances:zo};function Xn(){}function Vc(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Gc(t,...e){if(t==null)return Xn;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Xr(t){let e;return Gc(t,n=>e=n)(),e}Promise.resolve();const Gt=[];function qo(t,e){return{subscribe:Wo(t,e).subscribe}}function Wo(t,e=Xn){let n;const r=new Set;function s(l){if(Vc(t,l)&&(t=l,n)){const c=!Gt.length;for(const a of r)a[1](),Gt.push(a,t);if(c){for(let a=0;a<Gt.length;a+=2)Gt[a][0](Gt[a+1]);Gt.length=0}}}function i(l){s(l(t))}function o(l,c=Xn){const a=[l,c];return r.add(a),r.size===1&&(n=e(s)||Xn),l(t),()=>{r.delete(a),r.size===0&&(n(),n=null)}}return{set:s,update:i,subscribe:o}}const Vo=Wo(void 0),ft=qo(void 0,t=>{Vo.subscribe(e=>{t(e)})}),Go=(t,e)=>{const n=Xr(ft);return qo(void 0,r=>{r(n.getResourceLoading(t,e));const s=i=>{r(i)};return n.subscribe(t,s),()=>n.unsubscribe(t,s)})},$e=(t,e,n=!1)=>{const r=Xr(ft);let s=Xr(t);t.subscribe(f=>s=f);let i=s.get(e);const o=new Set;let l=!1;const c=f=>{i=f.get(e),a()},a=()=>{for(const f of o)f(i)},u=async f=>{i=f,f===void 0?s.removePropVal(e):s.set(e,f,r,!1),n&&await s.save(r),await r.notify(s)};return{set(f){u(f),a()},subscribe(f){return l||(r.subscribe(s.getSubject(),c),l=!0),o.add(f),f(i),()=>{o.delete(f),o.size===0&&(r.unsubscribe(s.getSubject(),c),l=!1)}},update(f){u(f(i)).then(()=>{a()})}}},Kc=t=>{Vo.set(t)};function Jc(t){let e,n;const r=t[1].default,s=Ee(r,t,t[0],null);return{c(){e=L("div"),s&&s.c(),y(e,"class","svelte-p007f4")},m(i,o){H(i,e,o),s&&s.m(e,null),n=!0},p(i,[o]){s&&s.p&&(!n||o&1)&&Ae(s,r,i,i[0],n?ke(r,i[0],o,null):Re(i[0]),null)},i(i){n||(A(s,i),n=!0)},o(i){j(s,i),n=!1},d(i){i&&x(e),s&&s.d(i)}}}function Xc(t,e,n){let{$$slots:r={},$$scope:s}=e;return t.$$set=i=>{"$$scope"in i&&n(0,s=i.$$scope)},[s,r]}class Ko extends _e{constructor(e){super(),be(this,e,Xc,Jc,me,{})}}const ln="https://replaceme",Zi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",fi=(t=10)=>`${ln}/${Jo(t)}`,Jo=(t=10)=>{let e="";for(let n=0;n<t;n++)e+=Zi.charAt(Math.floor(Math.random()*Zi.length));return e},Kt=[];function Xo(t,e){return{subscribe:Ct(t,e).subscribe}}function Ct(t,e=re){let n;const r=new Set;function s(l){if(me(t,l)&&(t=l,n)){const c=!Kt.length;for(const a of r)a[1](),Kt.push(a,t);if(c){for(let a=0;a<Kt.length;a+=2)Kt[a][0](Kt[a+1]);Kt.length=0}}}function i(l){s(l(t))}function o(l,c=re){const a=[l,c];return r.add(a),r.size===1&&(n=e(s)||re),l(t),()=>{r.delete(a),r.size===0&&(n(),n=null)}}return{set:s,update:i,subscribe:o}}const xt=Ct([]),Lt=Ct("https://localhost"),Zr=Ct("json");function Zc(t){let e,n=[{xmlns:"http://www.w3.org/2000/svg"},{width:t[1]},{height:t[2]},{viewBox:t[0]},{stroke:t[3]},{fill:t[4]},t[6]],r={};for(let s=0;s<n.length;s+=1)r=kt(r,n[s]);return{c(){e=At("svg"),Mi(e,r)},m(s,i){H(s,e,i),e.innerHTML=t[5]},p(s,[i]){i&32&&(e.innerHTML=s[5]),Mi(e,r=ti(n,[{xmlns:"http://www.w3.org/2000/svg"},i&2&&{width:s[1]},i&4&&{height:s[2]},i&1&&{viewBox:s[0]},i&8&&{stroke:s[3]},i&16&&{fill:s[4]},i&64&&s[6]]))},i:re,o:re,d(s){s&&x(e)}}}function Yc(t){const n=/viewBox="([\d\- \.]+)"/.exec(t);return n?n[1]:"0 0 20 20"}function Qc(t,e,n){let r;const s=["data","viewBox","size","width","height","color","stroke","fill"];let i=Zn(e,s),{data:o=""}=e,{viewBox:l=Yc(o)}=e,{size:c="20px"}=e,{width:a=c}=e,{height:u=c}=e,{color:f="currentColor"}=e,{stroke:d=f}=e,{fill:p=f}=e;return t.$$set=h=>{e=kt(kt({},e),po(h)),n(6,i=Zn(e,s)),"data"in h&&n(7,o=h.data),"viewBox"in h&&n(0,l=h.viewBox),"size"in h&&n(8,c=h.size),"width"in h&&n(1,a=h.width),"height"in h&&n(2,u=h.height),"color"in h&&n(9,f=h.color),"stroke"in h&&n(3,d=h.stroke),"fill"in h&&n(4,p=h.fill)},t.$$.update=()=>{t.$$.dirty&128&&n(5,r=o.replace(/<svg ([^>]*)>/,"").replace("</svg>",""))},[l,a,u,d,p,r,i,o,c,f]}class Mn extends _e{constructor(e){super(),be(this,e,Qc,Zc,me,{data:7,viewBox:0,size:8,width:1,height:2,color:9,stroke:3,fill:4})}}function Zo(t){const e=t-1;return e*e*e+1}function Yi(t,{delay:e=0,duration:n=400,easing:r=co}={}){const s=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:r,css:i=>`opacity: ${i*s}`}}function Qi(t,{delay:e=0,duration:n=400,easing:r=Zo,x:s=0,y:i=0,opacity:o=0}={}){const l=getComputedStyle(t),c=+l.opacity,a=l.transform==="none"?"":l.transform,u=c*(1-o);return{delay:e,duration:n,easing:r,css:(f,d)=>`
			transform: ${a} translate(${(1-f)*s}px, ${(1-f)*i}px);
			opacity: ${c-u*d}`}}function $i(t,{delay:e=0,duration:n=400,easing:r=Zo}={}){const s=getComputedStyle(t),i=+s.opacity,o=parseFloat(s.height),l=parseFloat(s.paddingTop),c=parseFloat(s.paddingBottom),a=parseFloat(s.marginTop),u=parseFloat(s.marginBottom),f=parseFloat(s.borderTopWidth),d=parseFloat(s.borderBottomWidth);return{delay:e,duration:n,easing:r,css:p=>`overflow: hidden;opacity: ${Math.min(p*20,1)*i};height: ${p*o}px;padding-top: ${p*l}px;padding-bottom: ${p*c}px;margin-top: ${p*a}px;margin-bottom: ${p*u}px;border-top-width: ${p*f}px;border-bottom-width: ${p*d}px;`}}const $c='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="cube"><rect width="24" height="24" opacity="0"/><path d="M20.66 7.26c0-.07-.1-.14-.15-.21l-.09-.1a2.5 2.5 0 0 0-.86-.68l-6.4-3a2.7 2.7 0 0 0-2.26 0l-6.4 3a2.6 2.6 0 0 0-.86.68L3.52 7a1 1 0 0 0-.15.2A2.39 2.39 0 0 0 3 8.46v7.06a2.49 2.49 0 0 0 1.46 2.26l6.4 3a2.7 2.7 0 0 0 2.27 0l6.4-3A2.49 2.49 0 0 0 21 15.54V8.46a2.39 2.39 0 0 0-.34-1.2zm-8.95-2.2a.73.73 0 0 1 .58 0l5.33 2.48L12 10.15 6.38 7.54zM5.3 16a.47.47 0 0 1-.3-.43V9.1l6 2.79v6.72zm13.39 0L13 18.61v-6.72l6-2.79v6.44a.48.48 0 0 1-.31.46z"/></g></g></svg>',Yo='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="trash-2"><rect width="24" height="24" opacity="0"/><path d="M21 6h-5V4.33A2.42 2.42 0 0 0 13.5 2h-3A2.42 2.42 0 0 0 8 4.33V6H3a1 1 0 0 0 0 2h1v11a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V8h1a1 1 0 0 0 0-2zM10 4.33c0-.16.21-.33.5-.33h3c.29 0 .5.17.5.33V6h-4zM18 19a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8h12z"/><path d="M9 17a1 1 0 0 0 1-1v-4a1 1 0 0 0-2 0v4a1 1 0 0 0 1 1z"/><path d="M15 17a1 1 0 0 0 1-1v-4a1 1 0 0 0-2 0v4a1 1 0 0 0 1 1z"/></g></g></svg>',eu='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="edit"><rect width="24" height="24" opacity="0"/><path d="M19.4 7.34L16.66 4.6A2 2 0 0 0 14 4.53l-9 9a2 2 0 0 0-.57 1.21L4 18.91a1 1 0 0 0 .29.8A1 1 0 0 0 5 20h.09l4.17-.38a2 2 0 0 0 1.21-.57l9-9a1.92 1.92 0 0 0-.07-2.71zM9.08 17.62l-3 .28.27-3L12 9.32l2.7 2.7zM16 10.68L13.32 8l1.95-2L18 8.73z"/></g></g></svg>';function tu(t){let e,n,r;return{c(){e=L("input"),y(e,"type","text"),y(e,"placeholder",t[1]),e.disabled=t[2],e.required=t[3],y(e,"id",t[4]),e.autofocus=t[5],y(e,"class","svelte-1r0gtd3")},m(s,i){H(s,e,i),Qt(e,t[0]),t[5]&&e.focus(),n||(r=[se(e,"input",t[8]),se(e,"blur",t[6]),se(e,"keydown",t[7])],n=!0)},p(s,[i]){i&2&&y(e,"placeholder",s[1]),i&4&&(e.disabled=s[2]),i&8&&(e.required=s[3]),i&16&&y(e,"id",s[4]),i&32&&(e.autofocus=s[5]),i&1&&e.value!==s[0]&&Qt(e,s[0])},i:re,o:re,d(s){s&&x(e),n=!1,Ue(r)}}}function nu(t,e,n){let{value:r}=e,{placeholder:s=void 0}=e,{disabled:i=void 0}=e,{required:o=void 0}=e,{id:l=void 0}=e,{autofocus:c=void 0}=e;function a(d){qe.call(this,t,d)}function u(d){qe.call(this,t,d)}function f(){r=this.value,n(0,r)}return t.$$set=d=>{"value"in d&&n(0,r=d.value),"placeholder"in d&&n(1,s=d.placeholder),"disabled"in d&&n(2,i=d.disabled),"required"in d&&n(3,o=d.required),"id"in d&&n(4,l=d.id),"autofocus"in d&&n(5,c=d.autofocus)},[r,s,i,o,l,c,a,u,f]}class en extends _e{constructor(e){super(),be(this,e,nu,tu,me,{value:0,placeholder:1,disabled:2,required:3,id:4,autofocus:5})}}const tn=t=>t.toLowerCase().replace(/\s/g,"-");function ru(t){let e,n,r,s,i,o,l,c,a;return o=new Mn({props:{data:eu,fill:"white",stroke:"none"}}),{c(){e=L("button"),n=L("h2"),r=ae(t[0]),s=G(),i=L("span"),Z(o.$$.fragment),y(n,"class","svelte-nu5lcg"),y(i,"class","icon svelte-nu5lcg"),y(e,"class","svelte-nu5lcg")},m(u,f){H(u,e,f),C(e,n),C(n,r),C(e,s),C(e,i),J(o,i,null),l=!0,c||(a=se(e,"click",t[2]),c=!0)},p(u,f){(!l||f&1)&&xe(r,u[0])},i(u){l||(A(o.$$.fragment,u),l=!0)},o(u){j(o.$$.fragment,u),l=!1},d(u){u&&x(e),X(o),c=!1,a()}}}function iu(t){let e,n,r;function s(o){t[5](o)}let i={autofocus:!0};return t[0]!==void 0&&(i.value=t[0]),e=new en({props:i}),ye.push(()=>je(e,"value",s,t[0])),e.$on("blur",t[3]),e.$on("keydown",t[4]),{c(){Z(e.$$.fragment)},m(o,l){J(e,o,l),r=!0},p(o,l){const c={};!n&&l&1&&(n=!0,c.value=o[0],Be(()=>n=!1)),e.$set(c)},i(o){r||(A(e.$$.fragment,o),r=!0)},o(o){j(e.$$.fragment,o),r=!1},d(o){X(e,o)}}}function su(t){let e,n,r,s;const i=[iu,ru],o=[];function l(c,a){return c[1]?0:1}return e=l(t),n=o[e]=i[e](t),{c(){n.c(),r=Ke()},m(c,a){o[e].m(c,a),H(c,r,a),s=!0},p(c,[a]){let u=e;e=l(c),e===u?o[e].p(c,a):(Te(),j(o[u],1,1,()=>{o[u]=null}),Oe(),n=o[e],n?n.p(c,a):(n=o[e]=i[e](c),n.c()),A(n,1),n.m(r.parentNode,r))},i(c){s||(A(n),s=!0)},o(c){j(n),s=!1},d(c){o[e].d(c),c&&x(r)}}}function ou(t,e,n){let{title:r}=e,s=!1;const i=()=>{n(1,s=!0)},o=()=>{n(1,s=!1)},l=a=>{a.key==="Enter"&&o()};function c(a){r=a,n(0,r)}return t.$$set=a=>{"title"in a&&n(0,r=a.title)},t.$$.update=()=>{t.$$.dirty&1&&r!==tn(r)&&n(0,r=tn(r))},[r,s,i,o,l,c]}class lu extends _e{constructor(e){super(),be(this,e,ou,su,me,{title:0})}}function au(t){let e,n,r,s,i;return n=new Mn({props:{data:t[0],size:t[1],stroke:"none"}}),{c(){e=L("button"),Z(n.$$.fragment),e.disabled=t[2],y(e,"title",t[3]),y(e,"type","button"),y(e,"class","svelte-1vch9z4")},m(o,l){H(o,e,l),J(n,e,null),r=!0,s||(i=se(e,"click",t[4]),s=!0)},p(o,[l]){const c={};l&1&&(c.data=o[0]),l&2&&(c.size=o[1]),n.$set(c),(!r||l&4)&&(e.disabled=o[2]),(!r||l&8)&&y(e,"title",o[3])},i(o){r||(A(n.$$.fragment,o),r=!0)},o(o){j(n.$$.fragment,o),r=!1},d(o){o&&x(e),X(n),s=!1,i()}}}function cu(t,e,n){let{icon:r}=e,{size:s="1rem"}=e,{disabled:i=!1}=e,{title:o}=e;function l(c){qe.call(this,t,c)}return t.$$set=c=>{"icon"in c&&n(0,r=c.icon),"size"in c&&n(1,s=c.size),"disabled"in c&&n(2,i=c.disabled),"title"in c&&n(3,o=c.title)},[r,s,i,o,l]}class nn extends _e{constructor(e){super(),be(this,e,cu,au,me,{icon:0,size:1,disabled:2,title:3})}}const Qo='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="plus"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M19 11h-6V5a1 1 0 0 0-2 0v6H5a1 1 0 0 0 0 2h6v6a1 1 0 0 0 2 0v-6h6a1 1 0 0 0 0-2z"/></g></g></svg>',$o='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="options-2"><rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"/><path d="M19 9a3 3 0 0 0-2.82 2H3a1 1 0 0 0 0 2h13.18A3 3 0 1 0 19 9zm0 4a1 1 0 1 1 1-1 1 1 0 0 1-1 1z"/><path d="M3 7h1.18a3 3 0 0 0 5.64 0H21a1 1 0 0 0 0-2H9.82a3 3 0 0 0-5.64 0H3a1 1 0 0 0 0 2zm4-2a1 1 0 1 1-1 1 1 1 0 0 1 1-1z"/><path d="M21 17h-7.18a3 3 0 0 0-5.64 0H3a1 1 0 0 0 0 2h5.18a3 3 0 0 0 5.64 0H21a1 1 0 0 0 0-2zm-10 2a1 1 0 1 1 1-1 1 1 0 0 1-1 1z"/></g></g></svg>';function uu(t){let e,n,r,s;const i=t[6].default,o=Ee(i,t,t[5],null);return{c(){e=L("select"),o&&o.c(),y(e,"name",t[1]),y(e,"id",t[2]),e.disabled=t[3],e.required=t[4],y(e,"class","svelte-10ivlg5"),t[0]===void 0&&Rt(()=>t[8].call(e))},m(l,c){H(l,e,c),o&&o.m(e,null),Ni(e,t[0]),n=!0,r||(s=[se(e,"change",t[7]),se(e,"change",t[8])],r=!0)},p(l,[c]){o&&o.p&&(!n||c&32)&&Ae(o,i,l,l[5],n?ke(i,l[5],c,null):Re(l[5]),null),(!n||c&2)&&y(e,"name",l[1]),(!n||c&4)&&y(e,"id",l[2]),(!n||c&8)&&(e.disabled=l[3]),(!n||c&16)&&(e.required=l[4]),c&1&&Ni(e,l[0])},i(l){n||(A(o,l),n=!0)},o(l){j(o,l),n=!1},d(l){l&&x(e),o&&o.d(l),r=!1,Ue(s)}}}function fu(t,e,n){let{$$slots:r={},$$scope:s}=e,{name:i=void 0}=e,{id:o=void 0}=e,{disabled:l=void 0}=e,{required:c=void 0}=e,{value:a=void 0}=e;function u(d){qe.call(this,t,d)}function f(){a=Sa(this),n(0,a)}return t.$$set=d=>{"name"in d&&n(1,i=d.name),"id"in d&&n(2,o=d.id),"disabled"in d&&n(3,l=d.disabled),"required"in d&&n(4,c=d.required),"value"in d&&n(0,a=d.value),"$$scope"in d&&n(5,s=d.$$scope)},[a,i,o,l,c,s,r,u,f]}class du extends _e{constructor(e){super(),be(this,e,fu,uu,me,{name:1,id:2,disabled:3,required:4,value:0})}}const hu=(t,e)=>{const n=new URL(`${t}/collections`);return n.searchParams.set("property",P.properties.isA),n.searchParams.set("value",e),n.searchParams.set("page_size","1000"),n.toString()},pu=async t=>rn(ft).getResourceAsync(t),el=async(t,e)=>{const n=await Promise.all(t.map(async r=>{const s=hu(r,e);return(await pu(s)).get(P.properties.collection.members)}));return Array.from(new Set(n.flat()))},vn=Ct(["https://atomicdata.dev"]),tl=Xo([],t=>vn.subscribe(e=>{el(e,P.classes.property).then(n=>{t(n)})})),gu=Xo([],t=>vn.subscribe(e=>{el(e,P.classes.class).then(n=>{t(n)})})),mu='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g data-name="Layer 2"><g data-name="close"><rect width="24" height="24" transform="rotate(180 12 12)" opacity="0"/><path d="M13.41 12l4.3-4.29a1 1 0 1 0-1.42-1.42L12 10.59l-4.29-4.3a1 1 0 0 0-1.42 1.42l4.3 4.29-4.3 4.29a1 1 0 0 0 0 1.42 1 1 0 0 0 1.42 0l4.29-4.3 4.29 4.3a1 1 0 0 0 1.42 0 1 1 0 0 0 0-1.42z"/></g></g></svg>',bu=t=>({}),es=t=>({}),_u=t=>({}),ts=t=>({}),yu=t=>({}),ns=t=>({}),vu=t=>({}),rs=t=>({});function wu(t){let e,n,r,s,i,o,l,c,a,u,f,d,p,h,m;const E=t[5].title,S=Ee(E,t,t[4],rs);s=new nn({props:{icon:mu,title:"close"}}),s.$on("click",t[2]);const F=t[5].content,k=Ee(F,t,t[4],ns),D=t[5].error,B=Ee(D,t,t[4],ts),z=t[5].controls,R=Ee(z,t,t[4],es);return{c(){e=L("dialog"),n=L("div"),S&&S.c(),r=G(),Z(s.$$.fragment),i=G(),o=L("div"),k&&k.c(),l=G(),c=L("div"),a=G(),u=L("div"),f=L("div"),B&&B.c(),d=G(),p=L("div"),h=G(),R&&R.c(),y(n,"class","titlebar svelte-9dsju2"),y(o,"class","content-wrapper svelte-9dsju2"),ne(o,"overflow",!t[0]),y(c,"class","line svelte-9dsju2"),y(f,"class","error svelte-9dsju2"),y(p,"class","controls svelte-9dsju2"),y(u,"class","bottom-wrapper svelte-9dsju2"),y(e,"class","svelte-9dsju2")},m(w,q){H(w,e,q),C(e,n),S&&S.m(n,null),C(n,r),J(s,n,null),C(e,i),C(e,o),k&&k.m(o,null),C(e,l),C(e,c),C(e,a),C(e,u),C(u,f),B&&B.m(f,null),C(u,d),C(u,p),C(u,h),R&&R.m(u,null),t[6](e),m=!0},p(w,[q]){S&&S.p&&(!m||q&16)&&Ae(S,E,w,w[4],m?ke(E,w[4],q,vu):Re(w[4]),rs),k&&k.p&&(!m||q&16)&&Ae(k,F,w,w[4],m?ke(F,w[4],q,yu):Re(w[4]),ns),(!m||q&1)&&ne(o,"overflow",!w[0]),B&&B.p&&(!m||q&16)&&Ae(B,D,w,w[4],m?ke(D,w[4],q,_u):Re(w[4]),ts),R&&R.p&&(!m||q&16)&&Ae(R,z,w,w[4],m?ke(z,w[4],q,bu):Re(w[4]),es)},i(w){m||(A(S,w),A(s.$$.fragment,w),A(k,w),A(B,w),A(R,w),m=!0)},o(w){j(S,w),j(s.$$.fragment,w),j(k,w),j(B,w),j(R,w),m=!1},d(w){w&&x(e),S&&S.d(w),X(s),k&&k.d(w),B&&B.d(w),R&&R.d(w),t[6](null)}}}function Su(t,e,n){let{$$slots:r={},$$scope:s}=e,{show:i=!1}=e,{overflow:o=!1}=e,l;const c=()=>{n(3,i=!1)};function a(u){ye[u?"unshift":"push"](()=>{l=u,n(1,l)})}return t.$$set=u=>{"show"in u&&n(3,i=u.show),"overflow"in u&&n(0,o=u.overflow),"$$scope"in u&&n(4,s=u.$$scope)},t.$$.update=()=>{t.$$.dirty&10&&l&&i&&(l.showModal(),document.body.style.overflow="hidden"),t.$$.dirty&10&&l&&!i&&(l.close(),document.body.style.overflow="visible")},[o,l,c,i,s,r,a]}class nl extends _e{constructor(e){super(),be(this,e,Su,wu,me,{show:3,overflow:0})}}function Nn(t){return t.split("-")[0]}function di(t){return t.split("-")[1]}function br(t){return["top","bottom"].includes(Nn(t))?"x":"y"}function rl(t){return t==="y"?"height":"width"}function is(t,e,n){let{reference:r,floating:s}=t;const i=r.x+r.width/2-s.width/2,o=r.y+r.height/2-s.height/2,l=br(e),c=rl(l),a=r[c]/2-s[c]/2,u=Nn(e),f=l==="x";let d;switch(u){case"top":d={x:i,y:r.y-s.height};break;case"bottom":d={x:i,y:r.y+r.height};break;case"right":d={x:r.x+r.width,y:o};break;case"left":d={x:r.x-s.width,y:o};break;default:d={x:r.x,y:r.y}}switch(di(e)){case"start":d[l]-=a*(n&&f?-1:1);break;case"end":d[l]+=a*(n&&f?-1:1);break}return d}const Eu=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let a=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:u,y:f}=is(a,r,c),d=r,p={},h=0;for(let m=0;m<l.length;m++){const{name:E,fn:S}=l[m],{x:F,y:k,data:D,reset:B}=await S({x:u,y:f,initialPlacement:r,placement:d,strategy:s,middlewareData:p,rects:a,platform:o,elements:{reference:t,floating:e}});if(u=F??u,f=k??f,p={...p,[E]:{...p[E],...D}},B&&h<=50){h++,typeof B=="object"&&(B.placement&&(d=B.placement),B.rects&&(a=B.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):B.rects),{x:u,y:f}=is(a,d,c)),m=-1;continue}}return{x:u,y:f,placement:d,strategy:s,middlewareData:p}};function ku(t){return{top:0,right:0,bottom:0,left:0,...t}}function Au(t){return typeof t!="number"?ku(t):{top:t,right:t,bottom:t,left:t}}function or(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function il(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:l,strategy:c}=t,{boundary:a="clippingAncestors",rootBoundary:u="viewport",elementContext:f="floating",altBoundary:d=!1,padding:p=0}=e,h=Au(p),E=l[d?f==="floating"?"reference":"floating":f],S=or(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(E)))==null||n?E:E.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:a,rootBoundary:u,strategy:c})),F=f==="floating"?{...o.floating,x:r,y:s}:o.reference,k=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),D=await(i.isElement==null?void 0:i.isElement(k))?await(i.getScale==null?void 0:i.getScale(k))||{x:1,y:1}:{x:1,y:1},B=or(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({rect:F,offsetParent:k,strategy:c}):F);return{top:(S.top-B.top+h.top)/D.y,bottom:(B.bottom-S.bottom+h.bottom)/D.y,left:(S.left-B.left+h.left)/D.x,right:(B.right-S.right+h.right)/D.x}}const Ru=Math.min,Tu=Math.max;function ss(t,e,n){return Tu(t,Ru(e,n))}const Ou={left:"right",right:"left",bottom:"top",top:"bottom"};function lr(t){return t.replace(/left|right|bottom|top/g,e=>Ou[e])}function Cu(t,e,n){n===void 0&&(n=!1);const r=di(t),s=br(t),i=rl(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=lr(o)),{main:o,cross:lr(o)}}const Bu={start:"end",end:"start"};function os(t){return t.replace(/start|end/g,e=>Bu[e])}function ju(t){const e=lr(t);return[os(t),e,os(e)]}const Mu=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n;const{placement:r,middlewareData:s,rects:i,initialPlacement:o,platform:l,elements:c}=e,{mainAxis:a=!0,crossAxis:u=!0,fallbackPlacements:f,fallbackStrategy:d="bestFit",flipAlignment:p=!0,...h}=t,m=Nn(r),S=f||(m===o||!p?[lr(o)]:ju(o)),F=[o,...S],k=await il(e,h),D=[];let B=((n=s.flip)==null?void 0:n.overflows)||[];if(a&&D.push(k[m]),u){const{main:q,cross:K}=Cu(r,i,await(l.isRTL==null?void 0:l.isRTL(c.floating)));D.push(k[q],k[K])}if(B=[...B,{placement:r,overflows:D}],!D.every(q=>q<=0)){var z,R;const q=((z=(R=s.flip)==null?void 0:R.index)!=null?z:0)+1,K=F[q];if(K)return{data:{index:q,overflows:B},reset:{placement:K}};let v="bottom";switch(d){case"bestFit":{var w;const Q=(w=B.map(ie=>[ie,ie.overflows.filter(b=>b>0).reduce((b,T)=>b+T,0)]).sort((ie,b)=>ie[1]-b[1])[0])==null?void 0:w[0].placement;Q&&(v=Q);break}case"initialPlacement":v=o;break}if(r!==v)return{reset:{placement:v}}}return{}}}};async function Nu(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=Nn(n),l=di(n),c=br(n)==="x",a=["left","top"].includes(o)?-1:1,u=i&&c?-1:1,f=typeof e=="function"?e(t):e;let{mainAxis:d,crossAxis:p,alignmentAxis:h}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return l&&typeof h=="number"&&(p=l==="end"?h*-1:h),c?{x:p*u,y:d*a}:{x:d*a,y:p*u}}const Iu=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:r}=e,s=await Nu(e,t);return{x:n+s.x,y:r+s.y,data:s}}}};function xu(t){return t==="x"?"y":"x"}const Lu=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:E=>{let{x:S,y:F}=E;return{x:S,y:F}}},...c}=t,a={x:n,y:r},u=await il(e,c),f=br(Nn(s)),d=xu(f);let p=a[f],h=a[d];if(i){const E=f==="y"?"top":"left",S=f==="y"?"bottom":"right",F=p+u[E],k=p-u[S];p=ss(F,p,k)}if(o){const E=d==="y"?"top":"left",S=d==="y"?"bottom":"right",F=h+u[E],k=h-u[S];h=ss(F,h,k)}const m=l.fn({...e,[f]:p,[d]:h});return{...m,data:{x:m.x-n,y:m.y-r}}}}};function dt(t){var e;return((e=t.ownerDocument)==null?void 0:e.defaultView)||window}function tt(t){return dt(t).getComputedStyle(t)}function Tt(t){return ol(t)?(t.nodeName||"").toLowerCase():""}let Vn;function sl(){if(Vn)return Vn;const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?(Vn=t.brands.map(e=>e.brand+"/"+e.version).join(" "),Vn):navigator.userAgent}function ut(t){return t instanceof dt(t).HTMLElement}function Ge(t){return t instanceof dt(t).Element}function ol(t){return t instanceof dt(t).Node}function ls(t){if(typeof ShadowRoot>"u")return!1;const e=dt(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function _r(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=tt(t);return/auto|scroll|overlay|hidden/.test(e+r+n)&&!["inline","contents"].includes(s)}function Uu(t){return["table","td","th"].includes(Tt(t))}function hi(t){const e=/firefox/i.test(sl()),n=tt(t),r=n.backdropFilter||n.WebkitBackdropFilter;return n.transform!=="none"||n.perspective!=="none"||(r?r!=="none":!1)||e&&n.willChange==="filter"||e&&(n.filter?n.filter!=="none":!1)||["transform","perspective"].some(s=>n.willChange.includes(s))||["paint","layout","strict","content"].some(s=>{const i=n.contain;return i!=null?i.includes(s):!1})}function ll(){return!/^((?!chrome|android).)*safari/i.test(sl())}function pi(t){return["html","body","#document"].includes(Tt(t))}const al={x:1,y:1};function An(t){const e=!Ge(t)&&t.contextElement?t.contextElement:Ge(t)?t:null;if(!e)return al;const n=e.getBoundingClientRect(),r=tt(e);let s=n.width/parseFloat(r.width),i=n.height/parseFloat(r.height);return(!s||!Number.isFinite(s))&&(s=1),(!i||!Number.isFinite(i))&&(i=1),{x:s,y:i}}function Ot(t,e,n,r){var s,i,o,l;e===void 0&&(e=!1),n===void 0&&(n=!1);const c=t.getBoundingClientRect();let a=al;e&&(r?Ge(r)&&(a=An(r)):a=An(t));const u=Ge(t)?dt(t):window,f=!ll()&&n,d=(c.left+(f&&(s=(i=u.visualViewport)==null?void 0:i.offsetLeft)!=null?s:0))/a.x,p=(c.top+(f&&(o=(l=u.visualViewport)==null?void 0:l.offsetTop)!=null?o:0))/a.y,h=c.width/a.x,m=c.height/a.y;return{width:h,height:m,top:p,right:d+h,bottom:p+m,left:d,x:d,y:p}}function Bt(t){return((ol(t)?t.ownerDocument:t.document)||window.document).documentElement}function yr(t){return Ge(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function cl(t){return Ot(Bt(t)).left+yr(t).scrollLeft}function Pu(t,e,n){const r=ut(e),s=Bt(e),i=Ot(t,!0,n==="fixed",e);let o={scrollLeft:0,scrollTop:0};const l={x:0,y:0};if(r||!r&&n!=="fixed")if((Tt(e)!=="body"||_r(s))&&(o=yr(e)),ut(e)){const c=Ot(e,!0);l.x=c.x+e.clientLeft,l.y=c.y+e.clientTop}else s&&(l.x=cl(s));return{x:i.left+o.scrollLeft-l.x,y:i.top+o.scrollTop-l.y,width:i.width,height:i.height}}function Rn(t){if(Tt(t)==="html")return t;const e=t.assignedSlot||t.parentNode||(ls(t)?t.host:null)||Bt(t);return ls(e)?e.host:e}function as(t){return!ut(t)||tt(t).position==="fixed"?null:t.offsetParent}function Du(t){let e=Rn(t);for(;ut(e)&&!pi(e);){if(hi(e))return e;e=Rn(e)}return null}function cs(t){const e=dt(t);let n=as(t);for(;n&&Uu(n)&&tt(n).position==="static";)n=as(n);return n&&(Tt(n)==="html"||Tt(n)==="body"&&tt(n).position==="static"&&!hi(n))?e:n||Du(t)||e}function Hu(t){if(ut(t))return{width:t.offsetWidth,height:t.offsetHeight};const e=Ot(t);return{width:e.width,height:e.height}}function Fu(t){let{rect:e,offsetParent:n,strategy:r}=t;const s=ut(n),i=Bt(n);if(n===i)return e;let o={scrollLeft:0,scrollTop:0},l={x:1,y:1};const c={x:0,y:0};if((s||!s&&r!=="fixed")&&((Tt(n)!=="body"||_r(i))&&(o=yr(n)),ut(n))){const a=Ot(n);l=An(n),c.x=a.x+n.clientLeft,c.y=a.y+n.clientTop}return{width:e.width*l.x,height:e.height*l.y,x:e.x*l.x-o.scrollLeft*l.x+c.x,y:e.y*l.y-o.scrollTop*l.y+c.y}}function zu(t,e){const n=dt(t),r=Bt(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,l=0,c=0;if(s){i=s.width,o=s.height;const a=ll();(a||!a&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:l,y:c}}const us=Math.min,wn=Math.max;function qu(t){var e;const n=Bt(t),r=yr(t),s=(e=t.ownerDocument)==null?void 0:e.body,i=wn(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=wn(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0);let l=-r.scrollLeft+cl(t);const c=-r.scrollTop;return tt(s||n).direction==="rtl"&&(l+=wn(n.clientWidth,s?s.clientWidth:0)-i),{width:i,height:o,x:l,y:c}}function ul(t){const e=Rn(t);return pi(e)?t.ownerDocument.body:ut(e)&&_r(e)?e:ul(e)}function Sn(t,e){var n;e===void 0&&(e=[]);const r=ul(t),s=r===((n=t.ownerDocument)==null?void 0:n.body),i=dt(r);return s?e.concat(i,i.visualViewport||[],_r(r)?r:[]):e.concat(r,Sn(r))}function Wu(t,e){const n=Ot(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=ut(t)?An(t):{x:1,y:1},o=t.clientWidth*i.x,l=t.clientHeight*i.y,c=s*i.x,a=r*i.y;return{top:a,left:c,right:c+o,bottom:a+l,x:c,y:a,width:o,height:l}}function fs(t,e,n){return e==="viewport"?or(zu(t,n)):Ge(e)?Wu(e,n):or(qu(Bt(t)))}function Vu(t,e){const n=e.get(t);if(n)return n;let r=Sn(t).filter(l=>Ge(l)&&Tt(l)!=="body"),s=null;const i=tt(t).position==="fixed";let o=i?Rn(t):t;for(;Ge(o)&&!pi(o);){const l=tt(o),c=hi(o);(i?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position))?r=r.filter(u=>u!==o):s=l,o=Rn(o)}return e.set(t,r),r}function Gu(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?Vu(e,this._c):[].concat(n),r],l=o[0],c=o.reduce((a,u)=>{const f=fs(e,u,s);return a.top=wn(f.top,a.top),a.right=us(f.right,a.right),a.bottom=us(f.bottom,a.bottom),a.left=wn(f.left,a.left),a},fs(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}const Ku={getClippingRect:Gu,convertOffsetParentRelativeRectToViewportRelativeRect:Fu,isElement:Ge,getDimensions:Hu,getOffsetParent:cs,getDocumentElement:Bt,getScale:An,async getElementRects(t){let{reference:e,floating:n,strategy:r}=t;const s=this.getOffsetParent||cs,i=this.getDimensions;return{reference:Pu(e,await s(n),r),floating:{x:0,y:0,...await i(n)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>tt(t).direction==="rtl"};function Ju(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=!0,animationFrame:l=!1}=r,c=s&&!l,a=c||i?[...Ge(t)?Sn(t):t.contextElement?Sn(t.contextElement):[],...Sn(e)]:[];a.forEach(h=>{c&&h.addEventListener("scroll",n,{passive:!0}),i&&h.addEventListener("resize",n)});let u=null;if(o){let h=!0;u=new ResizeObserver(()=>{h||n(),h=!1}),Ge(t)&&!l&&u.observe(t),!Ge(t)&&t.contextElement&&!l&&u.observe(t.contextElement),u.observe(e)}let f,d=l?Ot(t):null;l&&p();function p(){const h=Ot(t);d&&(h.x!==d.x||h.y!==d.y||h.width!==d.width||h.height!==d.height)&&n(),d=h,f=requestAnimationFrame(p)}return n(),()=>{var h;a.forEach(m=>{c&&m.removeEventListener("scroll",n),i&&m.removeEventListener("resize",n)}),(h=u)==null||h.disconnect(),u=null,l&&cancelAnimationFrame(f)}}const Xu=(t,e,n)=>{const r=new Map,s={platform:Ku,...n},i={...s.platform,_c:r};return Eu(t,e,{...s,platform:i})};function Zu(t){let e,n;const r={autoUpdate:!0};let s=t;const i=a=>({...r,...t||{},...a||{}}),o=a=>{e&&n&&(s=i(a),Xu(e,n,s).then(u=>{Object.assign(n.style,{position:u.strategy,left:`${u.x}px`,top:`${u.y}px`}),s!=null&&s.onComputed&&s.onComputed(u)}))};return[a=>{e=a,o()},(a,u)=>{let f;n=a,s=i(u),setTimeout(()=>o(u),0),o(u);const d=()=>{f&&(f(),f=void 0)},p=({autoUpdate:h}=s||{})=>{if(d(),h!==!1)return Ju(e,n,()=>o(s),h===!0?{}:h)};return f=p(),{update(h){o(h),f=p(h)},destroy(){d()}}},o]}function Yu({loadOptions:t,filterText:e,items:n,multiple:r,value:s,itemId:i,groupBy:o,filterSelectedItems:l,itemFilter:c,convertStringItemsToObjects:a,filterGroupedItems:u,label:f}){if(n&&t)return n;if(!n)return[];n&&n.length>0&&typeof n[0]!="object"&&(n=a(n));let d=n.filter(p=>{let h=c(p[f],e,p);return h&&r&&(s==null?void 0:s.length)&&(h=!s.some(m=>l?m[i]===p[i]:!1)),h});return o&&(d=u(d)),d}async function Qu({dispatch:t,loadOptions:e,convertStringItemsToObjects:n,filterText:r}){let s=await e(r).catch(i=>{console.warn("svelte-select loadOptions error :>> ",i),t("error",{type:"loadOptions",details:i})});if(s&&!s.cancelled)return s?(s&&s.length>0&&typeof s[0]!="object"&&(s=n(s)),t("loaded",{items:s})):s=[],{filteredItems:s,loading:!1,focused:!0,listOpen:!0}}function $u(t){let e,n;return{c(){e=At("svg"),n=At("path"),y(n,"fill","currentColor"),y(n,"d",`M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747
          3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0
          1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502
          0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0
          0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z`),y(e,"width","100%"),y(e,"height","100%"),y(e,"viewBox","0 0 20 20"),y(e,"focusable","false"),y(e,"aria-hidden","true"),y(e,"class","svelte-qbd276")},m(r,s){H(r,e,s),C(e,n)},p:re,i:re,o:re,d(r){r&&x(e)}}}class ef extends _e{constructor(e){super(),be(this,e,null,$u,me,{})}}function tf(t){let e,n;return{c(){e=At("svg"),n=At("path"),y(n,"fill","currentColor"),y(n,"d",`M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124
    l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z`),y(e,"width","100%"),y(e,"height","100%"),y(e,"viewBox","-2 -2 50 50"),y(e,"focusable","false"),y(e,"aria-hidden","true"),y(e,"role","presentation"),y(e,"class","svelte-whdbu1")},m(r,s){H(r,e,s),C(e,n)},p:re,i:re,o:re,d(r){r&&x(e)}}}class ar extends _e{constructor(e){super(),be(this,e,null,tf,me,{})}}function nf(t){let e,n;return{c(){e=At("svg"),n=At("circle"),y(n,"class","circle_path svelte-1p3nqvd"),y(n,"cx","50"),y(n,"cy","50"),y(n,"r","20"),y(n,"fill","none"),y(n,"stroke","currentColor"),y(n,"stroke-width","5"),y(n,"stroke-miterlimit","10"),y(e,"class","loading svelte-1p3nqvd"),y(e,"viewBox","25 25 50 50")},m(r,s){H(r,e,s),C(e,n)},p:re,i:re,o:re,d(r){r&&x(e)}}}class rf extends _e{constructor(e){super(),be(this,e,null,nf,me,{})}}const sf=t=>({value:t[0]&8}),ds=t=>({value:t[3]}),of=t=>({listOpen:t[0]&64}),hs=t=>({listOpen:t[6]}),lf=t=>({}),ps=t=>({}),af=t=>({}),gs=t=>({}),cf=t=>({selection:t[0]&8}),ms=t=>({selection:t[3]});function bs(t,e,n){const r=t.slice();return r[127]=e[n],r[129]=n,r}const uf=t=>({}),_s=t=>({}),ff=t=>({selection:t[0]&8}),ys=t=>({selection:t[127],index:t[129]}),df=t=>({}),vs=t=>({}),hf=t=>({}),ws=t=>({});function Ss(t,e,n){const r=t.slice();return r[127]=e[n],r[129]=n,r}const pf=t=>({item:t[0]&16777216}),Es=t=>({item:t[127],index:t[129]}),gf=t=>({filteredItems:t[0]&16777216}),ks=t=>({filteredItems:t[24]});function As(t){let e,n,r,s,i,o;const l=[_f,bf,mf],c=[];function a(u,f){return u[50].list?0:u[24].length>0?1:u[19]?-1:2}return~(n=a(t))&&(r=c[n]=l[n](t)),{c(){e=L("div"),r&&r.c(),y(e,"class","svelte-select-list svelte-18e845"),ne(e,"prefloat",t[28])},m(u,f){H(u,e,f),~n&&c[n].m(e,null),t[91](e),s=!0,i||(o=[Yn(t[49].call(null,e)),se(e,"scroll",t[41]),se(e,"pointerdown",ct(et(t[85]))),se(e,"pointerup",ct(et(t[86])))],i=!0)},p(u,f){let d=n;n=a(u),n===d?~n&&c[n].p(u,f):(r&&(Te(),j(c[d],1,1,()=>{c[d]=null}),Oe()),~n?(r=c[n],r?r.p(u,f):(r=c[n]=l[n](u),r.c()),A(r,1),r.m(e,null)):r=null),(!s||f[0]&268435456)&&ne(e,"prefloat",u[28])},i(u){s||(A(r),s=!0)},o(u){j(r),s=!1},d(u){u&&x(e),~n&&c[n].d(),t[91](null),i=!1,Ue(o)}}}function mf(t){let e;const n=t[80].empty,r=Ee(n,t,t[79],ws),s=r||yf();return{c(){s&&s.c()},m(i,o){s&&s.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o[2]&131072)&&Ae(r,n,i,i[79],e?ke(n,i[79],o,hf):Re(i[79]),ws)},i(i){e||(A(s,i),e=!0)},o(i){j(s,i),e=!1},d(i){s&&s.d(i)}}}function bf(t){let e,n,r=t[24],s=[];for(let o=0;o<r.length;o+=1)s[o]=Rs(Ss(t,r,o));const i=o=>j(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=Ke()},m(o,l){for(let c=0;c<s.length;c+=1)s[c].m(o,l);H(o,e,l),n=!0},p(o,l){if(l[0]&1627402376|l[1]&28672|l[2]&131072){r=o[24];let c;for(c=0;c<r.length;c+=1){const a=Ss(o,r,c);s[c]?(s[c].p(a,l),A(s[c],1)):(s[c]=Rs(a),s[c].c(),A(s[c],1),s[c].m(e.parentNode,e))}for(Te(),c=r.length;c<s.length;c+=1)i(c);Oe()}},i(o){if(!n){for(let l=0;l<r.length;l+=1)A(s[l]);n=!0}},o(o){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)j(s[l]);n=!1},d(o){$r(s,o),o&&x(e)}}}function _f(t){let e;const n=t[80].list,r=Ee(n,t,t[79],ks);return{c(){r&&r.c()},m(s,i){r&&r.m(s,i),e=!0},p(s,i){r&&r.p&&(!e||i[0]&16777216|i[2]&131072)&&Ae(r,n,s,s[79],e?ke(n,s[79],i,gf):Re(s[79]),ks)},i(s){e||(A(r,s),e=!0)},o(s){j(r,s),e=!1},d(s){r&&r.d(s)}}}function yf(t){let e;return{c(){e=L("div"),e.textContent="No options",y(e,"class","empty svelte-18e845")},m(n,r){H(n,e,r)},p:re,d(n){n&&x(e)}}}function vf(t){var r;let e=((r=t[127])==null?void 0:r[t[12]])+"",n;return{c(){n=ae(e)},m(s,i){H(s,n,i)},p(s,i){var o;i[0]&16781312&&e!==(e=((o=s[127])==null?void 0:o[s[12]])+"")&&xe(n,e)},d(s){s&&x(n)}}}function Rs(t){let e,n,r,s,i,o,l,c;const a=t[80].item,u=Ee(a,t,t[79],Es),f=u||vf(t);function d(){return t[88](t[129])}function p(){return t[89](t[129])}function h(){return t[90](t[127],t[129])}return{c(){var m;e=L("div"),n=L("div"),f&&f.c(),i=G(),y(n,"class","item svelte-18e845"),ne(n,"list-group-title",t[127].groupHeader),ne(n,"active",t[45](t[127],t[3],t[13])),ne(n,"first",jf(t[129])),ne(n,"hover",t[7]===t[129]),ne(n,"group-item",t[127].groupItem),ne(n,"not-selectable",((m=t[127])==null?void 0:m.selectable)===!1),y(e,"class","list-item svelte-18e845"),y(e,"tabindex","-1")},m(m,E){H(m,e,E),C(e,n),f&&f.m(n,null),C(e,i),o=!0,l||(c=[Yn(r=t[46].call(null,n,{scroll:t[45](t[127],t[3],t[13]),listDom:t[30]})),Yn(s=t[47].call(null,n,{scroll:t[29]===t[129],listDom:t[30]})),se(e,"mouseover",d),se(e,"focus",p),se(e,"click",ct(h)),se(e,"keydown",ct(et(t[87])))],l=!0)},p(m,E){var S;t=m,u?u.p&&(!o||E[0]&16777216|E[2]&131072)&&Ae(u,a,t,t[79],o?ke(a,t[79],E,pf):Re(t[79]),Es):f&&f.p&&(!o||E[0]&16781312)&&f.p(t,o?E:[-1,-1,-1,-1,-1]),r&&Yt(r.update)&&E[0]&1090527240&&r.update.call(null,{scroll:t[45](t[127],t[3],t[13]),listDom:t[30]}),s&&Yt(s.update)&&E[0]&1610612736&&s.update.call(null,{scroll:t[29]===t[129],listDom:t[30]}),(!o||E[0]&16777216)&&ne(n,"list-group-title",t[127].groupHeader),(!o||E[0]&16785416|E[1]&16384)&&ne(n,"active",t[45](t[127],t[3],t[13])),(!o||E[0]&128)&&ne(n,"hover",t[7]===t[129]),(!o||E[0]&16777216)&&ne(n,"group-item",t[127].groupItem),(!o||E[0]&16777216)&&ne(n,"not-selectable",((S=t[127])==null?void 0:S.selectable)===!1)},i(m){o||(A(f,m),o=!0)},o(m){j(f,m),o=!1},d(m){m&&x(e),f&&f.d(m),l=!1,Ue(c)}}}function Ts(t){let e,n,r,s,i;return{c(){e=L("span"),n=ae(t[32]),r=G(),s=L("span"),i=ae(t[31]),y(e,"id","aria-selection"),y(e,"class","svelte-18e845"),y(s,"id","aria-context"),y(s,"class","svelte-18e845")},m(o,l){H(o,e,l),C(e,n),H(o,r,l),H(o,s,l),C(s,i)},p(o,l){l[1]&2&&xe(n,o[32]),l[1]&1&&xe(i,o[31])},d(o){o&&x(e),o&&x(r),o&&x(s)}}}function Os(t){let e,n,r,s;const i=[Sf,wf],o=[];function l(c,a){return c[9]?0:1}return e=l(t),n=o[e]=i[e](t),{c(){n.c(),r=Ke()},m(c,a){o[e].m(c,a),H(c,r,a),s=!0},p(c,a){let u=e;e=l(c),e===u?o[e].p(c,a):(Te(),j(o[u],1,1,()=>{o[u]=null}),Oe(),n=o[e],n?n.p(c,a):(n=o[e]=i[e](c),n.c()),A(n,1),n.m(r.parentNode,r))},i(c){s||(A(n),s=!0)},o(c){j(n),s=!1},d(c){o[e].d(c),c&&x(r)}}}function wf(t){let e,n;const r=t[80].selection,s=Ee(r,t,t[79],ms),i=s||Ef(t);return{c(){e=L("div"),i&&i.c(),y(e,"class","selected-item svelte-18e845"),ne(e,"hide-selected-item",t[35])},m(o,l){H(o,e,l),i&&i.m(e,null),n=!0},p(o,l){s?s.p&&(!n||l[0]&8|l[2]&131072)&&Ae(s,r,o,o[79],n?ke(r,o[79],l,cf):Re(o[79]),ms):i&&i.p&&(!n||l[0]&4104)&&i.p(o,n?l:[-1,-1,-1,-1,-1]),(!n||l[1]&16)&&ne(e,"hide-selected-item",o[35])},i(o){n||(A(i,o),n=!0)},o(o){j(i,o),n=!1},d(o){o&&x(e),i&&i.d(o)}}}function Sf(t){let e,n,r=t[3],s=[];for(let o=0;o<r.length;o+=1)s[o]=Bs(bs(t,r,o));const i=o=>j(s[o],1,1,()=>{s[o]=null});return{c(){for(let o=0;o<s.length;o+=1)s[o].c();e=Ke()},m(o,l){for(let c=0;c<s.length;c+=1)s[c].m(o,l);H(o,e,l),n=!0},p(o,l){if(l[0]&67116040|l[1]&32|l[2]&131072){r=o[3];let c;for(c=0;c<r.length;c+=1){const a=bs(o,r,c);s[c]?(s[c].p(a,l),A(s[c],1)):(s[c]=Bs(a),s[c].c(),A(s[c],1),s[c].m(e.parentNode,e))}for(Te(),c=r.length;c<s.length;c+=1)i(c);Oe()}},i(o){if(!n){for(let l=0;l<r.length;l+=1)A(s[l]);n=!0}},o(o){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)j(s[l]);n=!1},d(o){$r(s,o),o&&x(e)}}}function Ef(t){let e=t[3][t[12]]+"",n;return{c(){n=ae(e)},m(r,s){H(r,n,s)},p(r,s){s[0]&4104&&e!==(e=r[3][r[12]]+"")&&xe(n,e)},d(r){r&&x(n)}}}function kf(t){let e=t[127][t[12]]+"",n;return{c(){n=ae(e)},m(r,s){H(r,n,s)},p(r,s){s[0]&4104&&e!==(e=r[127][r[12]]+"")&&xe(n,e)},d(r){r&&x(n)}}}function Cs(t){let e,n,r,s;const i=t[80]["multi-clear-icon"],o=Ee(i,t,t[79],_s),l=o||Af();function c(){return t[92](t[129])}return{c(){e=L("div"),l&&l.c(),y(e,"class","multi-item-clear svelte-18e845")},m(a,u){H(a,e,u),l&&l.m(e,null),n=!0,r||(s=[se(e,"pointerdown",ct(et(t[83]))),se(e,"click",c),se(e,"keydown",ct(et(t[84])))],r=!0)},p(a,u){t=a,o&&o.p&&(!n||u[2]&131072)&&Ae(o,i,t,t[79],n?ke(i,t[79],u,uf):Re(t[79]),_s)},i(a){n||(A(l,a),n=!0)},o(a){j(l,a),n=!1},d(a){a&&x(e),l&&l.d(a),r=!1,Ue(s)}}}function Af(t){let e,n;return e=new ar({}),{c(){Z(e.$$.fragment)},m(r,s){J(e,r,s),n=!0},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){X(e,r)}}}function Bs(t){let e,n,r,s,i,o,l;const c=t[80].selection,a=Ee(c,t,t[79],ys),u=a||kf(t);let f=!t[11]&&!t[10]&&ar&&Cs(t);function d(){return t[93](t[129])}return{c(){e=L("div"),n=L("span"),u&&u.c(),r=G(),f&&f.c(),s=G(),y(n,"class","multi-item-text svelte-18e845"),y(e,"class","multi-item svelte-18e845"),ne(e,"active",t[26]===t[129]),ne(e,"disabled",t[11])},m(p,h){H(p,e,h),C(e,n),u&&u.m(n,null),C(e,r),f&&f.m(e,null),C(e,s),i=!0,o||(l=[se(e,"click",et(d)),se(e,"keydown",ct(et(t[82])))],o=!0)},p(p,h){t=p,a?a.p&&(!i||h[0]&8|h[2]&131072)&&Ae(a,c,t,t[79],i?ke(c,t[79],h,ff):Re(t[79]),ys):u&&u.p&&(!i||h[0]&4104)&&u.p(t,i?h:[-1,-1,-1,-1,-1]),!t[11]&&!t[10]&&ar?f?(f.p(t,h),h[0]&3072&&A(f,1)):(f=Cs(t),f.c(),A(f,1),f.m(e,s)):f&&(Te(),j(f,1,1,()=>{f=null}),Oe()),(!i||h[0]&67108864)&&ne(e,"active",t[26]===t[129]),(!i||h[0]&2048)&&ne(e,"disabled",t[11])},i(p){i||(A(u,p),A(f),i=!0)},o(p){j(u,p),j(f),i=!1},d(p){p&&x(e),u&&u.d(p),f&&f.d(),o=!1,Ue(l)}}}function js(t){let e,n;const r=t[80]["loading-icon"],s=Ee(r,t,t[79],gs),i=s||Rf();return{c(){e=L("div"),i&&i.c(),y(e,"class","icon loading svelte-18e845"),y(e,"aria-hidden","true")},m(o,l){H(o,e,l),i&&i.m(e,null),n=!0},p(o,l){s&&s.p&&(!n||l[2]&131072)&&Ae(s,r,o,o[79],n?ke(r,o[79],l,af):Re(o[79]),gs)},i(o){n||(A(i,o),n=!0)},o(o){j(i,o),n=!1},d(o){o&&x(e),i&&i.d(o)}}}function Rf(t){let e,n;return e=new rf({}),{c(){Z(e.$$.fragment)},m(r,s){J(e,r,s),n=!0},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){X(e,r)}}}function Ms(t){let e,n,r,s;const i=t[80]["clear-icon"],o=Ee(i,t,t[79],ps),l=o||Tf();return{c(){e=L("button"),l&&l.c(),y(e,"class","icon clear-select svelte-18e845"),y(e,"tabindex","0")},m(c,a){H(c,e,a),l&&l.m(e,null),n=!0,r||(s=[se(e,"click",ct(et(t[22]))),se(e,"pointerdown",ct(et(t[81])))],r=!0)},p(c,a){o&&o.p&&(!n||a[2]&131072)&&Ae(o,i,c,c[79],n?ke(i,c[79],a,lf):Re(c[79]),ps)},i(c){n||(A(l,c),n=!0)},o(c){j(l,c),n=!1},d(c){c&&x(e),l&&l.d(c),r=!1,Ue(s)}}}function Tf(t){let e,n;return e=new ar({}),{c(){Z(e.$$.fragment)},m(r,s){J(e,r,s),n=!0},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){X(e,r)}}}function Ns(t){let e,n;const r=t[80]["chevron-icon"],s=Ee(r,t,t[79],hs),i=s||Of();return{c(){e=L("div"),i&&i.c(),y(e,"class","icon chevron svelte-18e845"),y(e,"aria-hidden","true")},m(o,l){H(o,e,l),i&&i.m(e,null),n=!0},p(o,l){s&&s.p&&(!n||l[0]&64|l[2]&131072)&&Ae(s,r,o,o[79],n?ke(r,o[79],l,of):Re(o[79]),hs)},i(o){n||(A(i,o),n=!0)},o(o){j(i,o),n=!1},d(o){o&&x(e),i&&i.d(o)}}}function Of(t){let e,n;return e=new ef({}),{c(){Z(e.$$.fragment)},m(r,s){J(e,r,s),n=!0},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){X(e,r)}}}function Is(t){let e;const n=t[80].required,r=Ee(n,t,t[79],ds),s=r||Cf();return{c(){s&&s.c()},m(i,o){s&&s.m(i,o),e=!0},p(i,o){r&&r.p&&(!e||o[0]&8|o[2]&131072)&&Ae(r,n,i,i[79],e?ke(n,i[79],o,sf):Re(i[79]),ds)},i(i){e||(A(s,i),e=!0)},o(i){j(s,i),e=!1},d(i){s&&s.d(i)}}}function Cf(t){let e;return{c(){e=L("select"),y(e,"class","required svelte-18e845"),e.required=!0},m(n,r){H(n,e,r)},p:re,d(n){n&&x(e)}}}function Bf(t){let e,n,r,s,i,o,l,c,a,u,f,d,p,h,m,E,S,F,k,D,B,z,R=t[6]&&As(t),w=t[2]&&Ts(t);const q=t[80].prepend,K=Ee(q,t,t[79],vs);let v=t[25]&&Os(t),Q=[{readOnly:u=!t[17]},t[27],{placeholder:t[33]},{style:t[18]},{disabled:t[11]}],ie={};for(let O=0;O<Q.length;O+=1)ie=kt(ie,Q[O]);let b=t[5]&&js(t),T=t[34]&&Ms(t),_=t[20]&&Ns(t),U=t[16]&&(!t[3]||t[3].length===0)&&Is(t);return{c(){e=L("div"),R&&R.c(),n=G(),r=L("span"),w&&w.c(),s=G(),i=L("div"),K&&K.c(),o=G(),l=L("div"),v&&v.c(),c=G(),a=L("input"),f=G(),d=L("div"),b&&b.c(),p=G(),T&&T.c(),h=G(),_&&_.c(),m=G(),E=L("input"),F=G(),U&&U.c(),y(r,"aria-live","polite"),y(r,"aria-atomic","false"),y(r,"aria-relevant","additions text"),y(r,"class","a11y-text svelte-18e845"),y(i,"class","prepend svelte-18e845"),Qn(a,ie),ne(a,"svelte-18e845",!0),y(l,"class","value-container svelte-18e845"),y(d,"class","indicators svelte-18e845"),y(E,"name",t[8]),y(E,"type","hidden"),E.value=S=t[3]?JSON.stringify(t[3]):null,y(E,"class","svelte-18e845"),y(e,"class",k="svelte-select "+t[21]+" svelte-18e845"),y(e,"style",t[14]),ne(e,"multi",t[9]),ne(e,"disabled",t[11]),ne(e,"focused",t[2]),ne(e,"list-open",t[6]),ne(e,"show-chevron",t[20]),ne(e,"error",t[15])},m(O,N){H(O,e,N),R&&R.m(e,null),C(e,n),C(e,r),w&&w.m(r,null),C(e,s),C(e,i),K&&K.m(i,null),C(e,o),C(e,l),v&&v.m(l,null),C(l,c),C(l,a),a.autofocus&&a.focus(),t[94](a),Qt(a,t[4]),C(e,f),C(e,d),b&&b.m(d,null),C(d,p),T&&T.m(d,null),C(d,h),_&&_.m(d,null),C(e,m),C(e,E),C(e,F),U&&U.m(e,null),t[96](e),D=!0,B||(z=[se(window,"click",t[42]),se(window,"keydown",t[37]),se(a,"keydown",t[37]),se(a,"blur",t[39]),se(a,"focus",t[38]),se(a,"input",t[95]),se(e,"pointerup",et(t[40])),Yn(t[48].call(null,e))],B=!0)},p(O,N){O[6]?R?(R.p(O,N),N[0]&64&&A(R,1)):(R=As(O),R.c(),A(R,1),R.m(e,n)):R&&(Te(),j(R,1,1,()=>{R=null}),Oe()),O[2]?w?w.p(O,N):(w=Ts(O),w.c(),w.m(r,null)):w&&(w.d(1),w=null),K&&K.p&&(!D||N[2]&131072)&&Ae(K,q,O,O[79],D?ke(q,O[79],N,df):Re(O[79]),vs),O[25]?v?(v.p(O,N),N[0]&33554432&&A(v,1)):(v=Os(O),v.c(),A(v,1),v.m(l,c)):v&&(Te(),j(v,1,1,()=>{v=null}),Oe()),Qn(a,ie=ti(Q,[(!D||N[0]&131072&&u!==(u=!O[17]))&&{readOnly:u},N[0]&134217728&&O[27],(!D||N[1]&4)&&{placeholder:O[33]},(!D||N[0]&262144)&&{style:O[18]},(!D||N[0]&2048)&&{disabled:O[11]}])),N[0]&16&&a.value!==O[4]&&Qt(a,O[4]),ne(a,"svelte-18e845",!0),O[5]?b?(b.p(O,N),N[0]&32&&A(b,1)):(b=js(O),b.c(),A(b,1),b.m(d,p)):b&&(Te(),j(b,1,1,()=>{b=null}),Oe()),O[34]?T?(T.p(O,N),N[1]&8&&A(T,1)):(T=Ms(O),T.c(),A(T,1),T.m(d,h)):T&&(Te(),j(T,1,1,()=>{T=null}),Oe()),O[20]?_?(_.p(O,N),N[0]&1048576&&A(_,1)):(_=Ns(O),_.c(),A(_,1),_.m(d,null)):_&&(Te(),j(_,1,1,()=>{_=null}),Oe()),(!D||N[0]&256)&&y(E,"name",O[8]),(!D||N[0]&8&&S!==(S=O[3]?JSON.stringify(O[3]):null))&&(E.value=S),O[16]&&(!O[3]||O[3].length===0)?U?(U.p(O,N),N[0]&65544&&A(U,1)):(U=Is(O),U.c(),A(U,1),U.m(e,null)):U&&(Te(),j(U,1,1,()=>{U=null}),Oe()),(!D||N[0]&2097152&&k!==(k="svelte-select "+O[21]+" svelte-18e845"))&&y(e,"class",k),(!D||N[0]&16384)&&y(e,"style",O[14]),(!D||N[0]&2097664)&&ne(e,"multi",O[9]),(!D||N[0]&2099200)&&ne(e,"disabled",O[11]),(!D||N[0]&2097156)&&ne(e,"focused",O[2]),(!D||N[0]&2097216)&&ne(e,"list-open",O[6]),(!D||N[0]&3145728)&&ne(e,"show-chevron",O[20]),(!D||N[0]&2129920)&&ne(e,"error",O[15])},i(O){D||(A(R),A(K,O),A(v),A(b),A(T),A(_),A(U),D=!0)},o(O){j(R),j(K,O),j(v),j(b),j(T),j(_),j(U),D=!1},d(O){O&&x(e),R&&R.d(),w&&w.d(),K&&K.d(O),v&&v.d(),t[94](null),b&&b.d(),T&&T.d(),_&&_.d(),U&&U.d(),t[96](null),B=!1,Ue(z)}}}function xs(t){return t.map((e,n)=>({index:n,value:e,label:`${e}`}))}function jf(t){return t===0}function Mf(t){return t.groupHeader&&t.selectable||t.selectable||!t.hasOwnProperty("selectable")}function Nf(t,e,n){let r,s,i,o,l,c,a,u,f,{$$slots:d={},$$scope:p}=e;const h=ma(d),m=sn();let{justValue:E=null}=e,{filter:S=Yu}=e,{getItems:F=Qu}=e,{id:k=null}=e,{name:D=null}=e,{container:B=void 0}=e,{input:z=void 0}=e,{multiple:R=!1}=e,{multiFullItemClearable:w=!1}=e,{disabled:q=!1}=e,{focused:K=!1}=e,{value:v=null}=e,{filterText:Q=""}=e,{placeholder:ie="Please select"}=e,{placeholderAlwaysShow:b=!1}=e,{items:T=null}=e,{label:_="label"}=e,{itemFilter:U=(g,V)=>`${g}`.toLowerCase().includes(V.toLowerCase())}=e,{groupBy:O=void 0}=e,{groupFilter:N=g=>g}=e,{groupHeaderSelectable:ue=!1}=e,{itemId:ee="value"}=e,{loadOptions:Y=void 0}=e,{containerStyles:Fe=""}=e,{hasError:Ce=!1}=e,{filterSelectedItems:Pe=!0}=e,{required:ht=!1}=e,{createGroupHeaderItem:nt=(g,V)=>({value:g,[_]:g})}=e;const Sr=()=>a;let{searchable:Ft=!0}=e,{inputStyles:In=""}=e,{clearable:an=!0}=e,{loading:Je=!1}=e,{listOpen:de=!1}=e,Xe,{debounce:cn=(g,V=1)=>{clearTimeout(Xe),Xe=setTimeout(g,V)}}=e,{debounceWait:jt=300}=e,{hideEmptyState:$=!1}=e,{inputAttributes:Mt={}}=e,{listAutoWidth:we=!0}=e,{showChevron:he=!1}=e,{listOffset:pt=5}=e,{hoverItemIndex:ce=0}=e,{floatingConfig:gt={}}=e,{class:zt=""}=e,I,W,te,oe;function Ne(){if(typeof v=="string"){let g=T.find(V=>V[ee]===v);n(3,v=g||{[ee]:v,label:v})}else R&&Array.isArray(v)&&v.length>0&&n(3,v=v.map(g=>typeof g=="string"?{value:g,label:g}:g))}let Le;function Er(){n(27,Le=Object.assign({autocapitalize:"none",autocomplete:"off",autocorrect:"off",spellcheck:!1,tabindex:0,type:"text","aria-autocomplete":"list"},Mt)),k&&n(27,Le.id=k,Le),Ft||n(27,Le.readonly=!0,Le)}function xn(g){const V=[],Se={};g.forEach(qt=>{const st=O(qt);V.includes(st)||(V.push(st),Se[st]=[],st&&Se[st].push(Object.assign(nt(st,qt),{id:st,groupHeader:!0,selectable:ue}))),Se[st].push(Object.assign({groupItem:!!st},qt))});const it=[];return N(V).forEach(qt=>{Se[qt]&&it.push(...Se[qt])}),it}function Ol(){if(R){JSON.stringify(v)!==JSON.stringify(W)&&Ei()&&m("input",v);return}(!W||JSON.stringify(v[ee])!==JSON.stringify(W[ee]))&&m("input",v)}function Cl(){v&&(Array.isArray(v)?n(3,v=[...v]):n(3,v=[v]))}function Bl(){v&&n(3,v=null)}function jl(){const g=a.findIndex(V=>V[ee]===v[ee]);Si(g,!0)}function Ml(g){m("hoverItem",g)}function Si(g=0,V){n(7,ce=g),!V&&O&&a[ce]&&!a[ce].selectable&&Un(1)}function Nl(){!Y&&Q.length===0||(Y?cn(async function(){n(5,Je=!0);let g=await F({dispatch:m,loadOptions:Y,convertStringItemsToObjects:xs,filterText:Q});g?(n(5,Je=g.loading),n(6,de=de?g.listOpen:Q.length>0),n(2,K=de&&g.focused),n(51,T=O?xn(g.filteredItems):g.filteredItems)):(n(5,Je=!1),n(2,K=!0),n(6,de=!0))},jt):(n(6,de=!0),R&&n(26,I=void 0)))}function Il(g){de&&m("filter",g)}Ta(async()=>{n(76,W=v),n(77,te=Q),n(78,oe=R)});function xl(){return R?v?v.map(g=>g[ee]):null:v&&v[ee]}function Ei(){let g=!0;if(v){const V=[],Se=[];v.forEach(it=>{V.includes(it[ee])?g=!1:(V.push(it[ee]),Se.push(it))}),g||n(3,v=Se)}return g}function ki(g){let V=g?g[ee]:v[ee];return T.find(Se=>Se[ee]===V)}function Ll(g){!g||g.length===0||g.some(V=>typeof V!="object")||!v||(R?v.some(V=>!V||!V[ee]):!v[ee])||(Array.isArray(v)?n(3,v=v.map(V=>ki(V)||V)):n(3,v=ki()||v))}async function Ln(g){const V=v[g];v.length===1?n(3,v=void 0):n(3,v=v.filter(Se=>Se!==V)),m("clear",V)}function Ul(g){if(!!K)switch(g.stopPropagation(),g.key){case"Escape":g.preventDefault(),rt();break;case"Enter":if(g.preventDefault(),de){if(a.length===0)break;const V=a[ce];if(v&&!R&&v[ee]===V[ee]){rt();break}else Cr(a[ce])}break;case"ArrowDown":g.preventDefault(),de?Un(1):(n(6,de=!0),n(26,I=void 0));break;case"ArrowUp":g.preventDefault(),de?Un(-1):(n(6,de=!0),n(26,I=void 0));break;case"Tab":if(de&&K){if(a.length===0||v&&v[ee]===a[ce][ee])return rt();g.preventDefault(),Cr(a[ce]),rt()}break;case"Backspace":if(!R||Q.length>0)return;if(R&&v&&v.length>0){if(Ln(I!==void 0?I:v.length-1),I===0||I===void 0)break;n(26,I=v.length>I?I-1:void 0)}break;case"ArrowLeft":if(!v||!R||Q.length>0)return;I===void 0?n(26,I=v.length-1):v.length>I&&I!==0&&n(26,I-=1);break;case"ArrowRight":if(!v||!R||Q.length>0||I===void 0)return;I===v.length-1?n(26,I=void 0):I<v.length-1&&n(26,I+=1);break}}function kr(g){g&&m("focus",g),z.focus(),n(2,K=!0)}async function Ai(g){Or||(de||K)&&(m("blur",g),rt(),n(2,K=!1),n(26,I=void 0),z.blur())}function Pl(){q||(n(6,de=!de),de&&!K&&kr())}function Dl(){n(3,v=void 0),rt(),m("clear",v),kr()}ei(()=>{de&&n(2,K=!0),K&&z&&z.focus()});function Hl(g){if(g){n(4,Q="");const V=Object.assign({},g);(!V.groupHeader||V.selectable)&&(R?n(3,v=v?v.concat([V]):[V]):n(3,v=V),n(3,v),setTimeout(()=>{rt(),n(26,I=void 0),m("change",v)}))}}function rt(){n(4,Q=""),n(6,de=!1)}let{ariaValues:Ar=g=>`Option ${g}, selected.`}=e,{ariaListOpen:Rr=(g,V)=>`You are currently focused on option ${g}. There are ${V} results available.`}=e,{ariaFocused:Tr=()=>"Select is focused, type to refine list, press down to open the menu."}=e;function Fl(g){let V;return g&&v.length>0?V=v.map(Se=>Se[_]).join(", "):V=v[_],Ar(V)}function zl(){if(!a||a.length===0)return"";let g=a[ce];if(de&&g){let V=a?a.length:0;return Rr(g[_],V)}else return Tr()}let ze=null,Ri;function Ti(){clearTimeout(Ri),Ri=setTimeout(()=>{Or=!1},100)}function ql(g){B&&!B.contains(g.target)&&!(ze!=null&&ze.contains(g.target))&&Ai()}Ca(()=>{ze==null||ze.remove()});let Or=!1;function Cr(g){g.isCreator||g.selectable===!1||Hl(g)}function Br(g){Or||n(7,ce=g)}function Oi(g){const{item:V,i:Se}=g;if((V==null?void 0:V.selectable)!==!1){if(v&&!R&&v[ee]===V[ee])return rt();Mf(V)&&(n(7,ce=Se),Cr(V))}}function Un(g){if(a.filter(it=>!Object.hasOwn(it,"selectable")||it.selectable===!0).length===0)return n(7,ce=0);g>0&&ce===a.length-1?n(7,ce=0):g<0&&ce===0?n(7,ce=a.length-1):n(7,ce=ce+g);const Se=a[ce];if(Se&&Se.selectable===!1){(g===1||g===-1)&&Un(g);return}}function Wl(g,V,Se){if(!R)return V&&V[Se]===g[Se]}const Vl=Ci,Gl=Ci;function Ci(g){return{update(V){V.scroll&&(Ti(),g.scrollIntoView({behavior:"auto",block:"nearest",inline:"start"}))}}}function Kl(){const{width:g}=B.getBoundingClientRect();n(23,ze.style.width=we?g+"px":"auto",ze)}let Bi={strategy:"absolute",placement:"bottom-start",middleware:[Iu(pt),Mu(),Lu()],autoUpdate:!1};const[Jl,Xl,Zl]=Zu(Bi);let jr=!0;function Yl(g,V){if(!g||!V)return n(28,jr=!0);setTimeout(()=>{n(28,jr=!1)},0)}function Ql(g){qe.call(this,t,g)}function $l(g){qe.call(this,t,g)}function ea(g){qe.call(this,t,g)}function ta(g){qe.call(this,t,g)}function na(g){qe.call(this,t,g)}function ra(g){qe.call(this,t,g)}function ia(g){qe.call(this,t,g)}const sa=g=>Br(g),oa=g=>Br(g),la=(g,V)=>Oi({item:g,i:V});function aa(g){ye[g?"unshift":"push"](()=>{ze=g,n(23,ze)})}const ca=g=>Ln(g),ua=g=>w?Ln(g):{};function fa(g){ye[g?"unshift":"push"](()=>{z=g,n(1,z)})}function da(){Q=this.value,n(4,Q)}function ha(g){ye[g?"unshift":"push"](()=>{B=g,n(0,B)})}return t.$$set=g=>{"justValue"in g&&n(52,E=g.justValue),"filter"in g&&n(53,S=g.filter),"getItems"in g&&n(54,F=g.getItems),"id"in g&&n(55,k=g.id),"name"in g&&n(8,D=g.name),"container"in g&&n(0,B=g.container),"input"in g&&n(1,z=g.input),"multiple"in g&&n(9,R=g.multiple),"multiFullItemClearable"in g&&n(10,w=g.multiFullItemClearable),"disabled"in g&&n(11,q=g.disabled),"focused"in g&&n(2,K=g.focused),"value"in g&&n(3,v=g.value),"filterText"in g&&n(4,Q=g.filterText),"placeholder"in g&&n(56,ie=g.placeholder),"placeholderAlwaysShow"in g&&n(57,b=g.placeholderAlwaysShow),"items"in g&&n(51,T=g.items),"label"in g&&n(12,_=g.label),"itemFilter"in g&&n(58,U=g.itemFilter),"groupBy"in g&&n(59,O=g.groupBy),"groupFilter"in g&&n(60,N=g.groupFilter),"groupHeaderSelectable"in g&&n(61,ue=g.groupHeaderSelectable),"itemId"in g&&n(13,ee=g.itemId),"loadOptions"in g&&n(62,Y=g.loadOptions),"containerStyles"in g&&n(14,Fe=g.containerStyles),"hasError"in g&&n(15,Ce=g.hasError),"filterSelectedItems"in g&&n(63,Pe=g.filterSelectedItems),"required"in g&&n(16,ht=g.required),"createGroupHeaderItem"in g&&n(64,nt=g.createGroupHeaderItem),"searchable"in g&&n(17,Ft=g.searchable),"inputStyles"in g&&n(18,In=g.inputStyles),"clearable"in g&&n(66,an=g.clearable),"loading"in g&&n(5,Je=g.loading),"listOpen"in g&&n(6,de=g.listOpen),"debounce"in g&&n(67,cn=g.debounce),"debounceWait"in g&&n(68,jt=g.debounceWait),"hideEmptyState"in g&&n(19,$=g.hideEmptyState),"inputAttributes"in g&&n(69,Mt=g.inputAttributes),"listAutoWidth"in g&&n(70,we=g.listAutoWidth),"showChevron"in g&&n(20,he=g.showChevron),"listOffset"in g&&n(71,pt=g.listOffset),"hoverItemIndex"in g&&n(7,ce=g.hoverItemIndex),"floatingConfig"in g&&n(72,gt=g.floatingConfig),"class"in g&&n(21,zt=g.class),"ariaValues"in g&&n(73,Ar=g.ariaValues),"ariaListOpen"in g&&n(74,Rr=g.ariaListOpen),"ariaFocused"in g&&n(75,Tr=g.ariaFocused),"$$scope"in g&&n(79,p=g.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&8|t.$$.dirty[1]&1048576&&v&&Ne(),t.$$.dirty[0]&131072|t.$$.dirty[2]&128&&(Mt||!Ft)&&Er(),t.$$.dirty[0]&512&&R&&Cl(),t.$$.dirty[0]&512|t.$$.dirty[2]&65536&&oe&&!R&&Bl(),t.$$.dirty[0]&520&&R&&v&&v.length>1&&Ei(),t.$$.dirty[0]&8&&v&&Ol(),t.$$.dirty[0]&520|t.$$.dirty[2]&16384&&!v&&R&&W&&m("input",v),t.$$.dirty[0]&6&&!K&&z&&rt(),t.$$.dirty[0]&16|t.$$.dirty[2]&32768&&Q!==te&&Nl(),t.$$.dirty[0]&12824|t.$$.dirty[1]&407896064|t.$$.dirty[2]&3&&n(24,a=S({loadOptions:Y,filterText:Q,items:T,multiple:R,value:v,itemId:ee,groupBy:O,label:_,filterSelectedItems:Pe,itemFilter:U,convertStringItemsToObjects:xs,filterGroupedItems:xn})),t.$$.dirty[0]&16777800&&!R&&de&&v&&a&&jl(),t.$$.dirty[0]&576&&de&&R&&n(7,ce=0),t.$$.dirty[0]&128&&Ml(ce),t.$$.dirty[0]&520&&n(25,r=R?v&&v.length>0:v),t.$$.dirty[0]&33554448&&n(35,s=r&&Q.length>0),t.$$.dirty[0]&33556512|t.$$.dirty[2]&16&&n(34,i=r&&an&&!q&&!Je),t.$$.dirty[0]&520|t.$$.dirty[1]&100663296&&n(33,o=b&&R?ie:v?"":ie),t.$$.dirty[0]&520&&n(32,l=v?Fl(R):""),t.$$.dirty[0]&16777412&&n(31,c=zl()),t.$$.dirty[1]&1048576&&Ll(T),t.$$.dirty[0]&8712&&n(52,E=xl()),t.$$.dirty[0]&520|t.$$.dirty[2]&16384&&!R&&W&&!v&&m("input",v),t.$$.dirty[0]&16777800&&de&&a&&!R&&!v&&Si(),t.$$.dirty[0]&16777216&&Il(a),t.$$.dirty[2]&1024&&gt&&Zl(Object.assign(Bi,gt)),t.$$.dirty[0]&8388608&&n(30,u=!!ze),t.$$.dirty[0]&8388672&&Yl(ze,de),t.$$.dirty[0]&8388673&&de&&B&&ze&&Kl(),t.$$.dirty[0]&128&&n(29,f=ce)},[B,z,K,v,Q,Je,de,ce,D,R,w,q,_,ee,Fe,Ce,ht,Ft,In,$,he,zt,Dl,ze,a,r,I,Le,jr,f,u,c,l,o,i,s,Ln,Ul,kr,Ai,Pl,Ti,ql,Br,Oi,Wl,Vl,Gl,Jl,Xl,h,T,E,S,F,k,ie,b,U,O,N,ue,Y,Pe,nt,Sr,an,cn,jt,Mt,we,pt,gt,Ar,Rr,Tr,W,te,oe,p,d,Ql,$l,ea,ta,na,ra,ia,sa,oa,la,aa,ca,ua,fa,da,ha]}class fl extends _e{constructor(e){super(),be(this,e,Nf,Bf,me,{justValue:52,filter:53,getItems:54,id:55,name:8,container:0,input:1,multiple:9,multiFullItemClearable:10,disabled:11,focused:2,value:3,filterText:4,placeholder:56,placeholderAlwaysShow:57,items:51,label:12,itemFilter:58,groupBy:59,groupFilter:60,groupHeaderSelectable:61,itemId:13,loadOptions:62,containerStyles:14,hasError:15,filterSelectedItems:63,required:16,createGroupHeaderItem:64,getFilteredItems:65,searchable:17,inputStyles:18,clearable:66,loading:5,listOpen:6,debounce:67,debounceWait:68,hideEmptyState:19,inputAttributes:69,listAutoWidth:70,showChevron:20,listOffset:71,hoverItemIndex:7,floatingConfig:72,class:21,handleClear:22,ariaValues:73,ariaListOpen:74,ariaFocused:75},null,[-1,-1,-1,-1,-1])}get getFilteredItems(){return this.$$.ctx[65]}get handleClear(){return this.$$.ctx[22]}}function If(t){let e,n,r=t[10].created?"Create":"",s,i,o=t[10].label+"",l,c,a,u=t[10].description+"",f;return{c(){e=L("div"),n=L("span"),s=ae(r),i=G(),l=ae(o),c=G(),a=L("span"),f=ae(u),y(n,"class","label svelte-2scfht"),y(a,"class","description svelte-2scfht"),y(e,"class","item svelte-2scfht"),y(e,"slot","item")},m(d,p){H(d,e,p),C(e,n),C(n,s),C(n,i),C(n,l),C(e,c),C(e,a),C(a,f)},p(d,p){p&1024&&r!==(r=d[10].created?"Create":"")&&xe(s,r),p&1024&&o!==(o=d[10].label+"")&&xe(l,o),p&1024&&u!==(u=d[10].description+"")&&xe(f,u)},d(d){d&&x(e)}}}function xf(t){let e,n,r;function s(o){t[8](o)}let i={items:t[1],value:t[2],class:"class-select",placeholder:"Select or create class",$$slots:{item:[If,({item:o})=>({10:o}),({item:o})=>o?1024:0]},$$scope:{ctx:t}};return t[0]!==void 0&&(i.filterText=t[0]),e=new fl({props:i}),ye.push(()=>je(e,"filterText",s,t[0])),e.$on("change",t[3]),{c(){Z(e.$$.fragment)},m(o,l){J(e,o,l),r=!0},p(o,[l]){const c={};l&2&&(c.items=o[1]),l&4&&(c.value=o[2]),l&3072&&(c.$$scope={dirty:l,ctx:o}),!n&&l&1&&(n=!0,c.filterText=o[0],Be(()=>n=!1)),e.$set(c)},i(o){r||(A(e.$$.fragment,o),r=!0)},o(o){j(e.$$.fragment,o),r=!1},d(o){X(e,o)}}}function Lf(t,e,n){let r,s,i;fe(t,ft,p=>n(5,r=p)),fe(t,gu,p=>n(6,s=p)),fe(t,xt,p=>n(7,i=p));const o=sn();let{selectedSubject:l=""}=e,c="",a,u=[];const f=p=>{n(1,u=u.map(h=>(delete h.created,h))),console.log("selected",p.detail),o("select",p.detail)};function d(p){c=p,n(0,c)}return t.$$set=p=>{"selectedSubject"in p&&n(4,l=p.selectedSubject)},t.$$.update=()=>{t.$$.dirty&48&&l&&(async()=>{const h=await r.getResourceAsync(l);n(2,a={label:h.get(P.properties.shortname),subject:h.getSubject(),description:h.get(P.properties.description)})})(),t.$$.dirty&1&&c!==tn(c)&&n(0,c=tn(c)),t.$$.dirty&224&&Promise.all([...i,...s].map(p=>{try{return r.getResourceAsync(p)}catch{return}})).then(p=>{n(1,u=p.map(h=>({label:h.get(P.properties.shortname),subject:h.getSubject(),description:h.get(P.properties.description)})))}),t.$$.dirty&3&&(c.length>0?n(1,u=[{subject:"",label:c,description:"",created:!0},...u.filter(p=>!p.created)]):n(1,u=u.filter(p=>!p.created)))},[c,u,a,f,l,r,s,i,d]}class Uf extends _e{constructor(e){super(),be(this,e,Lf,xf,me,{selectedSubject:4})}}function Pf(t){let e,n,r,s;const i=t[2].default,o=Ee(i,t,t[1],null);return{c(){e=L("button"),o&&o.c(),y(e,"type","button"),e.disabled=t[0],y(e,"class","svelte-1h3vmhy")},m(l,c){H(l,e,c),o&&o.m(e,null),n=!0,r||(s=se(e,"click",t[3]),r=!0)},p(l,[c]){o&&o.p&&(!n||c&2)&&Ae(o,i,l,l[1],n?ke(i,l[1],c,null):Re(l[1]),null),(!n||c&1)&&(e.disabled=l[0])},i(l){n||(A(o,l),n=!0)},o(l){j(o,l),n=!1},d(l){l&&x(e),o&&o.d(l),r=!1,s()}}}function Df(t,e,n){let{$$slots:r={},$$scope:s}=e,{disabled:i=void 0}=e;function o(l){qe.call(this,t,l)}return t.$$set=l=>{"disabled"in l&&n(0,i=l.disabled),"$$scope"in l&&n(1,s=l.$$scope)},[i,s,r,o]}class vr extends _e{constructor(e){super(),be(this,e,Df,Pf,me,{disabled:0})}}function Ls(t,e,n){const r=t.slice();return r[27]=e[n],r}function Us(t){let e,n=t[27]+"",r,s,i;return{c(){e=L("option"),r=ae(n),s=G(),e.__value=ge[t[27]],e.value=e.__value,e.selected=i=ge[t[27]]===t[2]},m(o,l){H(o,e,l),C(e,r),C(e,s)},p(o,l){l&4&&i!==(i=ge[o[27]]===o[2])&&(e.selected=i)},d(o){o&&x(e)}}}function Hf(t){let e,n=t[14],r=[];for(let s=0;s<n.length;s+=1)r[s]=Us(Ls(t,n,s));return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=Ke()},m(s,i){for(let o=0;o<r.length;o+=1)r[o].m(s,i);H(s,e,i)},p(s,i){if(i&16388){n=s[14];let o;for(o=0;o<n.length;o+=1){const l=Ls(s,n,o);r[o]?r[o].p(l,i):(r[o]=Us(l),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(s){$r(r,s),s&&x(e)}}}function Ps(t){let e,n,r;function s(o){t[22](o)}let i={overflow:!0,$$slots:{controls:[Wf],content:[zf],title:[Ff]},$$scope:{ctx:t}};return t[4]!==void 0&&(i.show=t[4]),e=new nl({props:i}),ye.push(()=>je(e,"show",s,t[4])),{c(){Z(e.$$.fragment)},m(o,l){J(e,o,l),r=!0},p(o,l){const c={};l&1073741936&&(c.$$scope={dirty:l,ctx:o}),!n&&l&16&&(n=!0,c.show=o[4],Be(()=>n=!1)),e.$set(c)},i(o){r||(A(e.$$.fragment,o),r=!0)},o(o){j(e.$$.fragment,o),r=!1},d(o){X(e,o)}}}function Ff(t){let e,n,r;return{c(){e=L("h1"),n=ae("Configure "),r=ae(t[6])},m(s,i){H(s,e,i),C(e,n),C(e,r)},p(s,i){i&64&&xe(r,s[6])},d(s){s&&x(e)}}}function zf(t){let e,n,r,s;return r=new Uf({props:{selectedSubject:t[5]}}),r.$on("select",t[13]),{c(){e=L("label"),e.textContent="Constrain to class",n=G(),Z(r.$$.fragment),y(e,"for",""),y(e,"class","svelte-1s2kmwc")},m(i,o){H(i,e,o),H(i,n,o),J(r,i,o),s=!0},p(i,o){const l={};o&32&&(l.selectedSubject=i[5]),r.$set(l)},i(i){s||(A(r.$$.fragment,i),s=!0)},o(i){j(r.$$.fragment,i),s=!1},d(i){i&&x(e),i&&x(n),X(r,i)}}}function qf(t){let e;return{c(){e=ae("Done")},m(n,r){H(n,e,r)},d(n){n&&x(e)}}}function Wf(t){let e,n;return e=new vr({props:{$$slots:{default:[qf]},$$scope:{ctx:t}}}),e.$on("click",t[21]),{c(){Z(e.$$.fragment)},m(r,s){J(e,r,s),n=!0},p(r,s){const i={};s&1073741824&&(i.$$scope={dirty:s,ctx:r}),e.$set(i)},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){X(e,r)}}}function Vf(t){let e,n,r,s,i,o,l,c,a,u,f,d,p,h,m,E;function S(w){t[16](w)}let F={placeholder:"shortname",disabled:t[1]};t[6]!==void 0&&(F.value=t[6]),n=new en({props:F}),ye.push(()=>je(n,"value",S,t[6]));function k(w){t[17](w)}let D={placeholder:"description",disabled:t[1],required:!0};t[7]!==void 0&&(D.value=t[7]),i=new en({props:D}),ye.push(()=>je(i,"value",k,t[7]));function B(w){t[18](w)}let z={name:"type",disabled:t[1],$$slots:{default:[Hf]},$$scope:{ctx:t}};t[2]!==void 0&&(z.value=t[2]),c=new du({props:z}),ye.push(()=>je(c,"value",B,t[2])),f=new nn({props:{icon:$o,disabled:!t[3],title:"Configure"}}),f.$on("click",t[19]),p=new nn({props:{icon:Yo,title:"Remove property"}}),p.$on("click",t[20]);let R=t[3]&&Ps(t);return{c(){e=L("form"),Z(n.$$.fragment),s=G(),Z(i.$$.fragment),l=G(),Z(c.$$.fragment),u=G(),Z(f.$$.fragment),d=G(),Z(p.$$.fragment),h=G(),R&&R.c(),m=Ke(),y(e,"class","wrapper svelte-1s2kmwc")},m(w,q){H(w,e,q),J(n,e,null),C(e,s),J(i,e,null),C(e,l),J(c,e,null),C(e,u),J(f,e,null),C(e,d),J(p,e,null),H(w,h,q),R&&R.m(w,q),H(w,m,q),E=!0},p(w,[q]){const K={};q&2&&(K.disabled=w[1]),!r&&q&64&&(r=!0,K.value=w[6],Be(()=>r=!1)),n.$set(K);const v={};q&2&&(v.disabled=w[1]),!o&&q&128&&(o=!0,v.value=w[7],Be(()=>o=!1)),i.$set(v);const Q={};q&2&&(Q.disabled=w[1]),q&1073741828&&(Q.$$scope={dirty:q,ctx:w}),!a&&q&4&&(a=!0,Q.value=w[2],Be(()=>a=!1)),c.$set(Q);const ie={};q&8&&(ie.disabled=!w[3]),f.$set(ie),w[3]?R?(R.p(w,q),q&8&&A(R,1)):(R=Ps(w),R.c(),A(R,1),R.m(m.parentNode,m)):R&&(Te(),j(R,1,1,()=>{R=null}),Oe())},i(w){E||(A(n.$$.fragment,w),A(i.$$.fragment,w),A(c.$$.fragment,w),A(f.$$.fragment,w),A(p.$$.fragment,w),A(R),E=!0)},o(w){j(n.$$.fragment,w),j(i.$$.fragment,w),j(c.$$.fragment,w),j(f.$$.fragment,w),j(p.$$.fragment,w),j(R),E=!1},d(w){w&&x(e),X(n),X(i),X(c),X(f),X(p),w&&x(h),R&&R.d(w),w&&x(m)}}}function Gf(t,e,n){let r,s,i,o,l,c,a;fe(t,xt,b=>n(23,s=b)),fe(t,ft,b=>n(24,i=b)),fe(t,tl,b=>n(15,l=b));const u=sn();let{subject:f}=e,d,p=!1,h=!1,m=Go(f),E=$e(m,P.properties.shortname);fe(t,E,b=>n(6,c=b));let S=$e(m,P.properties.description);fe(t,S,b=>n(7,a=b));let F=$e(m,P.properties.datatype);fe(t,F,b=>n(2,o=b));let k=$e(m,P.properties.classType);fe(t,k,b=>n(5,r=b));const D=async b=>{const T=fi(),_=i.getResourceLoading(T,{newResource:!0});return await _.set(P.properties.shortname,b,i),await _.set(P.properties.description,"",i),await _.set(P.properties.isA,[P.classes.class],i),await _.set(P.properties.parent,ln,i),Ze(xt,s=[...s,T],s),T},B=async b=>{const{subject:T,label:_}=b.detail;T===""?Ze(k,r=await D(_),r):Ze(k,r=T,r)},z=Object.keys(ge);function R(b){c=b,E.set(c)}function w(b){a=b,S.set(a)}function q(b){o=b,F.set(o)}const K=()=>n(4,h=!0),v=()=>u("delete",f),Q=()=>n(4,h=!1);function ie(b){h=b,n(4,h)}return t.$$set=b=>{"subject"in b&&n(0,f=b.subject)},t.$$.update=()=>{t.$$.dirty&32769&&n(1,d=l.includes(f)),t.$$.dirty&6&&(!d&&(o===ge.ATOMIC_URL||o===ge.RESOURCEARRAY)?n(3,p=!0):(n(3,p=!1),Ze(k,r=void 0,r)))},[f,d,o,p,h,r,c,a,u,E,S,F,k,B,z,l,R,w,q,K,v,Q,ie]}class Kf extends _e{constructor(e){super(),be(this,e,Gf,Vf,me,{subject:0})}}const dl=t=>Object.entries(t).reduce((e,[n,r])=>typeof r=="object"?{...e,...dl(r)}:{...e,[n]:r},{}),cr=Ct([]);function Jf(t){let e,n=t[11].created?"Create":"",r,s,i=t[11].label+"",o,l,c,a=t[2][t[11].datatype]+"",u;return{c(){e=L("div"),r=ae(n),s=G(),o=ae(i),l=G(),c=L("span"),u=ae(a),y(c,"class","datatype svelte-1ysxfpo"),y(e,"class","item svelte-1ysxfpo"),y(e,"slot","item")},m(f,d){H(f,e,d),C(e,r),C(e,s),C(e,o),C(e,l),C(e,c),C(c,u)},p(f,d){d&2048&&n!==(n=f[11].created?"Create":"")&&xe(r,n),d&2048&&i!==(i=f[11].label+"")&&xe(o,i),d&2048&&a!==(a=f[2][f[11].datatype]+"")&&xe(u,a)},d(f){f&&x(e)}}}function Xf(t){let e,n,r,s;function i(l){t[7](l)}let o={items:t[0],placeholder:"Select or create property",class:"property-select",$$slots:{item:[Jf,({item:l})=>({11:l}),({item:l})=>l?2048:0]},$$scope:{ctx:t}};return t[1]!==void 0&&(o.filterText=t[1]),n=new fl({props:o}),ye.push(()=>je(n,"filterText",i,t[1])),n.$on("change",t[3]),n.$on("blur",t[8]),{c(){e=L("div"),Z(n.$$.fragment),y(e,"class","wrapper svelte-1ysxfpo")},m(l,c){H(l,e,c),J(n,e,null),s=!0},p(l,[c]){const a={};c&1&&(a.items=l[0]),c&6144&&(a.$$scope={dirty:c,ctx:l}),!r&&c&2&&(r=!0,a.filterText=l[1],Be(()=>r=!1)),n.$set(a)},i(l){s||(A(n.$$.fragment,l),s=!0)},o(l){j(n.$$.fragment,l),s=!1},d(l){l&&x(e),X(n)}}}function Zf(t,e,n){let r,s,i;fe(t,ft,h=>n(4,r=h)),fe(t,tl,h=>n(5,s=h)),fe(t,cr,h=>n(6,i=h));const o=sn(),l=Object.entries(ge).reduce((h,[m,E])=>(h[E]=m,h),{}),c=dl(P.properties);delete c.getAll;let a=[],u="";const f=h=>{n(0,a=a.map(m=>(delete m.created,m))),o("select",h.detail)};function d(h){u=h,n(1,u)}function p(h){qe.call(this,t,h)}return t.$$.update=()=>{t.$$.dirty&2&&u!==tn(u)&&n(1,u=tn(u)),t.$$.dirty&112&&Promise.all([...i,...s].map(h=>r.getResourceAsync(h))).then(h=>{n(0,a=h.map(m=>({label:m.get(P.properties.shortname),subject:m.getSubject(),datatype:m.get(P.properties.datatype)})))}),t.$$.dirty&3&&(u.length>0?n(0,a=[{subject:"",label:u,created:!0,datatype:ge.STRING},...a.filter(h=>!h.created)]):n(0,a=a.filter(h=>!h.created)))},[a,u,l,f,r,s,i,d,p]}class Yf extends _e{constructor(e){super(),be(this,e,Zf,Xf,me,{})}}function Ds(t,e,n){const r=t.slice();return r[9]=e[n],r}function Hs(t,e){let n,r,s;return r=new Kf({props:{subject:e[9]}}),r.$on("delete",e[3]),{key:t,first:null,c(){n=L("li"),Z(r.$$.fragment),this.first=n},m(i,o){H(i,n,o),J(r,n,null),s=!0},p(i,o){e=i;const l={};o&1&&(l.subject=e[9]),r.$set(l)},i(i){s||(A(r.$$.fragment,i),s=!0)},o(i){j(r.$$.fragment,i),s=!1},d(i){i&&x(n),X(r)}}}function Qf(t){let e,n;return e=new nn({props:{icon:Qo,title:"Add property"}}),e.$on("click",t[5]),{c(){Z(e.$$.fragment)},m(r,s){J(e,r,s),n=!0},p:re,i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){X(e,r)}}}function $f(t){let e,n;return e=new Yf({}),e.$on("select",t[2]),e.$on("blur",t[4]),{c(){Z(e.$$.fragment)},m(r,s){J(e,r,s),n=!0},p:re,i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){X(e,r)}}}function ed(t){let e,n=[],r=new Map,s,i,o,l,c,a=t[0];const u=h=>h[9];for(let h=0;h<a.length;h+=1){let m=Ds(t,a,h),E=u(m);r.set(E,n[h]=Hs(E,m))}const f=[$f,Qf],d=[];function p(h,m){return h[1]?0:1}return o=p(t),l=d[o]=f[o](t),{c(){e=L("ul");for(let h=0;h<n.length;h+=1)n[h].c();s=G(),i=L("li"),l.c(),y(e,"class","svelte-s3sb9i")},m(h,m){H(h,e,m);for(let E=0;E<n.length;E+=1)n[E].m(e,null);C(e,s),C(e,i),d[o].m(i,null),c=!0},p(h,[m]){m&9&&(a=h[0],Te(),n=So(n,m,u,1,h,a,r,e,wo,Hs,s,Ds),Oe());let E=o;o=p(h),o===E?d[o].p(h,m):(Te(),j(d[E],1,1,()=>{d[E]=null}),Oe(),l=d[o],l?l.p(h,m):(l=d[o]=f[o](h),l.c()),A(l,1),l.m(i,null))},i(h){if(!c){for(let m=0;m<a.length;m+=1)A(n[m]);A(l),c=!0}},o(h){for(let m=0;m<n.length;m+=1)j(n[m]);j(l),c=!1},d(h){h&&x(e);for(let m=0;m<n.length;m+=1)n[m].d();d[o].d()}}}function td(t,e,n){let r,s;fe(t,cr,d=>n(6,r=d)),fe(t,ft,d=>n(7,s=d));let{properties:i=[]}=e,o=!1;const l=async d=>{const p=fi(),h=s.getResourceLoading(p,{newResource:!0});return await h.set(P.properties.shortname,d,s),await h.set(P.properties.datatype,ge.STRING,s),await h.set(P.properties.isA,[P.classes.property],s),await h.set(P.properties.parent,ln,s),Ze(cr,r=[...r,p],r),p},c=async d=>{const{subject:p,label:h}=d.detail;p===""?n(0,i=[...i,await l(h)]):n(0,i=[...i,p]),n(1,o=!1)},a=d=>{n(0,i=i.filter(p=>p!==d.detail))},u=()=>n(1,o=!1),f=()=>n(1,o=!0);return t.$$set=d=>{"properties"in d&&n(0,i=d.properties)},[i,o,c,a,u,f]}class Fs extends _e{constructor(e){super(),be(this,e,td,ed,me,{properties:0})}}function nd(t){let e,n,r;return{c(){e=L("textarea"),y(e,"name",t[2]),y(e,"id",t[1]),e.required=t[3],y(e,"rows","10"),y(e,"class","svelte-vxqza9")},m(s,i){H(s,e,i),Qt(e,t[0]),n||(r=se(e,"input",t[4]),n=!0)},p(s,[i]){i&4&&y(e,"name",s[2]),i&2&&y(e,"id",s[1]),i&8&&(e.required=s[3]),i&1&&Qt(e,s[0])},i:re,o:re,d(s){s&&x(e),n=!1,r()}}}function rd(t,e,n){let{value:r=""}=e,{id:s=""}=e,{name:i=""}=e,{required:o=!1}=e;function l(){r=this.value,n(0,r)}return t.$$set=c=>{"value"in c&&n(0,r=c.value),"id"in c&&n(1,s=c.id),"name"in c&&n(2,i=c.name),"required"in c&&n(3,o=c.required)},[r,s,i,o,l]}class hl extends _e{constructor(e){super(),be(this,e,rd,nd,me,{value:0,id:1,name:2,required:3})}}function id(t){let e,n,r,s,i,o,l,c,a,u,f,d,p,h,m,E,S,F,k,D,B,z,R,w,q,K,v,Q,ie;r=new Mn({props:{data:$c,stroke:"none"}});function b(Y){t[10](Y)}let T={};t[1]!==void 0&&(T.title=t[1]),i=new lu({props:T}),ye.push(()=>je(i,"title",b,t[1])),a=new nn({props:{icon:Yo,title:"Delete class"}}),a.$on("click",t[11]);function _(Y){t[12](Y)}let U={};t[2]!==void 0&&(U.properties=t[2]),h=new Fs({props:U}),ye.push(()=>je(h,"properties",_,t[2]));function O(Y){t[13](Y)}let N={};t[3]!==void 0&&(N.properties=t[3]),D=new Fs({props:N}),ye.push(()=>je(D,"properties",O,t[3]));function ue(Y){t[14](Y)}let ee={required:!0};return t[4]!==void 0&&(ee.value=t[4]),K=new hl({props:ee}),ye.push(()=>je(K,"value",ue,t[4])),{c(){e=L("div"),n=L("div"),Z(r.$$.fragment),s=G(),Z(i.$$.fragment),l=G(),c=L("span"),Z(a.$$.fragment),u=G(),f=L("div"),d=L("h3"),d.textContent="Requires",p=G(),Z(h.$$.fragment),E=G(),S=L("div"),F=L("h3"),F.textContent="Recommends",k=G(),Z(D.$$.fragment),z=G(),R=L("div"),w=L("h3"),w.textContent="Description",q=G(),Z(K.$$.fragment),y(c,"class","delete-icon-wrapper svelte-1hwulyb"),Pn(n,"grid-area","title"),y(n,"class","title svelte-1hwulyb"),Pn(f,"grid-area","requires"),y(f,"class","form-container svelte-1hwulyb"),Pn(S,"grid-area","recommends"),y(S,"class","form-container svelte-1hwulyb"),Pn(R,"grid-area","description"),y(R,"class","form-container svelte-1hwulyb"),y(e,"class","wrapper svelte-1hwulyb")},m(Y,Fe){H(Y,e,Fe),C(e,n),J(r,n,null),C(n,s),J(i,n,null),C(n,l),C(n,c),J(a,c,null),C(e,u),C(e,f),C(f,d),C(f,p),J(h,f,null),C(e,E),C(e,S),C(S,F),C(S,k),J(D,S,null),C(e,z),C(e,R),C(R,w),C(R,q),J(K,R,null),ie=!0},p(Y,[Fe]){const Ce={};!o&&Fe&2&&(o=!0,Ce.title=Y[1],Be(()=>o=!1)),i.$set(Ce);const Pe={};!m&&Fe&4&&(m=!0,Pe.properties=Y[2],Be(()=>m=!1)),h.$set(Pe);const ht={};!B&&Fe&8&&(B=!0,ht.properties=Y[3],Be(()=>B=!1)),D.$set(ht);const nt={};!v&&Fe&16&&(v=!0,nt.value=Y[4],Be(()=>v=!1)),K.$set(nt)},i(Y){ie||(A(r.$$.fragment,Y),A(i.$$.fragment,Y),A(a.$$.fragment,Y),A(h.$$.fragment,Y),A(D.$$.fragment,Y),A(K.$$.fragment,Y),Rt(()=>{Q||(Q=$t(e,$i,{duration:200},!0)),Q.run(1)}),ie=!0)},o(Y){j(r.$$.fragment,Y),j(i.$$.fragment,Y),j(a.$$.fragment,Y),j(h.$$.fragment,Y),j(D.$$.fragment,Y),j(K.$$.fragment,Y),Q||(Q=$t(e,$i,{duration:200},!1)),Q.run(0),ie=!1},d(Y){Y&&x(e),X(r),X(i),X(a),X(h),X(D),X(K),Y&&Q&&Q.end()}}}function sd(t,e,n){let r,s,i,o;const l=sn();let{subject:c}=e,a=Go(c,{newResource:!0}),u=$e(a,P.properties.shortname);fe(t,u,B=>n(1,r=B));let f=$e(a,P.properties.description);fe(t,f,B=>n(4,o=B));let d=$e(a,P.properties.requires);fe(t,d,B=>n(2,s=B));let p=$e(a,P.properties.recommends);fe(t,p,B=>n(3,i=B));let h=$e(a,P.properties.isA),m=$e(a,P.properties.parent);h.set([P.classes.class]),m.set(ln);function E(B){r=B,u.set(r)}const S=()=>l("delete",c);function F(B){s=B,d.set(s)}function k(B){i=B,p.set(i)}function D(B){o=B,f.set(o)}return t.$$set=B=>{"subject"in B&&n(0,c=B.subject)},t.$$.update=()=>{t.$$.dirty&2&&r===void 0&&Ze(u,r="untitled",r)},[c,r,s,i,o,l,u,f,d,p,E,S,F,k,D]}class od extends _e{constructor(e){super(),be(this,e,sd,id,me,{subject:0})}}function zs(t,e,n){const r=t.slice();return r[3]=e[n],r}function qs(t,e){let n,r,s;return r=new od({props:{subject:e[3]}}),r.$on("delete",e[2]),{key:t,first:null,c(){n=Ke(),Z(r.$$.fragment),this.first=n},m(i,o){H(i,n,o),J(r,i,o),s=!0},p(i,o){e=i;const l={};o&1&&(l.subject=e[3]),r.$set(l)},i(i){s||(A(r.$$.fragment,i),s=!0)},o(i){j(r.$$.fragment,i),s=!1},d(i){i&&x(n),X(r,i)}}}function ld(t){let e,n,r;return e=new Mn({props:{data:Qo,stroke:"none"}}),{c(){Z(e.$$.fragment),n=ae(`
  New Class`)},m(s,i){J(e,s,i),H(s,n,i),r=!0},p:re,i(s){r||(A(e.$$.fragment,s),r=!0)},o(s){j(e.$$.fragment,s),r=!1},d(s){X(e,s),s&&x(n)}}}function ad(t){let e=[],n=new Map,r,s,i,o=t[0];const l=c=>c[3];for(let c=0;c<o.length;c+=1){let a=zs(t,o,c),u=l(a);n.set(u,e[c]=qs(u,a))}return s=new vr({props:{$$slots:{default:[ld]},$$scope:{ctx:t}}}),s.$on("click",t[1]),{c(){for(let c=0;c<e.length;c+=1)e[c].c();r=G(),Z(s.$$.fragment)},m(c,a){for(let u=0;u<e.length;u+=1)e[u].m(c,a);H(c,r,a),J(s,c,a),i=!0},p(c,[a]){a&5&&(o=c[0],Te(),e=So(e,a,l,1,c,o,n,r.parentNode,wo,qs,r,zs),Oe());const u={};a&64&&(u.$$scope={dirty:a,ctx:c}),s.$set(u)},i(c){if(!i){for(let a=0;a<o.length;a+=1)A(e[a]);A(s.$$.fragment,c),i=!0}},o(c){for(let a=0;a<e.length;a+=1)j(e[a]);j(s.$$.fragment,c),i=!1},d(c){for(let a=0;a<e.length;a+=1)e[a].d(c);c&&x(r),X(s,c)}}}function cd(t,e,n){let r;return fe(t,xt,o=>n(0,r=o)),[r,()=>{const o=fi();Ze(xt,r=[...r,o],r)},o=>{Ze(xt,r=r.filter(l=>l!==o.detail),r)}]}class ud extends _e{constructor(e){super(),be(this,e,cd,ad,me,{})}}const fd='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><g data-name="Layer 2"><rect width="24" height="24" opacity="0"/><path d="M16.24 22a1 1 0 0 1-1-1v-2.6a2.15 2.15 0 0 0-.54-1.66 1 1 0 0 1 .61-1.67C17.75 14.78 20 14 20 9.77a4 4 0 0 0-.67-2.22 2.75 2.75 0 0 1-.41-2.06 3.71 3.71 0 0 0 0-1.41 7.65 7.65 0 0 0-2.09 1.09 1 1 0 0 1-.84.15 10.15 10.15 0 0 0-5.52 0 1 1 0 0 1-.84-.15 7.4 7.4 0 0 0-2.11-1.09 3.52 3.52 0 0 0 0 1.41 2.84 2.84 0 0 1-.43 2.08 4.07 4.07 0 0 0-.67 2.23c0 3.89 1.88 4.93 4.7 5.29a1 1 0 0 1 .82.66 1 1 0 0 1-.21 1 2.06 2.06 0 0 0-.55 1.56V21a1 1 0 0 1-2 0v-.57a6 6 0 0 1-5.27-2.09 3.9 3.9 0 0 0-1.16-.88 1 1 0 1 1 .5-1.94 4.93 4.93 0 0 1 2 1.36c1 1 2 1.88 3.9 1.52a3.89 3.89 0 0 1 .23-1.58c-2.06-.52-5-2-5-7a6 6 0 0 1 1-3.33.85.85 0 0 0 .13-.62 5.69 5.69 0 0 1 .33-3.21 1 1 0 0 1 .63-.57c.34-.1 1.56-.3 3.87 1.2a12.16 12.16 0 0 1 5.69 0c2.31-1.5 3.53-1.31 3.86-1.2a1 1 0 0 1 .63.57 5.71 5.71 0 0 1 .33 3.22.75.75 0 0 0 .11.57 6 6 0 0 1 1 3.34c0 5.07-2.92 6.54-5 7a4.28 4.28 0 0 1 .22 1.67V21a1 1 0 0 1-.94 1z"/></g></svg>',dd=t=>({}),Ws=t=>({}),hd=t=>({id:t&1}),Vs=t=>({id:t[0]}),pd=t=>({}),Gs=t=>({});function gd(t){let e,n,r,s,i,o;const l=t[2].label,c=Ee(l,t,t[1],Gs),a=t[2].input,u=Ee(a,t,t[1],Vs),f=t[2].helper,d=Ee(f,t,t[1],Ws);return{c(){e=L("div"),n=L("label"),c&&c.c(),r=G(),u&&u.c(),s=G(),i=L("p"),d&&d.c(),y(n,"for",t[0]),y(n,"class","svelte-14ife37"),y(i,"class","helper svelte-14ife37"),y(e,"class","form-field svelte-14ife37")},m(p,h){H(p,e,h),C(e,n),c&&c.m(n,null),C(e,r),u&&u.m(e,null),C(e,s),C(e,i),d&&d.m(i,null),o=!0},p(p,[h]){c&&c.p&&(!o||h&2)&&Ae(c,l,p,p[1],o?ke(l,p[1],h,pd):Re(p[1]),Gs),(!o||h&1)&&y(n,"for",p[0]),u&&u.p&&(!o||h&3)&&Ae(u,a,p,p[1],o?ke(a,p[1],h,hd):Re(p[1]),Vs),d&&d.p&&(!o||h&2)&&Ae(d,f,p,p[1],o?ke(f,p[1],h,dd):Re(p[1]),Ws)},i(p){o||(A(c,p),A(u,p),A(d,p),o=!0)},o(p){j(c,p),j(u,p),j(d,p),o=!1},d(p){p&&x(e),c&&c.d(p),u&&u.d(p),d&&d.d(p)}}}function md(t,e,n){let{$$slots:r={},$$scope:s}=e,i="";return ei(()=>{n(0,i=Jo())}),t.$$set=o=>{"$$scope"in o&&n(1,s=o.$$scope)},[i,s,r]}class ur extends _e{constructor(e){super(),be(this,e,md,gd,me,{})}}function Ks(t){let e,n,r,s;return e=new ur({props:{$$slots:{helper:[yd],input:[_d,({id:i})=>({11:i}),({id:i})=>i?2048:0],label:[bd]},$$scope:{ctx:t}}}),r=new ur({props:{$$slots:{helper:[Sd],input:[wd,({id:i})=>({11:i}),({id:i})=>i?2048:0],label:[vd]},$$scope:{ctx:t}}}),{c(){Z(e.$$.fragment),n=G(),Z(r.$$.fragment)},m(i,o){J(e,i,o),H(i,n,o),J(r,i,o),s=!0},p(i,o){const l={};o&6146&&(l.$$scope={dirty:o,ctx:i}),e.$set(l);const c={};o&6148&&(c.$$scope={dirty:o,ctx:i}),r.$set(c)},i(i){s||(A(e.$$.fragment,i),A(r.$$.fragment,i),s=!0)},o(i){j(e.$$.fragment,i),j(r.$$.fragment,i),s=!1},d(i){X(e,i),i&&x(n),X(r,i)}}}function bd(t){let e;return{c(){e=ae("Server URL")},m(n,r){H(n,e,r)},d(n){n&&x(e)}}}function _d(t){let e,n,r;function s(o){t[9](o)}let i={id:t[11],placeholder:"https://example.com",required:!0};return t[1]!==void 0&&(i.value=t[1]),e=new en({props:i}),ye.push(()=>je(e,"value",s,t[1])),e.$on("blur",t[3]),{c(){Z(e.$$.fragment)},m(o,l){J(e,o,l),r=!0},p(o,l){const c={};l&2048&&(c.id=o[11]),!n&&l&2&&(n=!0,c.value=o[1],Be(()=>n=!1)),e.$set(c)},i(o){r||(A(e.$$.fragment,o),r=!0)},o(o){j(e.$$.fragment,o),r=!1},d(o){X(e,o)}}}function yd(t){let e;return{c(){e=ae("The url of the server to export to.")},m(n,r){H(n,e,r)},d(n){n&&x(e)}}}function vd(t){let e;return{c(){e=ae("Agent")},m(n,r){H(n,e,r)},d(n){n&&x(e)}}}function wd(t){let e,n,r;function s(o){t[10](o)}let i={id:t[11],placeholder:"Agent Secret"};return t[2]!==void 0&&(i.value=t[2]),e=new en({props:i}),ye.push(()=>je(e,"value",s,t[2])),{c(){Z(e.$$.fragment)},m(o,l){J(e,o,l),r=!0},p(o,l){const c={};l&2048&&(c.id=o[11]),!n&&l&4&&(n=!0,c.value=o[2],Be(()=>n=!1)),e.$set(c)},i(o){r||(A(e.$$.fragment,o),r=!0)},o(o){j(e.$$.fragment,o),r=!1},d(o){X(e,o)}}}function Sd(t){let e;return{c(){e=ae(`Agent used to commit changes to the server, leave empty to use the Public
      agent.`)},m(n,r){H(n,e,r)},d(n){n&&x(e)}}}function Ed(t){let e,n,r,s,i,o,l,c,a,u,f,d,p,h,m,E,S,F,k,D,B=t[0]==="remote"&&Ks(t);return{c(){e=L("div"),n=L("h3"),n.textContent="Export type:",r=G(),s=L("div"),i=L("span"),o=L("label"),o.textContent="JSON-AD",l=G(),c=L("input"),u=G(),f=L("span"),d=L("label"),d.textContent="Export to Server",p=G(),h=L("input"),E=G(),B&&B.c(),S=Ke(),y(o,"for","output-type-json"),y(c,"type","radio"),y(c,"name","output-type"),y(c,"id","output-type-json"),c.__value="json",c.value=c.__value,c.checked=a=t[0]==="json",t[7][0].push(c),y(d,"for","output-type-remote"),y(h,"type","radio"),y(h,"name","output-type"),y(h,"id","output-type-remote"),h.__value="remote",h.value=h.__value,h.checked=m=t[0]==="remote",t[7][0].push(h),y(s,"class","radio-group-wrapper svelte-1dtr8e5")},m(z,R){H(z,e,R),C(e,n),C(e,r),C(e,s),C(s,i),C(i,o),C(i,l),C(i,c),c.checked=c.__value===t[0],C(s,u),C(s,f),C(f,d),C(f,p),C(f,h),h.checked=h.__value===t[0],H(z,E,R),B&&B.m(z,R),H(z,S,R),F=!0,k||(D=[se(c,"change",t[6]),se(h,"change",t[8])],k=!0)},p(z,[R]){(!F||R&1&&a!==(a=z[0]==="json"))&&(c.checked=a),R&1&&(c.checked=c.__value===z[0]),(!F||R&1&&m!==(m=z[0]==="remote"))&&(h.checked=m),R&1&&(h.checked=h.__value===z[0]),z[0]==="remote"?B?(B.p(z,R),R&1&&A(B,1)):(B=Ks(z),B.c(),A(B,1),B.m(S.parentNode,S)):B&&(Te(),j(B,1,1,()=>{B=null}),Oe())},i(z){F||(A(B),F=!0)},o(z){j(B),F=!1},d(z){z&&x(e),t[7][0].splice(t[7][0].indexOf(c),1),t[7][0].splice(t[7][0].indexOf(h),1),z&&x(E),B&&B.d(z),z&&x(S),k=!1,Ue(D)}}}function kd(t,e,n){let{valid:r=!0}=e,s="json",i="",o="",{outputConfig:l}=e;const c=()=>{try{new URL(i)}catch{n(4,r=!1)}},a=[[]];function u(){s=this.__value,n(0,s)}function f(){s=this.__value,n(0,s)}function d(h){i=h,n(1,i)}function p(h){o=h,n(2,o)}return t.$$set=h=>{"valid"in h&&n(4,r=h.valid),"outputConfig"in h&&n(5,l=h.outputConfig)},t.$$.update=()=>{t.$$.dirty&7&&n(5,l={type:s,remoteUrl:i,agentSecret:o}),t.$$.dirty&7&&(s==="remote"?n(4,r=i.length>0&&o.length>0):n(4,r=!0))},[s,i,o,c,r,l,u,a,f,d,p]}class Ad extends _e{constructor(e){super(),be(this,e,kd,Ed,me,{valid:4,outputConfig:5})}}function Rd(t){let e;return{c(){e=L("h1"),e.textContent="Config"},m(n,r){H(n,e,r)},p:re,d(n){n&&x(e)}}}function Td(t){let e;return{c(){e=ae("Base Subject:")},m(n,r){H(n,e,r)},d(n){n&&x(e)}}}function Od(t){let e,n,r;function s(o){t[8](o)}let i={id:t[16]};return t[5]!==void 0&&(i.value=t[5]),e=new en({props:i}),ye.push(()=>je(e,"value",s,t[5])),e.$on("blur",t[7]),{c(){Z(e.$$.fragment)},m(o,l){J(e,o,l),r=!0},p(o,l){const c={};l&65536&&(c.id=o[16]),!n&&l&32&&(n=!0,c.value=o[5],Be(()=>n=!1)),e.$set(c)},i(o){r||(A(e.$$.fragment,o),r=!0)},o(o){j(e.$$.fragment,o),r=!1},d(o){X(e,o)}}}function Cd(t){let e;return{c(){e=ae(`The url used to generate subjects for new classes and properties when
          exporting to a server this should be an exsiting resource on the
          server like a drive that will be the parent to all generated
          resources.`)},m(n,r){H(n,e,r)},d(n){n&&x(e)}}}function Bd(t){let e;return{c(){e=ae("Data Sources:")},m(n,r){H(n,e,r)},d(n){n&&x(e)}}}function jd(t){let e,n,r;function s(o){t[9](o)}let i={id:t[16]};return t[3]!==void 0&&(i.value=t[3]),e=new hl({props:i}),ye.push(()=>je(e,"value",s,t[3])),{c(){Z(e.$$.fragment)},m(o,l){J(e,o,l),r=!0},p(o,l){const c={};l&65536&&(c.id=o[16]),!n&&l&8&&(n=!0,c.value=o[3],Be(()=>n=!1)),e.$set(c)},i(o){r||(A(e.$$.fragment,o),r=!0)},o(o){j(e.$$.fragment,o),r=!1},d(o){X(e,o)}}}function Md(t){let e;return{c(){e=ae(`Atomic data servers to pull property and class data from. (seperated
          by newline)`)},m(n,r){H(n,e,r)},d(n){n&&x(e)}}}function Nd(t){let e,n,r,s,i,o,l,c,a;n=new ur({props:{$$slots:{helper:[Cd],input:[Od,({id:p})=>({16:p}),({id:p})=>p?65536:0],label:[Td]},$$scope:{ctx:t}}}),s=new ur({props:{$$slots:{helper:[Md],input:[jd,({id:p})=>({16:p}),({id:p})=>p?65536:0],label:[Bd]},$$scope:{ctx:t}}});function u(p){t[10](p)}function f(p){t[11](p)}let d={};return t[1]!==void 0&&(d.valid=t[1]),t[2]!==void 0&&(d.outputConfig=t[2]),o=new Ad({props:d}),ye.push(()=>je(o,"valid",u,t[1])),ye.push(()=>je(o,"outputConfig",f,t[2])),{c(){e=L("form"),Z(n.$$.fragment),r=G(),Z(s.$$.fragment),i=G(),Z(o.$$.fragment),y(e,"class","svelte-1i4vv2l")},m(p,h){H(p,e,h),J(n,e,null),C(e,r),J(s,e,null),C(e,i),J(o,e,null),a=!0},p(p,h){const m={};h&196640&&(m.$$scope={dirty:h,ctx:p}),n.$set(m);const E={};h&196616&&(E.$$scope={dirty:h,ctx:p}),s.$set(E);const S={};!l&&h&2&&(l=!0,S.valid=p[1],Be(()=>l=!1)),!c&&h&4&&(c=!0,S.outputConfig=p[2],Be(()=>c=!1)),o.$set(S)},i(p){a||(A(n.$$.fragment,p),A(s.$$.fragment,p),A(o.$$.fragment,p),a=!0)},o(p){j(n.$$.fragment,p),j(s.$$.fragment,p),j(o.$$.fragment,p),a=!1},d(p){p&&x(e),X(n),X(s),X(o)}}}function Js(t){let e;return{c(){e=ae(t[4])},m(n,r){H(n,e,r)},p(n,r){r&16&&xe(e,n[4])},d(n){n&&x(e)}}}function Id(t){let e,n=t[4]&&Js(t);return{c(){n&&n.c(),e=Ke()},m(r,s){n&&n.m(r,s),H(r,e,s)},p(r,s){r[4]?n?n.p(r,s):(n=Js(r),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(r){n&&n.d(r),r&&x(e)}}}function xd(t){let e;return{c(){e=ae("Save")},m(n,r){H(n,e,r)},d(n){n&&x(e)}}}function Ld(t){let e,n;return e=new vr({props:{disabled:!t[1],$$slots:{default:[xd]},$$scope:{ctx:t}}}),e.$on("click",t[6]),{c(){Z(e.$$.fragment)},m(r,s){J(e,r,s),n=!0},p(r,s){const i={};s&2&&(i.disabled=!r[1]),s&131072&&(i.$$scope={dirty:s,ctx:r}),e.$set(i)},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){X(e,r)}}}function Ud(t){let e,n,r;function s(o){t[12](o)}let i={$$slots:{controls:[Ld],error:[Id],content:[Nd],title:[Rd]},$$scope:{ctx:t}};return t[0]!==void 0&&(i.show=t[0]),e=new nl({props:i}),ye.push(()=>je(e,"show",s,t[0])),{c(){Z(e.$$.fragment)},m(o,l){J(e,o,l),r=!0},p(o,[l]){const c={};l&131134&&(c.$$scope={dirty:l,ctx:o}),!n&&l&1&&(n=!0,c.show=o[0],Be(()=>n=!1)),e.$set(c)},i(o){r||(A(e.$$.fragment,o),r=!0)},o(o){j(e.$$.fragment,o),r=!1},d(o){X(e,o)}}}function Pd(t,e,n){let r,s,i,o;fe(t,Lt,k=>n(5,r=k)),fe(t,ft,k=>n(13,s=k)),fe(t,Zr,k=>n(14,i=k)),fe(t,vn,k=>n(15,o=k));let{show:l=!1}=e,c,a,u=rn(vn).join(`
`),f="";const d=()=>{try{const D=u.split(`
`).filter(B=>{try{return new URL(B),!0}catch{return!1}});if(Ze(vn,o=D,o),Ze(Zr,i=a.type,i),a.type==="remote"){s.setServerUrl(a.remoteUrl);const B=new URL(a.remoteUrl),z=new URL(r);if(B.origin!==z.origin)throw new Error("Base subject and Server URL must have the same origin (protocol, host and port)");if(a.agentSecret){const R=Ua.fromSecret(a.agentSecret);s.setAgent(R)}else s.setAgent(void 0)}n(0,l=!1),n(4,f="")}catch(k){console.error(k),n(4,f=k.message)}},p=()=>{r.endsWith("/")&&Ze(Lt,r=r.slice(0,-1),r)};function h(k){r=k,Lt.set(r)}function m(k){u=k,n(3,u)}function E(k){c=k,n(1,c)}function S(k){a=k,n(2,a)}function F(k){l=k,n(0,l)}return t.$$set=k=>{"show"in k&&n(0,l=k.show)},[l,c,a,u,f,r,d,p,h,m,E,S,F]}class Dd extends _e{constructor(e){super(),be(this,e,Pd,Ud,me,{show:0})}}function Hd(t){let e,n,r,s,i,o,l,c,a;return i=new nn({props:{icon:$o,size:"1.5rem",title:"Configure app"}}),i.$on("click",t[1]),c=new Mn({props:{data:fd,size:"1.5rem",stroke:"none"}}),{c(){e=L("div"),n=L("h1"),n.textContent="Atomic Data Model Builder",r=G(),s=L("div"),Z(i.$$.fragment),o=G(),l=L("a"),Z(c.$$.fragment),y(l,"href","https://github.com/atomicdata-dev/atomic-data-model-builder"),y(l,"rel","noopener noreferrer"),y(l,"target","_blank"),y(l,"title","View source on GitHub"),y(l,"class","svelte-abg2td"),y(s,"class","links svelte-abg2td"),y(e,"class","wrapper svelte-abg2td")},m(u,f){H(u,e,f),C(e,n),C(e,r),C(e,s),J(i,s,null),C(s,o),C(s,l),J(c,l,null),a=!0},p:re,i(u){a||(A(i.$$.fragment,u),A(c.$$.fragment,u),a=!0)},o(u){j(i.$$.fragment,u),j(c.$$.fragment,u),a=!1},d(u){u&&x(e),X(i),X(c)}}}function Fd(t){let e,n,r,s,i,o;n=new Ko({props:{$$slots:{default:[Hd]},$$scope:{ctx:t}}});function l(a){t[2](a)}let c={};return t[0]!==void 0&&(c.show=t[0]),s=new Dd({props:c}),ye.push(()=>je(s,"show",l,t[0])),{c(){e=L("header"),Z(n.$$.fragment),r=G(),Z(s.$$.fragment),y(e,"class","svelte-abg2td")},m(a,u){H(a,e,u),J(n,e,null),H(a,r,u),J(s,a,u),o=!0},p(a,[u]){const f={};u&9&&(f.$$scope={dirty:u,ctx:a}),n.$set(f);const d={};!i&&u&1&&(i=!0,d.show=a[0],Be(()=>i=!1)),s.$set(d)},i(a){o||(A(n.$$.fragment,a),A(s.$$.fragment,a),o=!0)},o(a){j(n.$$.fragment,a),j(s.$$.fragment,a),o=!1},d(a){a&&x(e),X(n),a&&x(r),X(s,a)}}}function zd(t,e,n){let r=!1;const s=()=>n(0,r=!0);function i(o){r=o,n(0,r)}return[r,s,i]}class qd extends _e{constructor(e){super(),be(this,e,zd,Fd,me,{})}}var gi={exports:{}};function mi(t){return t instanceof Map?t.clear=t.delete=t.set=function(){throw new Error("map is read-only")}:t instanceof Set&&(t.add=t.clear=t.delete=function(){throw new Error("set is read-only")}),Object.freeze(t),Object.getOwnPropertyNames(t).forEach(function(e){var n=t[e];typeof n=="object"&&!Object.isFrozen(n)&&mi(n)}),t}gi.exports=mi;gi.exports.default=mi;class Xs{constructor(e){e.data===void 0&&(e.data={}),this.data=e.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function pl(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function St(t,...e){const n=Object.create(null);for(const r in t)n[r]=t[r];return e.forEach(function(r){for(const s in r)n[s]=r[s]}),n}const Wd="</span>",Zs=t=>!!t.scope||t.sublanguage&&t.language,Vd=(t,{prefix:e})=>{if(t.includes(".")){const n=t.split(".");return[`${e}${n.shift()}`,...n.map((r,s)=>`${r}${"_".repeat(s+1)}`)].join(" ")}return`${e}${t}`};class Gd{constructor(e,n){this.buffer="",this.classPrefix=n.classPrefix,e.walk(this)}addText(e){this.buffer+=pl(e)}openNode(e){if(!Zs(e))return;let n="";e.sublanguage?n=`language-${e.language}`:n=Vd(e.scope,{prefix:this.classPrefix}),this.span(n)}closeNode(e){!Zs(e)||(this.buffer+=Wd)}value(){return this.buffer}span(e){this.buffer+=`<span class="${e}">`}}const Ys=(t={})=>{const e={children:[]};return Object.assign(e,t),e};class bi{constructor(){this.rootNode=Ys(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){this.top.children.push(e)}openNode(e){const n=Ys({scope:e});this.add(n),this.stack.push(n)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(e,n){return typeof n=="string"?e.addText(n):n.children&&(e.openNode(n),n.children.forEach(r=>this._walk(e,r)),e.closeNode(n)),e}static _collapse(e){typeof e!="string"&&(!e.children||(e.children.every(n=>typeof n=="string")?e.children=[e.children.join("")]:e.children.forEach(n=>{bi._collapse(n)})))}}class Kd extends bi{constructor(e){super(),this.options=e}addKeyword(e,n){e!==""&&(this.openNode(n),this.addText(e),this.closeNode())}addText(e){e!==""&&this.add(e)}addSublanguage(e,n){const r=e.root;r.sublanguage=!0,r.language=n,this.add(r)}toHTML(){return new Gd(this,this.options).value()}finalize(){return!0}}function Tn(t){return t?typeof t=="string"?t:t.source:null}function gl(t){return Ht("(?=",t,")")}function Jd(t){return Ht("(?:",t,")*")}function Xd(t){return Ht("(?:",t,")?")}function Ht(...t){return t.map(n=>Tn(n)).join("")}function Zd(t){const e=t[t.length-1];return typeof e=="object"&&e.constructor===Object?(t.splice(t.length-1,1),e):{}}function _i(...t){return"("+(Zd(t).capture?"":"?:")+t.map(r=>Tn(r)).join("|")+")"}function ml(t){return new RegExp(t.toString()+"|").exec("").length-1}function Yd(t,e){const n=t&&t.exec(e);return n&&n.index===0}const Qd=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function yi(t,{joinWith:e}){let n=0;return t.map(r=>{n+=1;const s=n;let i=Tn(r),o="";for(;i.length>0;){const l=Qd.exec(i);if(!l){o+=i;break}o+=i.substring(0,l.index),i=i.substring(l.index+l[0].length),l[0][0]==="\\"&&l[1]?o+="\\"+String(Number(l[1])+s):(o+=l[0],l[0]==="("&&n++)}return o}).map(r=>`(${r})`).join(e)}const $d=/\b\B/,bl="[a-zA-Z]\\w*",vi="[a-zA-Z_]\\w*",_l="\\b\\d+(\\.\\d+)?",yl="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",vl="\\b(0b[01]+)",eh="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",th=(t={})=>{const e=/^#![ ]*\//;return t.binary&&(t.begin=Ht(e,/.*\b/,t.binary,/\b.*/)),St({scope:"meta",begin:e,end:/$/,relevance:0,"on:begin":(n,r)=>{n.index!==0&&r.ignoreMatch()}},t)},On={begin:"\\\\[\\s\\S]",relevance:0},nh={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[On]},rh={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[On]},ih={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},wr=function(t,e,n={}){const r=St({scope:"comment",begin:t,end:e,contains:[]},n);r.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const s=_i("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return r.contains.push({begin:Ht(/[ ]+/,"(",s,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),r},sh=wr("//","$"),oh=wr("/\\*","\\*/"),lh=wr("#","$"),ah={scope:"number",begin:_l,relevance:0},ch={scope:"number",begin:yl,relevance:0},uh={scope:"number",begin:vl,relevance:0},fh={begin:/(?=\/[^/\n]*\/)/,contains:[{scope:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[On,{begin:/\[/,end:/\]/,relevance:0,contains:[On]}]}]},dh={scope:"title",begin:bl,relevance:0},hh={scope:"title",begin:vi,relevance:0},ph={begin:"\\.\\s*"+vi,relevance:0},gh=function(t){return Object.assign(t,{"on:begin":(e,n)=>{n.data._beginMatch=e[1]},"on:end":(e,n)=>{n.data._beginMatch!==e[1]&&n.ignoreMatch()}})};var Gn=Object.freeze({__proto__:null,MATCH_NOTHING_RE:$d,IDENT_RE:bl,UNDERSCORE_IDENT_RE:vi,NUMBER_RE:_l,C_NUMBER_RE:yl,BINARY_NUMBER_RE:vl,RE_STARTERS_RE:eh,SHEBANG:th,BACKSLASH_ESCAPE:On,APOS_STRING_MODE:nh,QUOTE_STRING_MODE:rh,PHRASAL_WORDS_MODE:ih,COMMENT:wr,C_LINE_COMMENT_MODE:sh,C_BLOCK_COMMENT_MODE:oh,HASH_COMMENT_MODE:lh,NUMBER_MODE:ah,C_NUMBER_MODE:ch,BINARY_NUMBER_MODE:uh,REGEXP_MODE:fh,TITLE_MODE:dh,UNDERSCORE_TITLE_MODE:hh,METHOD_GUARD:ph,END_SAME_AS_BEGIN:gh});function mh(t,e){t.input[t.index-1]==="."&&e.ignoreMatch()}function bh(t,e){t.className!==void 0&&(t.scope=t.className,delete t.className)}function _h(t,e){!e||!t.beginKeywords||(t.begin="\\b("+t.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",t.__beforeBegin=mh,t.keywords=t.keywords||t.beginKeywords,delete t.beginKeywords,t.relevance===void 0&&(t.relevance=0))}function yh(t,e){!Array.isArray(t.illegal)||(t.illegal=_i(...t.illegal))}function vh(t,e){if(!!t.match){if(t.begin||t.end)throw new Error("begin & end are not supported with match");t.begin=t.match,delete t.match}}function wh(t,e){t.relevance===void 0&&(t.relevance=1)}const Sh=(t,e)=>{if(!t.beforeMatch)return;if(t.starts)throw new Error("beforeMatch cannot be used with starts");const n=Object.assign({},t);Object.keys(t).forEach(r=>{delete t[r]}),t.keywords=n.keywords,t.begin=Ht(n.beforeMatch,gl(n.begin)),t.starts={relevance:0,contains:[Object.assign(n,{endsParent:!0})]},t.relevance=0,delete n.beforeMatch},Eh=["of","and","for","in","not","or","if","then","parent","list","value"],kh="keyword";function wl(t,e,n=kh){const r=Object.create(null);return typeof t=="string"?s(n,t.split(" ")):Array.isArray(t)?s(n,t):Object.keys(t).forEach(function(i){Object.assign(r,wl(t[i],e,i))}),r;function s(i,o){e&&(o=o.map(l=>l.toLowerCase())),o.forEach(function(l){const c=l.split("|");r[c[0]]=[i,Ah(c[0],c[1])]})}}function Ah(t,e){return e?Number(e):Rh(t)?0:1}function Rh(t){return Eh.includes(t.toLowerCase())}const Qs={},Ut=t=>{console.error(t)},$s=(t,...e)=>{console.log(`WARN: ${t}`,...e)},Jt=(t,e)=>{Qs[`${t}/${e}`]||(console.log(`Deprecated as of ${t}. ${e}`),Qs[`${t}/${e}`]=!0)},fr=new Error;function Sl(t,e,{key:n}){let r=0;const s=t[n],i={},o={};for(let l=1;l<=e.length;l++)o[l+r]=s[l],i[l+r]=!0,r+=ml(e[l-1]);t[n]=o,t[n]._emit=i,t[n]._multi=!0}function Th(t){if(!!Array.isArray(t.begin)){if(t.skip||t.excludeBegin||t.returnBegin)throw Ut("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),fr;if(typeof t.beginScope!="object"||t.beginScope===null)throw Ut("beginScope must be object"),fr;Sl(t,t.begin,{key:"beginScope"}),t.begin=yi(t.begin,{joinWith:""})}}function Oh(t){if(!!Array.isArray(t.end)){if(t.skip||t.excludeEnd||t.returnEnd)throw Ut("skip, excludeEnd, returnEnd not compatible with endScope: {}"),fr;if(typeof t.endScope!="object"||t.endScope===null)throw Ut("endScope must be object"),fr;Sl(t,t.end,{key:"endScope"}),t.end=yi(t.end,{joinWith:""})}}function Ch(t){t.scope&&typeof t.scope=="object"&&t.scope!==null&&(t.beginScope=t.scope,delete t.scope)}function Bh(t){Ch(t),typeof t.beginScope=="string"&&(t.beginScope={_wrap:t.beginScope}),typeof t.endScope=="string"&&(t.endScope={_wrap:t.endScope}),Th(t),Oh(t)}function jh(t){function e(o,l){return new RegExp(Tn(o),"m"+(t.case_insensitive?"i":"")+(t.unicodeRegex?"u":"")+(l?"g":""))}class n{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(l,c){c.position=this.position++,this.matchIndexes[this.matchAt]=c,this.regexes.push([c,l]),this.matchAt+=ml(l)+1}compile(){this.regexes.length===0&&(this.exec=()=>null);const l=this.regexes.map(c=>c[1]);this.matcherRe=e(yi(l,{joinWith:"|"}),!0),this.lastIndex=0}exec(l){this.matcherRe.lastIndex=this.lastIndex;const c=this.matcherRe.exec(l);if(!c)return null;const a=c.findIndex((f,d)=>d>0&&f!==void 0),u=this.matchIndexes[a];return c.splice(0,a),Object.assign(c,u)}}class r{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(l){if(this.multiRegexes[l])return this.multiRegexes[l];const c=new n;return this.rules.slice(l).forEach(([a,u])=>c.addRule(a,u)),c.compile(),this.multiRegexes[l]=c,c}resumingScanAtSamePosition(){return this.regexIndex!==0}considerAll(){this.regexIndex=0}addRule(l,c){this.rules.push([l,c]),c.type==="begin"&&this.count++}exec(l){const c=this.getMatcher(this.regexIndex);c.lastIndex=this.lastIndex;let a=c.exec(l);if(this.resumingScanAtSamePosition()&&!(a&&a.index===this.lastIndex)){const u=this.getMatcher(0);u.lastIndex=this.lastIndex+1,a=u.exec(l)}return a&&(this.regexIndex+=a.position+1,this.regexIndex===this.count&&this.considerAll()),a}}function s(o){const l=new r;return o.contains.forEach(c=>l.addRule(c.begin,{rule:c,type:"begin"})),o.terminatorEnd&&l.addRule(o.terminatorEnd,{type:"end"}),o.illegal&&l.addRule(o.illegal,{type:"illegal"}),l}function i(o,l){const c=o;if(o.isCompiled)return c;[bh,vh,Bh,Sh].forEach(u=>u(o,l)),t.compilerExtensions.forEach(u=>u(o,l)),o.__beforeBegin=null,[_h,yh,wh].forEach(u=>u(o,l)),o.isCompiled=!0;let a=null;return typeof o.keywords=="object"&&o.keywords.$pattern&&(o.keywords=Object.assign({},o.keywords),a=o.keywords.$pattern,delete o.keywords.$pattern),a=a||/\w+/,o.keywords&&(o.keywords=wl(o.keywords,t.case_insensitive)),c.keywordPatternRe=e(a,!0),l&&(o.begin||(o.begin=/\B|\b/),c.beginRe=e(c.begin),!o.end&&!o.endsWithParent&&(o.end=/\B|\b/),o.end&&(c.endRe=e(c.end)),c.terminatorEnd=Tn(c.end)||"",o.endsWithParent&&l.terminatorEnd&&(c.terminatorEnd+=(o.end?"|":"")+l.terminatorEnd)),o.illegal&&(c.illegalRe=e(o.illegal)),o.contains||(o.contains=[]),o.contains=[].concat(...o.contains.map(function(u){return Mh(u==="self"?o:u)})),o.contains.forEach(function(u){i(u,c)}),o.starts&&i(o.starts,l),c.matcher=s(c),c}if(t.compilerExtensions||(t.compilerExtensions=[]),t.contains&&t.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return t.classNameAliases=St(t.classNameAliases||{}),i(t)}function El(t){return t?t.endsWithParent||El(t.starts):!1}function Mh(t){return t.variants&&!t.cachedVariants&&(t.cachedVariants=t.variants.map(function(e){return St(t,{variants:null},e)})),t.cachedVariants?t.cachedVariants:El(t)?St(t,{starts:t.starts?St(t.starts):null}):Object.isFrozen(t)?St(t):t}var Nh="11.6.0";class Ih extends Error{constructor(e,n){super(e),this.name="HTMLInjectionError",this.html=n}}const zr=pl,eo=St,to=Symbol("nomatch"),xh=7,Lh=function(t){const e=Object.create(null),n=Object.create(null),r=[];let s=!0;const i="Could not find the language '{}', did you forget to load/include a language module?",o={disableAutodetect:!0,name:"Plain text",contains:[]};let l={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:Kd};function c(_){return l.noHighlightRe.test(_)}function a(_){let U=_.className+" ";U+=_.parentNode?_.parentNode.className:"";const O=l.languageDetectRe.exec(U);if(O){const N=q(O[1]);return N||($s(i.replace("{}",O[1])),$s("Falling back to no-highlight mode for this block.",_)),N?O[1]:"no-highlight"}return U.split(/\s+/).find(N=>c(N)||q(N))}function u(_,U,O){let N="",ue="";typeof U=="object"?(N=_,O=U.ignoreIllegals,ue=U.language):(Jt("10.7.0","highlight(lang, code, ...args) has been deprecated."),Jt("10.7.0",`Please use highlight(code, options) instead.
https://github.com/highlightjs/highlight.js/issues/2277`),ue=_,N=U),O===void 0&&(O=!0);const ee={code:N,language:ue};b("before:highlight",ee);const Y=ee.result?ee.result:f(ee.language,ee.code,O);return Y.code=ee.code,b("after:highlight",Y),Y}function f(_,U,O,N){const ue=Object.create(null);function ee(I,W){return I.keywords[W]}function Y(){if(!$.keywords){we.addText(he);return}let I=0;$.keywordPatternRe.lastIndex=0;let W=$.keywordPatternRe.exec(he),te="";for(;W;){te+=he.substring(I,W.index);const oe=Xe.case_insensitive?W[0].toLowerCase():W[0],Ne=ee($,oe);if(Ne){const[Le,Er]=Ne;if(we.addText(te),te="",ue[oe]=(ue[oe]||0)+1,ue[oe]<=xh&&(pt+=Er),Le.startsWith("_"))te+=W[0];else{const xn=Xe.classNameAliases[Le]||Le;we.addKeyword(W[0],xn)}}else te+=W[0];I=$.keywordPatternRe.lastIndex,W=$.keywordPatternRe.exec(he)}te+=he.substring(I),we.addText(te)}function Fe(){if(he==="")return;let I=null;if(typeof $.subLanguage=="string"){if(!e[$.subLanguage]){we.addText(he);return}I=f($.subLanguage,he,!0,Mt[$.subLanguage]),Mt[$.subLanguage]=I._top}else I=p(he,$.subLanguage.length?$.subLanguage:null);$.relevance>0&&(pt+=I.relevance),we.addSublanguage(I._emitter,I.language)}function Ce(){$.subLanguage!=null?Fe():Y(),he=""}function Pe(I,W){let te=1;const oe=W.length-1;for(;te<=oe;){if(!I._emit[te]){te++;continue}const Ne=Xe.classNameAliases[I[te]]||I[te],Le=W[te];Ne?we.addKeyword(Le,Ne):(he=Le,Y(),he=""),te++}}function ht(I,W){return I.scope&&typeof I.scope=="string"&&we.openNode(Xe.classNameAliases[I.scope]||I.scope),I.beginScope&&(I.beginScope._wrap?(we.addKeyword(he,Xe.classNameAliases[I.beginScope._wrap]||I.beginScope._wrap),he=""):I.beginScope._multi&&(Pe(I.beginScope,W),he="")),$=Object.create(I,{parent:{value:$}}),$}function nt(I,W,te){let oe=Yd(I.endRe,te);if(oe){if(I["on:end"]){const Ne=new Xs(I);I["on:end"](W,Ne),Ne.isMatchIgnored&&(oe=!1)}if(oe){for(;I.endsParent&&I.parent;)I=I.parent;return I}}if(I.endsWithParent)return nt(I.parent,W,te)}function Sr(I){return $.matcher.regexIndex===0?(he+=I[0],1):(zt=!0,0)}function Ft(I){const W=I[0],te=I.rule,oe=new Xs(te),Ne=[te.__beforeBegin,te["on:begin"]];for(const Le of Ne)if(!!Le&&(Le(I,oe),oe.isMatchIgnored))return Sr(W);return te.skip?he+=W:(te.excludeBegin&&(he+=W),Ce(),!te.returnBegin&&!te.excludeBegin&&(he=W)),ht(te,I),te.returnBegin?0:W.length}function In(I){const W=I[0],te=U.substring(I.index),oe=nt($,I,te);if(!oe)return to;const Ne=$;$.endScope&&$.endScope._wrap?(Ce(),we.addKeyword(W,$.endScope._wrap)):$.endScope&&$.endScope._multi?(Ce(),Pe($.endScope,I)):Ne.skip?he+=W:(Ne.returnEnd||Ne.excludeEnd||(he+=W),Ce(),Ne.excludeEnd&&(he=W));do $.scope&&we.closeNode(),!$.skip&&!$.subLanguage&&(pt+=$.relevance),$=$.parent;while($!==oe.parent);return oe.starts&&ht(oe.starts,I),Ne.returnEnd?0:W.length}function an(){const I=[];for(let W=$;W!==Xe;W=W.parent)W.scope&&I.unshift(W.scope);I.forEach(W=>we.openNode(W))}let Je={};function de(I,W){const te=W&&W[0];if(he+=I,te==null)return Ce(),0;if(Je.type==="begin"&&W.type==="end"&&Je.index===W.index&&te===""){if(he+=U.slice(W.index,W.index+1),!s){const oe=new Error(`0 width match regex (${_})`);throw oe.languageName=_,oe.badRule=Je.rule,oe}return 1}if(Je=W,W.type==="begin")return Ft(W);if(W.type==="illegal"&&!O){const oe=new Error('Illegal lexeme "'+te+'" for mode "'+($.scope||"<unnamed>")+'"');throw oe.mode=$,oe}else if(W.type==="end"){const oe=In(W);if(oe!==to)return oe}if(W.type==="illegal"&&te==="")return 1;if(gt>1e5&&gt>W.index*3)throw new Error("potential infinite loop, way more iterations than matches");return he+=te,te.length}const Xe=q(_);if(!Xe)throw Ut(i.replace("{}",_)),new Error('Unknown language: "'+_+'"');const cn=jh(Xe);let jt="",$=N||cn;const Mt={},we=new l.__emitter(l);an();let he="",pt=0,ce=0,gt=0,zt=!1;try{for($.matcher.considerAll();;){gt++,zt?zt=!1:$.matcher.considerAll(),$.matcher.lastIndex=ce;const I=$.matcher.exec(U);if(!I)break;const W=U.substring(ce,I.index),te=de(W,I);ce=I.index+te}return de(U.substring(ce)),we.closeAllNodes(),we.finalize(),jt=we.toHTML(),{language:_,value:jt,relevance:pt,illegal:!1,_emitter:we,_top:$}}catch(I){if(I.message&&I.message.includes("Illegal"))return{language:_,value:zr(U),illegal:!0,relevance:0,_illegalBy:{message:I.message,index:ce,context:U.slice(ce-100,ce+100),mode:I.mode,resultSoFar:jt},_emitter:we};if(s)return{language:_,value:zr(U),illegal:!1,relevance:0,errorRaised:I,_emitter:we,_top:$};throw I}}function d(_){const U={value:zr(_),illegal:!1,relevance:0,_top:o,_emitter:new l.__emitter(l)};return U._emitter.addText(_),U}function p(_,U){U=U||l.languages||Object.keys(e);const O=d(_),N=U.filter(q).filter(v).map(Ce=>f(Ce,_,!1));N.unshift(O);const ue=N.sort((Ce,Pe)=>{if(Ce.relevance!==Pe.relevance)return Pe.relevance-Ce.relevance;if(Ce.language&&Pe.language){if(q(Ce.language).supersetOf===Pe.language)return 1;if(q(Pe.language).supersetOf===Ce.language)return-1}return 0}),[ee,Y]=ue,Fe=ee;return Fe.secondBest=Y,Fe}function h(_,U,O){const N=U&&n[U]||O;_.classList.add("hljs"),_.classList.add(`language-${N}`)}function m(_){let U=null;const O=a(_);if(c(O))return;if(b("before:highlightElement",{el:_,language:O}),_.children.length>0&&(l.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(_)),l.throwUnescapedHTML))throw new Ih("One of your code blocks includes unescaped HTML.",_.innerHTML);U=_;const N=U.textContent,ue=O?u(N,{language:O,ignoreIllegals:!0}):p(N);_.innerHTML=ue.value,h(_,O,ue.language),_.result={language:ue.language,re:ue.relevance,relevance:ue.relevance},ue.secondBest&&(_.secondBest={language:ue.secondBest.language,relevance:ue.secondBest.relevance}),b("after:highlightElement",{el:_,result:ue,text:N})}function E(_){l=eo(l,_)}const S=()=>{D(),Jt("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")};function F(){D(),Jt("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")}let k=!1;function D(){if(document.readyState==="loading"){k=!0;return}document.querySelectorAll(l.cssSelector).forEach(m)}function B(){k&&D()}typeof window<"u"&&window.addEventListener&&window.addEventListener("DOMContentLoaded",B,!1);function z(_,U){let O=null;try{O=U(t)}catch(N){if(Ut("Language definition for '{}' could not be registered.".replace("{}",_)),s)Ut(N);else throw N;O=o}O.name||(O.name=_),e[_]=O,O.rawDefinition=U.bind(null,t),O.aliases&&K(O.aliases,{languageName:_})}function R(_){delete e[_];for(const U of Object.keys(n))n[U]===_&&delete n[U]}function w(){return Object.keys(e)}function q(_){return _=(_||"").toLowerCase(),e[_]||e[n[_]]}function K(_,{languageName:U}){typeof _=="string"&&(_=[_]),_.forEach(O=>{n[O.toLowerCase()]=U})}function v(_){const U=q(_);return U&&!U.disableAutodetect}function Q(_){_["before:highlightBlock"]&&!_["before:highlightElement"]&&(_["before:highlightElement"]=U=>{_["before:highlightBlock"](Object.assign({block:U.el},U))}),_["after:highlightBlock"]&&!_["after:highlightElement"]&&(_["after:highlightElement"]=U=>{_["after:highlightBlock"](Object.assign({block:U.el},U))})}function ie(_){Q(_),r.push(_)}function b(_,U){const O=_;r.forEach(function(N){N[O]&&N[O](U)})}function T(_){return Jt("10.7.0","highlightBlock will be removed entirely in v12.0"),Jt("10.7.0","Please use highlightElement now."),m(_)}Object.assign(t,{highlight:u,highlightAuto:p,highlightAll:D,highlightElement:m,highlightBlock:T,configure:E,initHighlighting:S,initHighlightingOnLoad:F,registerLanguage:z,unregisterLanguage:R,listLanguages:w,getLanguage:q,registerAliases:K,autoDetection:v,inherit:eo,addPlugin:ie}),t.debugMode=function(){s=!1},t.safeMode=function(){s=!0},t.versionString=Nh,t.regex={concat:Ht,lookahead:gl,either:_i,optional:Xd,anyNumberOfTimes:Jd};for(const _ in Gn)typeof Gn[_]=="object"&&gi.exports(Gn[_]);return Object.assign(t,Gn),t};var Cn=Lh({}),Uh=Cn;Cn.HighlightJS=Cn;Cn.default=Cn;const no=Uh,Ph=t=>({highlighted:t&8}),ro=t=>({highlighted:t[3]});function Dh(t){let e;return{c(){e=ae(t[1])},m(n,r){H(n,e,r)},p(n,r){r&2&&xe(e,n[1])},d(n){n&&x(e)}}}function Hh(t){let e,n;return{c(){e=new yo(!1),n=Ke(),e.a=n},m(r,s){e.m(t[3],r,s),H(r,n,s)},p(r,s){s&8&&e.p(r[3])},d(r){r&&x(n),r&&e.d()}}}function Fh(t){let e,n,r;function s(a,u){return a[3]!==void 0?Hh:Dh}let i=s(t),o=i(t),l=[{"data-language":r=t[0].name||"plaintext"},t[4]],c={};for(let a=0;a<l.length;a+=1)c=kt(c,l[a]);return{c(){e=L("pre"),n=L("code"),o.c(),y(n,"class","hljs"),Qn(e,c),ne(e,"langtag",t[2]),ne(e,"svelte-4cqgwq",!0)},m(a,u){H(a,e,u),C(e,n),o.m(n,null)},p(a,u){i===(i=s(a))&&o?o.p(a,u):(o.d(1),o=i(a),o&&(o.c(),o.m(n,null))),Qn(e,c=ti(l,[u&1&&r!==(r=a[0].name||"plaintext")&&{"data-language":r},u&16&&a[4]])),ne(e,"langtag",a[2]),ne(e,"svelte-4cqgwq",!0)},d(a){a&&x(e),o.d()}}}function zh(t){let e;const n=t[6].default,r=Ee(n,t,t[5],ro),s=r||Fh(t);return{c(){s&&s.c()},m(i,o){s&&s.m(i,o),e=!0},p(i,[o]){r?r.p&&(!e||o&40)&&Ae(r,n,i,i[5],e?ke(n,i[5],o,Ph):Re(i[5]),ro):s&&s.p&&(!e||o&31)&&s.p(i,e?o:-1)},i(i){e||(A(s,i),e=!0)},o(i){j(s,i),e=!1},d(i){s&&s.d(i)}}}function qh(t,e,n){const r=["language","code","langtag"];let s=Zn(e,r),{$$slots:i={},$$scope:o}=e,{language:l={name:void 0,register:void 0}}=e,{code:c=void 0}=e,{langtag:a=!1}=e;const u=sn();let f;return Oa(()=>{f&&u("highlight",{highlighted:f})}),t.$$set=d=>{e=kt(kt({},e),po(d)),n(4,s=Zn(e,r)),"language"in d&&n(0,l=d.language),"code"in d&&n(1,c=d.code),"langtag"in d&&n(2,a=d.langtag),"$$scope"in d&&n(5,o=d.$$scope)},t.$$.update=()=>{t.$$.dirty&3&&l.name&&l.register&&(no.registerLanguage(l.name,l.register),n(3,f=no.highlight(c,{language:l.name}).value))},[l,c,a,f,s,o,i]}class Wh extends _e{constructor(e){super(),be(this,e,qh,zh,me,{language:0,code:1,langtag:2})}}const Vh=Wh;function Gh(t){const e={className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},n={match:/[{}[\],:]/,className:"punctuation",relevance:0},r=["true","false","null"],s={scope:"literal",beginKeywords:r.join(" ")};return{name:"JSON",keywords:{literal:r},contains:[e,n,t.QUOTE_STRING_MODE,s,t.C_NUMBER_MODE,t.C_LINE_COMMENT_MODE,t.C_BLOCK_COMMENT_MODE],illegal:"\\S"}}const Kh={name:"json",register:Gh},Jh=Kh,Xh="<style>pre code.hljs{display:block;overflow-x:auto;padding:1em}code.hljs{padding:3px 5px}.hljs{color:#abb2bf;background:#282c34}.hljs-comment,.hljs-quote{color:#5c6370;font-style:italic}.hljs-doctag,.hljs-formula,.hljs-keyword{color:#c678dd}.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#e06c75}.hljs-literal{color:#56b6c2}.hljs-addition,.hljs-attribute,.hljs-meta .hljs-string,.hljs-regexp,.hljs-string{color:#98c379}.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#d19a66}.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#61aeee}.hljs-built_in,.hljs-class .hljs-title,.hljs-title.class_{color:#e6c07b}.hljs-emphasis{font-style:italic}.hljs-strong{font-weight:700}.hljs-link{text-decoration:underline}</style>",Zh=Xh,wi="https://atomicdata.dev/properties/localId",dr=(t,e)=>{const n=e?"":rn(Lt);return t.replace(ln,n)},kl=(t,e,n)=>(r,s=!1)=>{const i=t.get(r);if(i===void 0)return;const o=c=>s&&n.includes(c),l=Array.isArray(i)?i.map(c=>dr(c,o(c))):dr(i,o(i));e[r]=l},Yh=(t,e,n)=>{const s={[n?wi:"@id"]:dr(t.getSubject(),n)},i=kl(t,s,e);return i(P.properties.shortname),i(P.properties.isA,n),i(P.properties.description),i(P.properties.requires,n),i(P.properties.recommends,n),!n&&i(P.properties.parent,!1),s},Qh=(t,e,n)=>{const s={[n?wi:"@id"]:dr(t.getSubject(),n)},i=kl(t,s,e);return i(P.properties.shortname),i(P.properties.isA,n),i(P.properties.description),i(P.properties.datatype),i(P.properties.classType,n),!n&&i(P.properties.parent,!1),s},$h=(t,e,n,r)=>{const s=[],i=[...n,...t];for(const o of t){const l=e.getResourceLoading(o);s.push(Yh(l,i,r));const c=Array.from(new Set([...l.get(P.properties.requires),...l.get(P.properties.recommends)]));for(const a of c){if(!n.includes(a)||s.some(f=>f["@id"]===a||f[wi]===a))continue;const u=e.getResourceLoading(a);s.push(Qh(u,i,r))}}return JSON.stringify(s,null,2)};function io(t){let e,n,r,s,i;return{c(){e=L("div"),n=L("section"),r=ae(t[0]),y(n,"class","toast svelte-1j9p6r6"),ne(n,"success",t[1]==="success"),ne(n,"error",t[1]==="error"),y(e,"class","toast-wrapper svelte-1j9p6r6")},m(o,l){H(o,e,l),C(e,n),C(n,r),i=!0},p(o,l){(!i||l&1)&&xe(r,o[0]),(!i||l&2)&&ne(n,"success",o[1]==="success"),(!i||l&2)&&ne(n,"error",o[1]==="error")},i(o){i||(Rt(()=>{s||(s=$t(e,Qi,{y:30},!0)),s.run(1)}),i=!0)},o(o){s||(s=$t(e,Qi,{y:30},!1)),s.run(0),i=!1},d(o){o&&x(e),o&&s&&s.end()}}}function ep(t){let e,n,r=t[0].length>0&&io(t);return{c(){r&&r.c(),e=Ke()},m(s,i){r&&r.m(s,i),H(s,e,i),n=!0},p(s,[i]){s[0].length>0?r?(r.p(s,i),i&1&&A(r,1)):(r=io(s),r.c(),A(r,1),r.m(e.parentNode,e)):r&&(Te(),j(r,1,1,()=>{r=null}),Oe())},i(s){n||(A(r),n=!0)},o(s){j(r),n=!1},d(s){r&&r.d(s),s&&x(e)}}}const tp=3e3,so=(t,e="success")=>{Al.set(e),Yr.set(t),setTimeout(()=>{Yr.set("")},tp)},Yr=Ct(""),Al=Ct("success");function np(t,e,n){let r,s;return fe(t,Yr,i=>n(0,r=i)),fe(t,Al,i=>n(1,s=i)),[r,s]}class rp extends _e{constructor(e){super(),be(this,e,np,ep,me,{})}}const ip=async(t,e)=>{console.log("== Exporting to server ==");const n=await op(t,e);try{const r=await n.getResourceAsync(rn(Lt)),s=e.map(hr);await Promise.all(s.map(i=>{const o=n.getResourceLoading(i);return r.pushPropVal(P.properties.subResources,i),console.log(o),o.save(n)})),console.log("parent",r),await r.save(n),so("Successfully exported to server.")}catch(r){console.error(r),so("Failed to export to server.","error");return}},sp=t=>new Promise(e=>{const n=setTimeout(()=>{console.log("timeout"),e()},5e3);if(t.readyState===WebSocket.OPEN)return clearTimeout(n),console.log("Socket was open"),e();t.onopen=()=>{clearTimeout(n),console.log("Socket opened"),e()}}),op=async(t,e)=>{const n=new Fo({serverUrl:t.getServerUrl(),agent:t.getAgent()}),r=n.getDefaultWebSocket();await sp(r);for(const s of e){const i=cp(s,t,n),o=i.get(P.properties.isA);o[0]===P.classes.class?lp(i,e,n):o[0]===P.classes.property&&ap(i,e,n),console.log("adding resource"),n.addResource(i)}return n},hr=t=>t.replace(ln,rn(Lt)),Rl=(t,e)=>(n,r)=>{const s=n.get(r);if(s===void 0)return;const i=o=>t.includes(o);if(Array.isArray(s)){const o=s.map(l=>i(l)?hr(l):l);n.set(r,o,e,!1);return}typeof s=="string"&&i(s)&&n.set(r,hr(s),e,!1)},Tl=(t,e)=>{t.setSubject(hr(t.getSubject()));const n=rn(Lt);t.set(P.properties.parent,n,e,!1)},lp=(t,e,n)=>{Tl(t,n);const r=Rl(e,n);r(t,P.properties.requires),r(t,P.properties.recommends)},ap=(t,e,n)=>{Tl(t,n),Rl(e,n)(t,P.properties.classType)},cp=(t,e,n)=>{const s=e.getResourceLoading(t).getPropVals(),i=new Et(t,!0);for(const[o,l]of s.entries())i.set(o,structuredClone(l),n,!1);return i},{document:oo}=xa;function lo(t){let e,n,r,s;return{c(){e=L("p"),n=ae(t[3]),y(e,"class","waring svelte-2y9ym9")},m(i,o){H(i,e,o),C(e,n),s=!0},p(i,o){(!s||o&8)&&xe(n,i[3])},i(i){s||(Rt(()=>{r||(r=$t(e,Yi,{duration:100},!0)),r.run(1)}),s=!0)},o(i){r||(r=$t(e,Yi,{duration:100},!1)),r.run(0),s=!1},d(i){i&&x(e),i&&r&&r.end()}}}function up(t){let e,n,r,s,i;return{c(){e=L("input"),n=G(),r=L("label"),r.textContent="Importer compatible JSON",y(e,"type","checkbox"),y(e,"id","import-toggle"),y(r,"for","import-toggle")},m(o,l){H(o,e,l),e.checked=t[2],H(o,n,l),H(o,r,l),s||(i=[se(e,"change",t[8]),se(e,"input",t[4])],s=!0)},p(o,l){l&4&&(e.checked=o[2])},i:re,o:re,d(o){o&&x(e),o&&x(n),o&&x(r),s=!1,Ue(i)}}}function fp(t){let e,n;return e=new vr({props:{disabled:t[3].length>0,$$slots:{default:[dp]},$$scope:{ctx:t}}}),e.$on("click",t[5]),{c(){Z(e.$$.fragment)},m(r,s){J(e,r,s),n=!0},p(r,s){const i={};s&8&&(i.disabled=r[3].length>0),s&16384&&(i.$$scope={dirty:s,ctx:r}),e.$set(i)},i(r){n||(A(e.$$.fragment,r),n=!0)},o(r){j(e.$$.fragment,r),n=!1},d(r){X(e,r)}}}function dp(t){let e;return{c(){e=ae("Export to server")},m(n,r){H(n,e,r)},d(n){n&&x(e)}}}function hp(t){let e,n,r,s,i,o,l,c,a,u,f,d,p=t[3]&&lo(t);const h=[fp,up],m=[];function E(S,F){return S[0]==="remote"?0:1}return c=E(t),a=m[c]=h[c](t),f=new Vh({props:{language:Jh,code:t[1]}}),{c(){e=new yo(!1),n=Ke(),r=G(),s=L("section"),i=L("h2"),i.textContent="Output",o=G(),p&&p.c(),l=G(),a.c(),u=G(),Z(f.$$.fragment),e.a=n},m(S,F){e.m(Zh,oo.head),C(oo.head,n),H(S,r,F),H(S,s,F),C(s,i),C(s,o),p&&p.m(s,null),C(s,l),m[c].m(s,null),C(s,u),J(f,s,null),d=!0},p(S,[F]){S[3]?p?(p.p(S,F),F&8&&A(p,1)):(p=lo(S),p.c(),A(p,1),p.m(s,l)):p&&(Te(),j(p,1,1,()=>{p=null}),Oe());let k=c;c=E(S),c===k?m[c].p(S,F):(Te(),j(m[k],1,1,()=>{m[k]=null}),Oe(),a=m[c],a?a.p(S,F):(a=m[c]=h[c](S),a.c()),A(a,1),a.m(s,u));const D={};F&2&&(D.code=S[1]),f.$set(D)},i(S){d||(A(p),A(a),A(f.$$.fragment,S),d=!0)},o(S){j(p),j(a),j(f.$$.fragment,S),d=!1},d(S){x(n),S&&e.d(),S&&x(r),S&&x(s),p&&p.d(),m[c].d(),X(f)}}}function pp(t,e,n){let r,s,i,o;fe(t,ft,S=>n(9,r=S)),fe(t,cr,S=>n(6,s=S)),fe(t,xt,S=>n(7,i=S)),fe(t,Zr,S=>n(0,o=S));const l=new Set,c=new Set;let a="Add some classes and properties to see the output.",u=!1,f="";const d=()=>{n(1,a=$h(i,r,s,u)),document.querySelectorAll(":invalid").length>0?n(3,f="Warning: Some required fields are empty."):n(3,f="")},p=(S,F)=>{for(const k of S)F.has(k)||r.subscribe(k,d);for(const k of F)S.includes(k)||r.unsubscribe(k,d)},h=S=>{n(2,u=S.target.checked),d()},m=()=>{const S=[...i,...s];ip(r,S)};function E(){u=this.checked,n(2,u),n(0,o)}return t.$$.update=()=>{t.$$.dirty&1&&o==="remote"&&(n(2,u=!1),d()),t.$$.dirty&192&&(p(i,l),p(s,c))},[o,a,u,f,h,m,s,i,E]}class gp extends _e{constructor(e){super(),be(this,e,pp,hp,me,{})}}const ao="/atomic-data-model-builder/assets/cover-ccf54e3f.jpg";function mp(t){let e,n,r,s,i;return n=new ud({}),s=new gp({}),{c(){e=L("div"),Z(n.$$.fragment),r=G(),Z(s.$$.fragment),y(e,"class","wrapper svelte-ntiweo")},m(o,l){H(o,e,l),J(n,e,null),C(e,r),J(s,e,null),i=!0},p:re,i(o){i||(A(n.$$.fragment,o),A(s.$$.fragment,o),i=!0)},o(o){j(n.$$.fragment,o),j(s.$$.fragment,o),i=!1},d(o){o&&x(e),X(n),X(s)}}}function bp(t){let e,n,r,s,i,o,l,c,a,u;return s=new qd({}),l=new Ko({props:{$$slots:{default:[mp]},$$scope:{ctx:t}}}),a=new rp({}),{c(){e=L("meta"),n=L("meta"),r=G(),Z(s.$$.fragment),i=G(),o=L("main"),Z(l.$$.fragment),c=G(),Z(a.$$.fragment),y(e,"property","og:image"),y(e,"content",ao),y(n,"property","twitter:image"),y(n,"content",ao)},m(f,d){C(document.head,e),C(document.head,n),H(f,r,d),J(s,f,d),H(f,i,d),H(f,o,d),J(l,o,null),C(o,c),J(a,o,null),u=!0},p(f,[d]){const p={};d&1&&(p.$$scope={dirty:d,ctx:f}),l.$set(p)},i(f){u||(A(s.$$.fragment,f),A(l.$$.fragment,f),A(a.$$.fragment,f),u=!0)},o(f){j(s.$$.fragment,f),j(l.$$.fragment,f),j(a.$$.fragment,f),u=!1},d(f){x(e),x(n),f&&x(r),X(s,f),f&&x(i),f&&x(o),X(l),X(a)}}}function _p(t){return ei(()=>{const e=new Fo;Kc(e)}),[]}class yp extends _e{constructor(e){super(),be(this,e,_p,bp,me,{})}}new yp({target:document.getElementById("app")})});export default vp();
